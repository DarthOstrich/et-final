/*!
 * ET-Final
 * Emerging Technologies Final
 * 
 * @author Jared and Bridgett
 * @version 1.0.0
 * Copyright 2016. MIT licensed.
 */
!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e(require,exports,module):t.Tether=e()}(this,function(t,e,o){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t){var e=t.getBoundingClientRect(),o={};for(var i in e)o[i]=e[i];if(t.ownerDocument!==document){var r=t.ownerDocument.defaultView.frameElement;if(r){var s=n(r);o.top+=s.top,o.bottom+=s.top,o.left+=s.left,o.right+=s.left}}return o}function r(t){var e=getComputedStyle(t)||{},o=e.position,i=[];if("fixed"===o)return[t];for(var n=t;(n=n.parentNode)&&n&&1===n.nodeType;){var r=void 0;try{r=getComputedStyle(n)}catch(s){}if("undefined"==typeof r||null===r)return i.push(n),i;var a=r,f=a.overflow,l=a.overflowX,h=a.overflowY;/(auto|scroll)/.test(f+h+l)&&("absolute"!==o||["relative","absolute","fixed"].indexOf(r.position)>=0)&&i.push(n)}return i.push(t.ownerDocument.body),t.ownerDocument!==document&&i.push(t.ownerDocument.defaultView),i}function s(){A&&document.body.removeChild(A),A=null}function a(t){var e=void 0;t===document?(e=document,t=document.documentElement):e=t.ownerDocument;var o=e.documentElement,i=n(t),r=P();return i.top-=r.top,i.left-=r.left,"undefined"==typeof i.width&&(i.width=document.body.scrollWidth-i.left-i.right),"undefined"==typeof i.height&&(i.height=document.body.scrollHeight-i.top-i.bottom),i.top=i.top-o.clientTop,i.left=i.left-o.clientLeft,i.right=e.body.clientWidth-i.width-i.left,i.bottom=e.body.clientHeight-i.height-i.top,i}function f(t){return t.offsetParent||document.documentElement}function l(){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");h(e.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);var o=t.offsetWidth;e.style.overflow="scroll";var i=t.offsetWidth;o===i&&(i=e.clientWidth),document.body.removeChild(e);var n=o-i;return{width:n,height:n}}function h(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=[];return Array.prototype.push.apply(e,arguments),e.slice(1).forEach(function(e){if(e)for(var o in e)({}).hasOwnProperty.call(e,o)&&(t[o]=e[o])}),t}function d(t,e){if("undefined"!=typeof t.classList)e.split(" ").forEach(function(e){e.trim()&&t.classList.remove(e)});else{var o=new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi"),i=c(t).replace(o," ");g(t,i)}}function p(t,e){if("undefined"!=typeof t.classList)e.split(" ").forEach(function(e){e.trim()&&t.classList.add(e)});else{d(t,e);var o=c(t)+(" "+e);g(t,o)}}function u(t,e){if("undefined"!=typeof t.classList)return t.classList.contains(e);var o=c(t);return new RegExp("(^| )"+e+"( |$)","gi").test(o)}function c(t){return t.className instanceof t.ownerDocument.defaultView.SVGAnimatedString?t.className.baseVal:t.className}function g(t,e){t.setAttribute("class",e)}function m(t,e,o){o.forEach(function(o){e.indexOf(o)===-1&&u(t,o)&&d(t,o)}),e.forEach(function(e){u(t,e)||p(t,e)})}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function y(t,e){var o=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return t+o>=e&&e>=t-o}function b(){return"undefined"!=typeof performance&&"undefined"!=typeof performance.now?performance.now():+new Date}function w(){for(var t={top:0,left:0},e=arguments.length,o=Array(e),i=0;i<e;i++)o[i]=arguments[i];return o.forEach(function(e){var o=e.top,i=e.left;"string"==typeof o&&(o=parseFloat(o,10)),"string"==typeof i&&(i=parseFloat(i,10)),t.top+=o,t.left+=i}),t}function C(t,e){return"string"==typeof t.left&&t.left.indexOf("%")!==-1&&(t.left=parseFloat(t.left,10)/100*e.width),"string"==typeof t.top&&t.top.indexOf("%")!==-1&&(t.top=parseFloat(t.top,10)/100*e.height),t}function O(t,e){return"scrollParent"===e?e=t.scrollParents[0]:"window"===e&&(e=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),e===document&&(e=e.documentElement),"undefined"!=typeof e.nodeType&&!function(){var t=e,o=a(e),i=o,n=getComputedStyle(e);if(e=[i.left,i.top,o.width+i.left,o.height+i.top],t.ownerDocument!==document){var r=t.ownerDocument.defaultView;e[0]+=r.pageXOffset,e[1]+=r.pageYOffset,e[2]+=r.pageXOffset,e[3]+=r.pageYOffset}$.forEach(function(t,o){t=t[0].toUpperCase()+t.substr(1),"Top"===t||"Left"===t?e[o]+=parseFloat(n["border"+t+"Width"]):e[o]-=parseFloat(n["border"+t+"Width"])})}(),e}var E=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),x=void 0;"undefined"==typeof x&&(x={modules:[]});var A=null,T=function(){var t=0;return function(){return++t}}(),S={},P=function(){var t=A;t||(t=document.createElement("div"),t.setAttribute("data-tether-id",T()),h(t.style,{top:0,left:0,position:"absolute"}),document.body.appendChild(t),A=t);var e=t.getAttribute("data-tether-id");return"undefined"==typeof S[e]&&(S[e]=n(t),M(function(){delete S[e]})),S[e]},W=[],M=function(t){W.push(t)},_=function(){for(var t=void 0;t=W.pop();)t()},k=function(){function t(){i(this,t)}return E(t,[{key:"on",value:function(t,e,o){var i=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];"undefined"==typeof this.bindings&&(this.bindings={}),"undefined"==typeof this.bindings[t]&&(this.bindings[t]=[]),this.bindings[t].push({handler:e,ctx:o,once:i})}},{key:"once",value:function(t,e,o){this.on(t,e,o,!0)}},{key:"off",value:function(t,e){if("undefined"!=typeof this.bindings&&"undefined"!=typeof this.bindings[t])if("undefined"==typeof e)delete this.bindings[t];else for(var o=0;o<this.bindings[t].length;)this.bindings[t][o].handler===e?this.bindings[t].splice(o,1):++o}},{key:"trigger",value:function(t){if("undefined"!=typeof this.bindings&&this.bindings[t]){for(var e=0,o=arguments.length,i=Array(o>1?o-1:0),n=1;n<o;n++)i[n-1]=arguments[n];for(;e<this.bindings[t].length;){var r=this.bindings[t][e],s=r.handler,a=r.ctx,f=r.once,l=a;"undefined"==typeof l&&(l=this),s.apply(l,i),f?this.bindings[t].splice(e,1):++e}}}}]),t}();x.Utils={getActualBoundingClientRect:n,getScrollParents:r,getBounds:a,getOffsetParent:f,extend:h,addClass:p,removeClass:d,hasClass:u,updateClasses:m,defer:M,flush:_,uniqueId:T,Evented:k,getScrollBarSize:l,removeUtilElements:s};var B=function(){function t(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(f){n=!0,r=f}finally{try{!i&&a["return"]&&a["return"]()}finally{if(n)throw r}}return o}return function(e,o){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),E=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),z=function(t,e,o){for(var i=!0;i;){var n=t,r=e,s=o;i=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,r);if(void 0!==a){if("value"in a)return a.value;var f=a.get;if(void 0===f)return;return f.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;t=l,e=r,o=s,i=!0,a=l=void 0}};if("undefined"==typeof x)throw new Error("You must include the utils.js file before tether.js");var j=x.Utils,r=j.getScrollParents,a=j.getBounds,f=j.getOffsetParent,h=j.extend,p=j.addClass,d=j.removeClass,m=j.updateClasses,M=j.defer,_=j.flush,l=j.getScrollBarSize,s=j.removeUtilElements,Y=function(){if("undefined"==typeof document)return"";for(var t=document.createElement("div"),e=["transform","WebkitTransform","OTransform","MozTransform","msTransform"],o=0;o<e.length;++o){var i=e[o];if(void 0!==t.style[i])return i}}(),L=[],D=function(){L.forEach(function(t){t.position(!1)}),_()};!function(){var t=null,e=null,o=null,i=function n(){return"undefined"!=typeof e&&e>16?(e=Math.min(e-16,250),void(o=setTimeout(n,250))):void("undefined"!=typeof t&&b()-t<10||(null!=o&&(clearTimeout(o),o=null),t=b(),D(),e=b()-t))};"undefined"!=typeof window&&"undefined"!=typeof window.addEventListener&&["resize","scroll","touchmove"].forEach(function(t){window.addEventListener(t,i)})}();var X={center:"center",left:"right",right:"left"},F={middle:"middle",top:"bottom",bottom:"top"},H={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},N=function(t,e){var o=t.left,i=t.top;return"auto"===o&&(o=X[e.left]),"auto"===i&&(i=F[e.top]),{left:o,top:i}},U=function(t){var e=t.left,o=t.top;return"undefined"!=typeof H[t.left]&&(e=H[t.left]),"undefined"!=typeof H[t.top]&&(o=H[t.top]),{left:e,top:o}},V=function(t){var e=t.split(" "),o=B(e,2),i=o[0],n=o[1];return{top:i,left:n}},R=V,q=function(t){function e(t){var o=this;i(this,e),z(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.position=this.position.bind(this),L.push(this),this.history=[],this.setOptions(t,!1),x.modules.forEach(function(t){"undefined"!=typeof t.initialize&&t.initialize.call(o)}),this.position()}return v(e,t),E(e,[{key:"getClass",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],e=this.options.classes;return"undefined"!=typeof e&&e[t]?this.options.classes[t]:this.options.classPrefix?this.options.classPrefix+"-"+t:t}},{key:"setOptions",value:function(t){var e=this,o=arguments.length<=1||void 0===arguments[1]||arguments[1],i={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"};this.options=h(i,t);var n=this.options,s=n.element,a=n.target,f=n.targetModifier;if(this.element=s,this.target=a,this.targetModifier=f,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach(function(t){if("undefined"==typeof e[t])throw new Error("Tether Error: Both element and target must be defined");"undefined"!=typeof e[t].jquery?e[t]=e[t][0]:"string"==typeof e[t]&&(e[t]=document.querySelector(e[t]))}),p(this.element,this.getClass("element")),this.options.addTargetClasses!==!1&&p(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=R(this.options.targetAttachment),this.attachment=R(this.options.attachment),this.offset=V(this.options.offset),this.targetOffset=V(this.options.targetOffset),"undefined"!=typeof this.scrollParents&&this.disable(),"scroll-handle"===this.targetModifier?this.scrollParents=[this.target]:this.scrollParents=r(this.target),this.options.enabled!==!1&&this.enable(o)}},{key:"getTargetBounds",value:function(){if("undefined"==typeof this.targetModifier)return a(this.target);if("visible"===this.targetModifier){if(this.target===document.body)return{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth};var t=a(this.target),e={height:t.height,width:t.width,top:t.top,left:t.left};return e.height=Math.min(e.height,t.height-(pageYOffset-t.top)),e.height=Math.min(e.height,t.height-(t.top+t.height-(pageYOffset+innerHeight))),e.height=Math.min(innerHeight,e.height),e.height-=2,e.width=Math.min(e.width,t.width-(pageXOffset-t.left)),e.width=Math.min(e.width,t.width-(t.left+t.width-(pageXOffset+innerWidth))),e.width=Math.min(innerWidth,e.width),e.width-=2,e.top<pageYOffset&&(e.top=pageYOffset),e.left<pageXOffset&&(e.left=pageXOffset),e}if("scroll-handle"===this.targetModifier){var t=void 0,o=this.target;o===document.body?(o=document.documentElement,t={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):t=a(o);var i=getComputedStyle(o),n=o.scrollWidth>o.clientWidth||[i.overflow,i.overflowX].indexOf("scroll")>=0||this.target!==document.body,r=0;n&&(r=15);var s=t.height-parseFloat(i.borderTopWidth)-parseFloat(i.borderBottomWidth)-r,e={width:15,height:.975*s*(s/o.scrollHeight),left:t.left+t.width-parseFloat(i.borderLeftWidth)-15},f=0;s<408&&this.target===document.body&&(f=-11e-5*Math.pow(s,2)-.00727*s+22.58),this.target!==document.body&&(e.height=Math.max(e.height,24));var l=this.target.scrollTop/(o.scrollHeight-s);return e.top=l*(s-e.height-f)+t.top+parseFloat(i.borderTopWidth),this.target===document.body&&(e.height=Math.max(e.height,24)),e}}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(t,e){return"undefined"==typeof this._cache&&(this._cache={}),"undefined"==typeof this._cache[t]&&(this._cache[t]=e.call(this)),this._cache[t]}},{key:"enable",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];this.options.addTargetClasses!==!1&&p(this.target,this.getClass("enabled")),p(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParents.forEach(function(e){e!==t.target.ownerDocument&&e.addEventListener("scroll",t.position)}),e&&this.position()}},{key:"disable",value:function(){var t=this;d(this.target,this.getClass("enabled")),d(this.element,this.getClass("enabled")),this.enabled=!1,"undefined"!=typeof this.scrollParents&&this.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.position)})}},{key:"destroy",value:function(){var t=this;this.disable(),L.forEach(function(e,o){e===t&&L.splice(o,1)}),0===L.length&&s()}},{key:"updateAttachClasses",value:function(t,e){var o=this;t=t||this.attachment,e=e||this.targetAttachment;var i=["left","top","bottom","right","middle","center"];"undefined"!=typeof this._addAttachClasses&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),"undefined"==typeof this._addAttachClasses&&(this._addAttachClasses=[]);var n=this._addAttachClasses;t.top&&n.push(this.getClass("element-attached")+"-"+t.top),t.left&&n.push(this.getClass("element-attached")+"-"+t.left),e.top&&n.push(this.getClass("target-attached")+"-"+e.top),e.left&&n.push(this.getClass("target-attached")+"-"+e.left);var r=[];i.forEach(function(t){r.push(o.getClass("element-attached")+"-"+t),r.push(o.getClass("target-attached")+"-"+t)}),M(function(){"undefined"!=typeof o._addAttachClasses&&(m(o.element,o._addAttachClasses,r),o.options.addTargetClasses!==!1&&m(o.target,o._addAttachClasses,r),delete o._addAttachClasses)})}},{key:"position",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];if(this.enabled){this.clearCache();var o=N(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,o);var i=this.cache("element-bounds",function(){return a(t.element)}),n=i.width,r=i.height;if(0===n&&0===r&&"undefined"!=typeof this.lastSize){var s=this.lastSize;n=s.width,r=s.height}else this.lastSize={width:n,height:r};var h=this.cache("target-bounds",function(){return t.getTargetBounds()}),d=h,p=C(U(this.attachment),{width:n,height:r}),u=C(U(o),d),c=C(this.offset,{width:n,height:r}),g=C(this.targetOffset,d);p=w(p,c),u=w(u,g);for(var m=h.left+u.left-p.left,v=h.top+u.top-p.top,y=0;y<x.modules.length;++y){var b=x.modules[y],O=b.position.call(this,{left:m,top:v,targetAttachment:o,targetPos:h,elementPos:i,offset:p,targetOffset:u,manualOffset:c,manualTargetOffset:g,scrollbarSize:S,attachment:this.attachment});if(O===!1)return!1;"undefined"!=typeof O&&"object"==typeof O&&(v=O.top,m=O.left)}var E={page:{top:v,left:m},viewport:{top:v-pageYOffset,bottom:pageYOffset-v-r+innerHeight,left:m-pageXOffset,right:pageXOffset-m-n+innerWidth}},A=this.target.ownerDocument,T=A.defaultView,S=void 0;return A.body.scrollWidth>T.innerWidth&&(S=this.cache("scrollbar-size",l),E.viewport.bottom-=S.height),A.body.scrollHeight>T.innerHeight&&(S=this.cache("scrollbar-size",l),E.viewport.right-=S.width),["","static"].indexOf(A.body.style.position)!==-1&&["","static"].indexOf(A.body.parentElement.style.position)!==-1||(E.page.bottom=A.body.scrollHeight-v-r,E.page.right=A.body.scrollWidth-m-n),"undefined"!=typeof this.options.optimizations&&this.options.optimizations.moveElement!==!1&&"undefined"==typeof this.targetModifier&&!function(){var e=t.cache("target-offsetparent",function(){return f(t.target)}),o=t.cache("target-offsetparent-bounds",function(){return a(e)}),i=getComputedStyle(e),n=o,r={};if(["Top","Left","Bottom","Right"].forEach(function(t){r[t.toLowerCase()]=parseFloat(i["border"+t+"Width"])}),o.right=A.body.scrollWidth-o.left-n.width+r.right,o.bottom=A.body.scrollHeight-o.top-n.height+r.bottom,E.page.top>=o.top+r.top&&E.page.bottom>=o.bottom&&E.page.left>=o.left+r.left&&E.page.right>=o.right){var s=e.scrollTop,l=e.scrollLeft;E.offset={top:E.page.top-o.top+s-r.top,left:E.page.left-o.left+l-r.left}}}(),this.move(E),this.history.unshift(E),this.history.length>3&&this.history.pop(),e&&_(),!0}}},{key:"move",value:function(t){var e=this;if("undefined"!=typeof this.element.parentNode){var o={};for(var i in t){o[i]={};for(var n in t[i]){for(var r=!1,s=0;s<this.history.length;++s){var a=this.history[s];if("undefined"!=typeof a[i]&&!y(a[i][n],t[i][n])){r=!0;break}}r||(o[i][n]=!0)}}var l={top:"",left:"",right:"",bottom:""},d=function(t,o){var i="undefined"!=typeof e.options.optimizations,n=i?e.options.optimizations.gpu:null;if(n!==!1){var r=void 0,s=void 0;t.top?(l.top=0,r=o.top):(l.bottom=0,r=-o.bottom),t.left?(l.left=0,s=o.left):(l.right=0,s=-o.right),l[Y]="translateX("+Math.round(s)+"px) translateY("+Math.round(r)+"px)","msTransform"!==Y&&(l[Y]+=" translateZ(0)")}else t.top?l.top=o.top+"px":l.bottom=o.bottom+"px",t.left?l.left=o.left+"px":l.right=o.right+"px"},p=!1;if((o.page.top||o.page.bottom)&&(o.page.left||o.page.right)?(l.position="absolute",d(o.page,t.page)):(o.viewport.top||o.viewport.bottom)&&(o.viewport.left||o.viewport.right)?(l.position="fixed",d(o.viewport,t.viewport)):"undefined"!=typeof o.offset&&o.offset.top&&o.offset.left?!function(){l.position="absolute";var i=e.cache("target-offsetparent",function(){return f(e.target)});f(e.element)!==i&&M(function(){e.element.parentNode.removeChild(e.element),i.appendChild(e.element)}),d(o.offset,t.offset),p=!0}():(l.position="absolute",d({top:!0,left:!0},t.page)),!p){for(var u=!0,c=this.element.parentNode;c&&1===c.nodeType&&"BODY"!==c.tagName;){if("static"!==getComputedStyle(c).position){u=!1;break}c=c.parentNode}u||(this.element.parentNode.removeChild(this.element),this.element.ownerDocument.body.appendChild(this.element))}var g={},m=!1;for(var n in l){var v=l[n],b=this.element.style[n];b!==v&&(m=!0,g[n]=v)}m&&M(function(){h(e.element.style,g),e.trigger("repositioned")})}}}]),e}(k);q.modules=[],x.position=D;var I=h(q,x),B=function(){function t(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(f){n=!0,r=f}finally{try{!i&&a["return"]&&a["return"]()}finally{if(n)throw r}}return o}return function(e,o){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),j=x.Utils,a=j.getBounds,h=j.extend,m=j.updateClasses,M=j.defer,$=["left","top","right","bottom"];x.modules.push({position:function(t){var e=this,o=t.top,i=t.left,n=t.targetAttachment;if(!this.options.constraints)return!0;var r=this.cache("element-bounds",function(){return a(e.element)}),s=r.height,f=r.width;if(0===f&&0===s&&"undefined"!=typeof this.lastSize){var l=this.lastSize;f=l.width,s=l.height}var d=this.cache("target-bounds",function(){return e.getTargetBounds()}),p=d.height,u=d.width,c=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(t){var e=t.outOfBoundsClass,o=t.pinnedClass;e&&c.push(e),o&&c.push(o)}),c.forEach(function(t){["left","top","right","bottom"].forEach(function(e){c.push(t+"-"+e)})});var g=[],v=h({},n),y=h({},this.attachment);return this.options.constraints.forEach(function(t){var r=t.to,a=t.attachment,l=t.pin;"undefined"==typeof a&&(a="");var h=void 0,d=void 0;if(a.indexOf(" ")>=0){var c=a.split(" "),m=B(c,2);d=m[0],h=m[1]}else h=d=a;var b=O(e,r);"target"!==d&&"both"!==d||(o<b[1]&&"top"===v.top&&(o+=p,v.top="bottom"),o+s>b[3]&&"bottom"===v.top&&(o-=p,v.top="top")),"together"===d&&("top"===v.top&&("bottom"===y.top&&o<b[1]?(o+=p,v.top="bottom",o+=s,y.top="top"):"top"===y.top&&o+s>b[3]&&o-(s-p)>=b[1]&&(o-=s-p,v.top="bottom",y.top="bottom")),"bottom"===v.top&&("top"===y.top&&o+s>b[3]?(o-=p,v.top="top",o-=s,y.top="bottom"):"bottom"===y.top&&o<b[1]&&o+(2*s-p)<=b[3]&&(o+=s-p,v.top="top",y.top="top")),"middle"===v.top&&(o+s>b[3]&&"top"===y.top?(o-=s,y.top="bottom"):o<b[1]&&"bottom"===y.top&&(o+=s,y.top="top"))),"target"!==h&&"both"!==h||(i<b[0]&&"left"===v.left&&(i+=u,v.left="right"),i+f>b[2]&&"right"===v.left&&(i-=u,v.left="left")),"together"===h&&(i<b[0]&&"left"===v.left?"right"===y.left?(i+=u,v.left="right",i+=f,y.left="left"):"left"===y.left&&(i+=u,v.left="right",i-=f,y.left="right"):i+f>b[2]&&"right"===v.left?"left"===y.left?(i-=u,v.left="left",i-=f,y.left="right"):"right"===y.left&&(i-=u,v.left="left",i+=f,y.left="left"):"center"===v.left&&(i+f>b[2]&&"left"===y.left?(i-=f,y.left="right"):i<b[0]&&"right"===y.left&&(i+=f,y.left="left"))),"element"!==d&&"both"!==d||(o<b[1]&&"bottom"===y.top&&(o+=s,y.top="top"),o+s>b[3]&&"top"===y.top&&(o-=s,y.top="bottom")),"element"!==h&&"both"!==h||(i<b[0]&&("right"===y.left?(i+=f,y.left="left"):"center"===y.left&&(i+=f/2,y.left="left")),i+f>b[2]&&("left"===y.left?(i-=f,y.left="right"):"center"===y.left&&(i-=f/2,y.left="right"))),"string"==typeof l?l=l.split(",").map(function(t){return t.trim()}):l===!0&&(l=["top","left","right","bottom"]),l=l||[];var w=[],C=[];o<b[1]&&(l.indexOf("top")>=0?(o=b[1],w.push("top")):C.push("top")),o+s>b[3]&&(l.indexOf("bottom")>=0?(o=b[3]-s,w.push("bottom")):C.push("bottom")),i<b[0]&&(l.indexOf("left")>=0?(i=b[0],w.push("left")):C.push("left")),i+f>b[2]&&(l.indexOf("right")>=0?(i=b[2]-f,w.push("right")):C.push("right")),w.length&&!function(){var t=void 0;t="undefined"!=typeof e.options.pinnedClass?e.options.pinnedClass:e.getClass("pinned"),g.push(t),w.forEach(function(e){g.push(t+"-"+e)})}(),C.length&&!function(){var t=void 0;t="undefined"!=typeof e.options.outOfBoundsClass?e.options.outOfBoundsClass:e.getClass("out-of-bounds"),g.push(t),C.forEach(function(e){g.push(t+"-"+e)})}(),(w.indexOf("left")>=0||w.indexOf("right")>=0)&&(y.left=v.left=!1),(w.indexOf("top")>=0||w.indexOf("bottom")>=0)&&(y.top=v.top=!1),v.top===n.top&&v.left===n.left&&y.top===e.attachment.top&&y.left===e.attachment.left||(e.updateAttachClasses(y,v),e.trigger("update",{attachment:y,targetAttachment:v}))}),M(function(){e.options.addTargetClasses!==!1&&m(e.target,g,c),m(e.element,g,c)}),{top:o,left:i}}});var j=x.Utils,a=j.getBounds,m=j.updateClasses,M=j.defer;x.modules.push({position:function(t){var e=this,o=t.top,i=t.left,n=this.cache("element-bounds",function(){return a(e.element)}),r=n.height,s=n.width,f=this.getTargetBounds(),l=o+r,h=i+s,d=[];o<=f.bottom&&l>=f.top&&["left","right"].forEach(function(t){var e=f[t];e!==i&&e!==h||d.push(t)}),i<=f.right&&h>=f.left&&["top","bottom"].forEach(function(t){var e=f[t];e!==o&&e!==l||d.push(t)});var p=[],u=[],c=["left","top","right","bottom"];return p.push(this.getClass("abutted")),c.forEach(function(t){p.push(e.getClass("abutted")+"-"+t)}),d.length&&u.push(this.getClass("abutted")),d.forEach(function(t){u.push(e.getClass("abutted")+"-"+t)}),M(function(){e.options.addTargetClasses!==!1&&m(e.target,u,p),m(e.element,u,p)}),!0}});var B=function(){function t(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(f){n=!0,r=f}finally{try{!i&&a["return"]&&a["return"]()}finally{if(n)throw r}}return o}return function(e,o){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();return x.modules.push({position:function(t){var e=t.top,o=t.left;if(this.options.shift){var i=this.options.shift;"function"==typeof this.options.shift&&(i=this.options.shift.call(this,{top:e,left:o}));var n=void 0,r=void 0;if("string"==typeof i){i=i.split(" "),i[1]=i[1]||i[0];var s=i,a=B(s,2);n=a[0],r=a[1],n=parseFloat(n,10),r=parseFloat(r,10)}else n=i.top,r=i.left;return e+=n,o+=r,{top:e,left:o}}}}),I});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRldGhlci5qcyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImRlZmluZSIsImFtZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJyZXF1aXJlIiwiVGV0aGVyIiwidGhpcyIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJnZXRBY3R1YWxCb3VuZGluZ0NsaWVudFJlY3QiLCJub2RlIiwiYm91bmRpbmdSZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwicmVjdCIsImsiLCJvd25lckRvY3VtZW50IiwiZG9jdW1lbnQiLCJfZnJhbWVFbGVtZW50IiwiZGVmYXVsdFZpZXciLCJmcmFtZUVsZW1lbnQiLCJmcmFtZVJlY3QiLCJ0b3AiLCJib3R0b20iLCJsZWZ0IiwicmlnaHQiLCJnZXRTY3JvbGxQYXJlbnRzIiwiZWwiLCJjb21wdXRlZFN0eWxlIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInBvc2l0aW9uIiwicGFyZW50cyIsInBhcmVudCIsInBhcmVudE5vZGUiLCJub2RlVHlwZSIsInN0eWxlIiwidW5kZWZpbmVkIiwiZXJyIiwicHVzaCIsIl9zdHlsZSIsIm92ZXJmbG93Iiwib3ZlcmZsb3dYIiwib3ZlcmZsb3dZIiwidGVzdCIsImluZGV4T2YiLCJib2R5IiwicmVtb3ZlVXRpbEVsZW1lbnRzIiwiemVyb0VsZW1lbnQiLCJyZW1vdmVDaGlsZCIsImdldEJvdW5kcyIsImRvYyIsImRvY3VtZW50RWxlbWVudCIsImRvY0VsIiwiYm94Iiwib3JpZ2luIiwiZ2V0T3JpZ2luIiwid2lkdGgiLCJzY3JvbGxXaWR0aCIsImhlaWdodCIsInNjcm9sbEhlaWdodCIsImNsaWVudFRvcCIsImNsaWVudExlZnQiLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsImdldE9mZnNldFBhcmVudCIsIm9mZnNldFBhcmVudCIsImdldFNjcm9sbEJhclNpemUiLCJpbm5lciIsImNyZWF0ZUVsZW1lbnQiLCJvdXRlciIsImV4dGVuZCIsInBvaW50ZXJFdmVudHMiLCJ2aXNpYmlsaXR5IiwiYXBwZW5kQ2hpbGQiLCJ3aWR0aENvbnRhaW5lZCIsIm9mZnNldFdpZHRoIiwid2lkdGhTY3JvbGwiLCJvdXQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJhcmdzIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJhcHBseSIsInNsaWNlIiwiZm9yRWFjaCIsIm9iaiIsImtleSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInJlbW92ZUNsYXNzIiwibmFtZSIsImNsYXNzTGlzdCIsInNwbGl0IiwiY2xzIiwidHJpbSIsInJlbW92ZSIsInJlZ2V4IiwiUmVnRXhwIiwiam9pbiIsImNsYXNzTmFtZSIsImdldENsYXNzTmFtZSIsInJlcGxhY2UiLCJzZXRDbGFzc05hbWUiLCJhZGRDbGFzcyIsImFkZCIsImhhc0NsYXNzIiwiY29udGFpbnMiLCJTVkdBbmltYXRlZFN0cmluZyIsImJhc2VWYWwiLCJzZXRBdHRyaWJ1dGUiLCJ1cGRhdGVDbGFzc2VzIiwiYWxsIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwiT2JqZWN0IiwiY3JlYXRlIiwiY29uc3RydWN0b3IiLCJ2YWx1ZSIsImVudW1lcmFibGUiLCJ3cml0YWJsZSIsImNvbmZpZ3VyYWJsZSIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwid2l0aGluIiwiYSIsImIiLCJkaWZmIiwibm93IiwicGVyZm9ybWFuY2UiLCJEYXRlIiwiYWRkT2Zmc2V0IiwiX2xlbiIsIm9mZnNldHMiLCJfa2V5IiwiX3JlZiIsInBhcnNlRmxvYXQiLCJvZmZzZXRUb1B4Iiwib2Zmc2V0Iiwic2l6ZSIsImdldEJvdW5kaW5nUmVjdCIsInRldGhlciIsInRvIiwic2Nyb2xsUGFyZW50cyIsInBhZ2VYT2Zmc2V0IiwicGFnZVlPZmZzZXQiLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJwb3MiLCJ3aW4iLCJCT1VORFNfRk9STUFUIiwic2lkZSIsImkiLCJ0b1VwcGVyQ2FzZSIsInN1YnN0ciIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImRlc2NyaXB0b3IiLCJkZWZpbmVQcm9wZXJ0eSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIlRldGhlckJhc2UiLCJtb2R1bGVzIiwidW5pcXVlSWQiLCJpZCIsInplcm9Qb3NDYWNoZSIsImdldEF0dHJpYnV0ZSIsImRlZmVyIiwiZGVmZXJyZWQiLCJmbiIsImZsdXNoIiwicG9wIiwiRXZlbnRlZCIsImV2ZW50IiwiaGFuZGxlciIsImN0eCIsIm9uY2UiLCJiaW5kaW5ncyIsIm9uIiwic3BsaWNlIiwiX2JpbmRpbmdzJGV2ZW50JGkiLCJjb250ZXh0IiwiVXRpbHMiLCJfc2xpY2VkVG9BcnJheSIsInNsaWNlSXRlcmF0b3IiLCJhcnIiLCJfYXJyIiwiX24iLCJfZCIsIl9lIiwiX3MiLCJfaSIsIlN5bWJvbCIsIml0ZXJhdG9yIiwibmV4dCIsImRvbmUiLCJpc0FycmF5IiwiX2dldCIsIl94NiIsIl94NyIsIl94OCIsIl9hZ2FpbiIsIm9iamVjdCIsInByb3BlcnR5IiwicmVjZWl2ZXIiLCJGdW5jdGlvbiIsImRlc2MiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJnZXR0ZXIiLCJnZXQiLCJnZXRQcm90b3R5cGVPZiIsIkVycm9yIiwiX1RldGhlckJhc2UkVXRpbHMiLCJ0cmFuc2Zvcm1LZXkiLCJ0cmFuc2Zvcm1zIiwidGV0aGVycyIsImxhc3RDYWxsIiwibGFzdER1cmF0aW9uIiwicGVuZGluZ1RpbWVvdXQiLCJ0aWNrIiwiTWF0aCIsIm1pbiIsInNldFRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiTUlSUk9SX0xSIiwiY2VudGVyIiwiTUlSUk9SX1RCIiwibWlkZGxlIiwiT0ZGU0VUX01BUCIsImF1dG9Ub0ZpeGVkQXR0YWNobWVudCIsImF0dGFjaG1lbnQiLCJyZWxhdGl2ZVRvQXR0YWNobWVudCIsImF0dGFjaG1lbnRUb09mZnNldCIsInBhcnNlT2Zmc2V0IiwiX3ZhbHVlJHNwbGl0IiwiX3ZhbHVlJHNwbGl0MiIsInBhcnNlQXR0YWNobWVudCIsIlRldGhlckNsYXNzIiwiX0V2ZW50ZWQiLCJvcHRpb25zIiwiX3RoaXMiLCJiaW5kIiwiaGlzdG9yeSIsInNldE9wdGlvbnMiLCJpbml0aWFsaXplIiwiY2xhc3NlcyIsImNsYXNzUHJlZml4IiwiX3RoaXMyIiwiZGVmYXVsdHMiLCJ0YXJnZXRPZmZzZXQiLCJ0YXJnZXRBdHRhY2htZW50IiwiX29wdGlvbnMiLCJlbGVtZW50IiwidGFyZ2V0TW9kaWZpZXIiLCJqcXVlcnkiLCJxdWVyeVNlbGVjdG9yIiwiZ2V0Q2xhc3MiLCJhZGRUYXJnZXRDbGFzc2VzIiwiZGlzYWJsZSIsImVuYWJsZWQiLCJlbmFibGUiLCJib3VuZHMiLCJoYXNCb3R0b21TY3JvbGwiLCJzY3JvbGxCb3R0b20iLCJib3JkZXJUb3BXaWR0aCIsImJvcmRlckJvdHRvbVdpZHRoIiwiYm9yZGVyTGVmdFdpZHRoIiwiZml0QWRqIiwicG93IiwibWF4Iiwic2Nyb2xsUGVyY2VudGFnZSIsInNjcm9sbFRvcCIsIl9jYWNoZSIsIl90aGlzMyIsIl90aGlzNCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfdGhpczUiLCJlbGVtZW50QXR0YWNoIiwidGFyZ2V0QXR0YWNoIiwiX3RoaXM2Iiwic2lkZXMiLCJfYWRkQXR0YWNoQ2xhc3NlcyIsIl90aGlzNyIsImZsdXNoQ2hhbmdlcyIsImNsZWFyQ2FjaGUiLCJ1cGRhdGVBdHRhY2hDbGFzc2VzIiwiZWxlbWVudFBvcyIsImNhY2hlIiwibGFzdFNpemUiLCJfbGFzdFNpemUiLCJ0YXJnZXRQb3MiLCJnZXRUYXJnZXRCb3VuZHMiLCJ0YXJnZXRTaXplIiwibWFudWFsT2Zmc2V0IiwibWFudWFsVGFyZ2V0T2Zmc2V0IiwiX21vZHVsZTIiLCJyZXQiLCJzY3JvbGxiYXJTaXplIiwicGFnZSIsInZpZXdwb3J0IiwicGFyZW50RWxlbWVudCIsIm9wdGltaXphdGlvbnMiLCJtb3ZlRWxlbWVudCIsIm9mZnNldFBvc2l0aW9uIiwib2Zmc2V0UGFyZW50U3R5bGUiLCJvZmZzZXRQYXJlbnRTaXplIiwib2Zmc2V0Qm9yZGVyIiwidG9Mb3dlckNhc2UiLCJzY3JvbGxMZWZ0IiwibW92ZSIsInVuc2hpZnQiLCJfdGhpczgiLCJzYW1lIiwidHlwZSIsImZvdW5kIiwicG9pbnQiLCJjc3MiLCJ0cmFuc2NyaWJlIiwiX3NhbWUiLCJfcG9zIiwiaGFzT3B0aW1pemF0aW9ucyIsImdwdSIsInlQb3MiLCJ4UG9zIiwicm91bmQiLCJtb3ZlZCIsIm9mZnNldFBhcmVudElzQm9keSIsImN1cnJlbnROb2RlIiwidGFnTmFtZSIsIndyaXRlQ1NTIiwid3JpdGUiLCJ2YWwiLCJlbFZhbCIsInRyaWdnZXIiLCJjb25zdHJhaW50cyIsInRhcmdldEhlaWdodCIsInRhcmdldFdpZHRoIiwiYWxsQ2xhc3NlcyIsImNvbnN0cmFpbnQiLCJvdXRPZkJvdW5kc0NsYXNzIiwicGlubmVkQ2xhc3MiLCJhZGRDbGFzc2VzIiwidEF0dGFjaG1lbnQiLCJlQXR0YWNobWVudCIsInBpbiIsImNoYW5nZUF0dGFjaFgiLCJjaGFuZ2VBdHRhY2hZIiwiX2F0dGFjaG1lbnQkc3BsaXQiLCJfYXR0YWNobWVudCRzcGxpdDIiLCJtYXAiLCJwIiwicGlubmVkIiwib29iIiwib29iQ2xhc3MiLCJhYnV0dGVkIiwidGFyZ2V0UG9zU2lkZSIsInNoaWZ0Iiwic2hpZnRUb3AiLCJzaGlmdExlZnQiLCJfc2hpZnQiLCJfc2hpZnQyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztDQUVBLFNBQUFBLEVBQUFDLEdBQ0Esa0JBQUFDLFNBQUFBLE9BQUFDLElBQ0FELE9BQUFELEdBQ0EsZ0JBQUFHLFNBQ0FDLE9BQUFELFFBQUFILEVBQUFLLFFBQUFGLFFBQUFDLFFBRUFMLEVBQUFPLE9BQUFOLEtBRUFPLEtBQUEsU0FBQUYsRUFBQUYsRUFBQUMsR0FFQSxZQUlBLFNBQUFJLEdBQUFDLEVBQUFDLEdBQUEsS0FBQUQsWUFBQUMsSUFBQSxLQUFBLElBQUFDLFdBQUEs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bnQiOlsiLyohIHRldGhlciAxLjMuNCAqL1xuXG4oZnVuY3Rpb24ocm9vdCwgZmFjdG9yeSkge1xuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKGZhY3RvcnkpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUpO1xuICB9IGVsc2Uge1xuICAgIHJvb3QuVGV0aGVyID0gZmFjdG9yeSgpO1xuICB9XG59KHRoaXMsIGZ1bmN0aW9uKHJlcXVpcmUsIGV4cG9ydHMsIG1vZHVsZSkge1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCd2YWx1ZScgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXG52YXIgVGV0aGVyQmFzZSA9IHVuZGVmaW5lZDtcbmlmICh0eXBlb2YgVGV0aGVyQmFzZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgVGV0aGVyQmFzZSA9IHsgbW9kdWxlczogW10gfTtcbn1cblxudmFyIHplcm9FbGVtZW50ID0gbnVsbDtcblxuLy8gU2FtZSBhcyBuYXRpdmUgZ2V0Qm91bmRpbmdDbGllbnRSZWN0LCBleGNlcHQgaXQgdGFrZXMgaW50byBhY2NvdW50IHBhcmVudCA8ZnJhbWU+IG9mZnNldHNcbi8vIGlmIHRoZSBlbGVtZW50IGxpZXMgd2l0aGluIGEgbmVzdGVkIGRvY3VtZW50ICg8ZnJhbWU+IG9yIDxpZnJhbWU+LWxpa2UpLlxuZnVuY3Rpb24gZ2V0QWN0dWFsQm91bmRpbmdDbGllbnRSZWN0KG5vZGUpIHtcbiAgdmFyIGJvdW5kaW5nUmVjdCA9IG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgLy8gVGhlIG9yaWdpbmFsIG9iamVjdCByZXR1cm5lZCBieSBnZXRCb3VuZGluZ0NsaWVudFJlY3QgaXMgaW1tdXRhYmxlLCBzbyB3ZSBjbG9uZSBpdFxuICAvLyBXZSBjYW4ndCB1c2UgZXh0ZW5kIGJlY2F1c2UgdGhlIHByb3BlcnRpZXMgYXJlIG5vdCBjb25zaWRlcmVkIHBhcnQgb2YgdGhlIG9iamVjdCBieSBoYXNPd25Qcm9wZXJ0eSBpbiBJRTlcbiAgdmFyIHJlY3QgPSB7fTtcbiAgZm9yICh2YXIgayBpbiBib3VuZGluZ1JlY3QpIHtcbiAgICByZWN0W2tdID0gYm91bmRpbmdSZWN0W2tdO1xuICB9XG5cbiAgaWYgKG5vZGUub3duZXJEb2N1bWVudCAhPT0gZG9jdW1lbnQpIHtcbiAgICB2YXIgX2ZyYW1lRWxlbWVudCA9IG5vZGUub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5mcmFtZUVsZW1lbnQ7XG4gICAgaWYgKF9mcmFtZUVsZW1lbnQpIHtcbiAgICAgIHZhciBmcmFtZVJlY3QgPSBnZXRBY3R1YWxCb3VuZGluZ0NsaWVudFJlY3QoX2ZyYW1lRWxlbWVudCk7XG4gICAgICByZWN0LnRvcCArPSBmcmFtZVJlY3QudG9wO1xuICAgICAgcmVjdC5ib3R0b20gKz0gZnJhbWVSZWN0LnRvcDtcbiAgICAgIHJlY3QubGVmdCArPSBmcmFtZVJlY3QubGVmdDtcbiAgICAgIHJlY3QucmlnaHQgKz0gZnJhbWVSZWN0LmxlZnQ7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlY3Q7XG59XG5cbmZ1bmN0aW9uIGdldFNjcm9sbFBhcmVudHMoZWwpIHtcbiAgLy8gSW4gZmlyZWZveCBpZiB0aGUgZWwgaXMgaW5zaWRlIGFuIGlmcmFtZSB3aXRoIGRpc3BsYXk6IG5vbmU7IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCkgd2lsbCByZXR1cm4gbnVsbDtcbiAgLy8gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NTQ4Mzk3XG4gIHZhciBjb21wdXRlZFN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbCkgfHwge307XG4gIHZhciBwb3NpdGlvbiA9IGNvbXB1dGVkU3R5bGUucG9zaXRpb247XG4gIHZhciBwYXJlbnRzID0gW107XG5cbiAgaWYgKHBvc2l0aW9uID09PSAnZml4ZWQnKSB7XG4gICAgcmV0dXJuIFtlbF07XG4gIH1cblxuICB2YXIgcGFyZW50ID0gZWw7XG4gIHdoaWxlICgocGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGUpICYmIHBhcmVudCAmJiBwYXJlbnQubm9kZVR5cGUgPT09IDEpIHtcbiAgICB2YXIgc3R5bGUgPSB1bmRlZmluZWQ7XG4gICAgdHJ5IHtcbiAgICAgIHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShwYXJlbnQpO1xuICAgIH0gY2F0Y2ggKGVycikge31cblxuICAgIGlmICh0eXBlb2Ygc3R5bGUgPT09ICd1bmRlZmluZWQnIHx8IHN0eWxlID09PSBudWxsKSB7XG4gICAgICBwYXJlbnRzLnB1c2gocGFyZW50KTtcbiAgICAgIHJldHVybiBwYXJlbnRzO1xuICAgIH1cblxuICAgIHZhciBfc3R5bGUgPSBzdHlsZTtcbiAgICB2YXIgb3ZlcmZsb3cgPSBfc3R5bGUub3ZlcmZsb3c7XG4gICAgdmFyIG92ZXJmbG93WCA9IF9zdHlsZS5vdmVyZmxvd1g7XG4gICAgdmFyIG92ZXJmbG93WSA9IF9zdHlsZS5vdmVyZmxvd1k7XG5cbiAgICBpZiAoLyhhdXRvfHNjcm9sbCkvLnRlc3Qob3ZlcmZsb3cgKyBvdmVyZmxvd1kgKyBvdmVyZmxvd1gpKSB7XG4gICAgICBpZiAocG9zaXRpb24gIT09ICdhYnNvbHV0ZScgfHwgWydyZWxhdGl2ZScsICdhYnNvbHV0ZScsICdmaXhlZCddLmluZGV4T2Yoc3R5bGUucG9zaXRpb24pID49IDApIHtcbiAgICAgICAgcGFyZW50cy5wdXNoKHBhcmVudCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcGFyZW50cy5wdXNoKGVsLm93bmVyRG9jdW1lbnQuYm9keSk7XG5cbiAgLy8gSWYgdGhlIG5vZGUgaXMgd2l0aGluIGEgZnJhbWUsIGFjY291bnQgZm9yIHRoZSBwYXJlbnQgd2luZG93IHNjcm9sbFxuICBpZiAoZWwub3duZXJEb2N1bWVudCAhPT0gZG9jdW1lbnQpIHtcbiAgICBwYXJlbnRzLnB1c2goZWwub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldyk7XG4gIH1cblxuICByZXR1cm4gcGFyZW50cztcbn1cblxudmFyIHVuaXF1ZUlkID0gKGZ1bmN0aW9uICgpIHtcbiAgdmFyIGlkID0gMDtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKytpZDtcbiAgfTtcbn0pKCk7XG5cbnZhciB6ZXJvUG9zQ2FjaGUgPSB7fTtcbnZhciBnZXRPcmlnaW4gPSBmdW5jdGlvbiBnZXRPcmlnaW4oKSB7XG4gIC8vIGdldEJvdW5kaW5nQ2xpZW50UmVjdCBpcyB1bmZvcnR1bmF0ZWx5IHRvbyBhY2N1cmF0ZS4gIEl0IGludHJvZHVjZXMgYSBwaXhlbCBvciB0d28gb2ZcbiAgLy8gaml0dGVyIGFzIHRoZSB1c2VyIHNjcm9sbHMgdGhhdCBtZXNzZXMgd2l0aCBvdXIgYWJpbGl0eSB0byBkZXRlY3QgaWYgdHdvIHBvc2l0aW9uc1xuICAvLyBhcmUgZXF1aXZpbGFudCBvciBub3QuICBXZSBwbGFjZSBhbiBlbGVtZW50IGF0IHRoZSB0b3AgbGVmdCBvZiB0aGUgcGFnZSB0aGF0IHdpbGxcbiAgLy8gZ2V0IHRoZSBzYW1lIGppdHRlciwgc28gd2UgY2FuIGNhbmNlbCB0aGUgdHdvIG91dC5cbiAgdmFyIG5vZGUgPSB6ZXJvRWxlbWVudDtcbiAgaWYgKCFub2RlKSB7XG4gICAgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIG5vZGUuc2V0QXR0cmlidXRlKCdkYXRhLXRldGhlci1pZCcsIHVuaXF1ZUlkKCkpO1xuICAgIGV4dGVuZChub2RlLnN0eWxlLCB7XG4gICAgICB0b3A6IDAsXG4gICAgICBsZWZ0OiAwLFxuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZSdcbiAgICB9KTtcblxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobm9kZSk7XG5cbiAgICB6ZXJvRWxlbWVudCA9IG5vZGU7XG4gIH1cblxuICB2YXIgaWQgPSBub2RlLmdldEF0dHJpYnV0ZSgnZGF0YS10ZXRoZXItaWQnKTtcbiAgaWYgKHR5cGVvZiB6ZXJvUG9zQ2FjaGVbaWRdID09PSAndW5kZWZpbmVkJykge1xuICAgIHplcm9Qb3NDYWNoZVtpZF0gPSBnZXRBY3R1YWxCb3VuZGluZ0NsaWVudFJlY3Qobm9kZSk7XG5cbiAgICAvLyBDbGVhciB0aGUgY2FjaGUgd2hlbiB0aGlzIHBvc2l0aW9uIGNhbGwgaXMgZG9uZVxuICAgIGRlZmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgIGRlbGV0ZSB6ZXJvUG9zQ2FjaGVbaWRdO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHplcm9Qb3NDYWNoZVtpZF07XG59O1xuXG5mdW5jdGlvbiByZW1vdmVVdGlsRWxlbWVudHMoKSB7XG4gIGlmICh6ZXJvRWxlbWVudCkge1xuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoemVyb0VsZW1lbnQpO1xuICB9XG4gIHplcm9FbGVtZW50ID0gbnVsbDtcbn07XG5cbmZ1bmN0aW9uIGdldEJvdW5kcyhlbCkge1xuICB2YXIgZG9jID0gdW5kZWZpbmVkO1xuICBpZiAoZWwgPT09IGRvY3VtZW50KSB7XG4gICAgZG9jID0gZG9jdW1lbnQ7XG4gICAgZWwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gIH0gZWxzZSB7XG4gICAgZG9jID0gZWwub3duZXJEb2N1bWVudDtcbiAgfVxuXG4gIHZhciBkb2NFbCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cbiAgdmFyIGJveCA9IGdldEFjdHVhbEJvdW5kaW5nQ2xpZW50UmVjdChlbCk7XG5cbiAgdmFyIG9yaWdpbiA9IGdldE9yaWdpbigpO1xuXG4gIGJveC50b3AgLT0gb3JpZ2luLnRvcDtcbiAgYm94LmxlZnQgLT0gb3JpZ2luLmxlZnQ7XG5cbiAgaWYgKHR5cGVvZiBib3gud2lkdGggPT09ICd1bmRlZmluZWQnKSB7XG4gICAgYm94LndpZHRoID0gZG9jdW1lbnQuYm9keS5zY3JvbGxXaWR0aCAtIGJveC5sZWZ0IC0gYm94LnJpZ2h0O1xuICB9XG4gIGlmICh0eXBlb2YgYm94LmhlaWdodCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBib3guaGVpZ2h0ID0gZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQgLSBib3gudG9wIC0gYm94LmJvdHRvbTtcbiAgfVxuXG4gIGJveC50b3AgPSBib3gudG9wIC0gZG9jRWwuY2xpZW50VG9wO1xuICBib3gubGVmdCA9IGJveC5sZWZ0IC0gZG9jRWwuY2xpZW50TGVmdDtcbiAgYm94LnJpZ2h0ID0gZG9jLmJvZHkuY2xpZW50V2lkdGggLSBib3gud2lkdGggLSBib3gubGVmdDtcbiAgYm94LmJvdHRvbSA9IGRvYy5ib2R5LmNsaWVudEhlaWdodCAtIGJveC5oZWlnaHQgLSBib3gudG9wO1xuXG4gIHJldHVybiBib3g7XG59XG5cbmZ1bmN0aW9uIGdldE9mZnNldFBhcmVudChlbCkge1xuICByZXR1cm4gZWwub2Zmc2V0UGFyZW50IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbn1cblxuZnVuY3Rpb24gZ2V0U2Nyb2xsQmFyU2l6ZSgpIHtcbiAgdmFyIGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGlubmVyLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICBpbm5lci5zdHlsZS5oZWlnaHQgPSAnMjAwcHgnO1xuXG4gIHZhciBvdXRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBleHRlbmQob3V0ZXIuc3R5bGUsIHtcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICB0b3A6IDAsXG4gICAgbGVmdDogMCxcbiAgICBwb2ludGVyRXZlbnRzOiAnbm9uZScsXG4gICAgdmlzaWJpbGl0eTogJ2hpZGRlbicsXG4gICAgd2lkdGg6ICcyMDBweCcsXG4gICAgaGVpZ2h0OiAnMTUwcHgnLFxuICAgIG92ZXJmbG93OiAnaGlkZGVuJ1xuICB9KTtcblxuICBvdXRlci5hcHBlbmRDaGlsZChpbm5lcik7XG5cbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdXRlcik7XG5cbiAgdmFyIHdpZHRoQ29udGFpbmVkID0gaW5uZXIub2Zmc2V0V2lkdGg7XG4gIG91dGVyLnN0eWxlLm92ZXJmbG93ID0gJ3Njcm9sbCc7XG4gIHZhciB3aWR0aFNjcm9sbCA9IGlubmVyLm9mZnNldFdpZHRoO1xuXG4gIGlmICh3aWR0aENvbnRhaW5lZCA9PT0gd2lkdGhTY3JvbGwpIHtcbiAgICB3aWR0aFNjcm9sbCA9IG91dGVyLmNsaWVudFdpZHRoO1xuICB9XG5cbiAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChvdXRlcik7XG5cbiAgdmFyIHdpZHRoID0gd2lkdGhDb250YWluZWQgLSB3aWR0aFNjcm9sbDtcblxuICByZXR1cm4geyB3aWR0aDogd2lkdGgsIGhlaWdodDogd2lkdGggfTtcbn1cblxuZnVuY3Rpb24gZXh0ZW5kKCkge1xuICB2YXIgb3V0ID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMF07XG5cbiAgdmFyIGFyZ3MgPSBbXTtcblxuICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShhcmdzLCBhcmd1bWVudHMpO1xuXG4gIGFyZ3Muc2xpY2UoMSkuZm9yRWFjaChmdW5jdGlvbiAob2JqKSB7XG4gICAgaWYgKG9iaikge1xuICAgICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgICBpZiAoKHt9KS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgICAgIG91dFtrZXldID0gb2JqW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBvdXQ7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsLCBuYW1lKSB7XG4gIGlmICh0eXBlb2YgZWwuY2xhc3NMaXN0ICE9PSAndW5kZWZpbmVkJykge1xuICAgIG5hbWUuc3BsaXQoJyAnKS5mb3JFYWNoKGZ1bmN0aW9uIChjbHMpIHtcbiAgICAgIGlmIChjbHMudHJpbSgpKSB7XG4gICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKCcoXnwgKScgKyBuYW1lLnNwbGl0KCcgJykuam9pbignfCcpICsgJyggfCQpJywgJ2dpJyk7XG4gICAgdmFyIGNsYXNzTmFtZSA9IGdldENsYXNzTmFtZShlbCkucmVwbGFjZShyZWdleCwgJyAnKTtcbiAgICBzZXRDbGFzc05hbWUoZWwsIGNsYXNzTmFtZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gYWRkQ2xhc3MoZWwsIG5hbWUpIHtcbiAgaWYgKHR5cGVvZiBlbC5jbGFzc0xpc3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbmFtZS5zcGxpdCgnICcpLmZvckVhY2goZnVuY3Rpb24gKGNscykge1xuICAgICAgaWYgKGNscy50cmltKCkpIHtcbiAgICAgICAgZWwuY2xhc3NMaXN0LmFkZChjbHMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHJlbW92ZUNsYXNzKGVsLCBuYW1lKTtcbiAgICB2YXIgY2xzID0gZ2V0Q2xhc3NOYW1lKGVsKSArICgnICcgKyBuYW1lKTtcbiAgICBzZXRDbGFzc05hbWUoZWwsIGNscyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFzQ2xhc3MoZWwsIG5hbWUpIHtcbiAgaWYgKHR5cGVvZiBlbC5jbGFzc0xpc3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIGVsLmNsYXNzTGlzdC5jb250YWlucyhuYW1lKTtcbiAgfVxuICB2YXIgY2xhc3NOYW1lID0gZ2V0Q2xhc3NOYW1lKGVsKTtcbiAgcmV0dXJuIG5ldyBSZWdFeHAoJyhefCApJyArIG5hbWUgKyAnKCB8JCknLCAnZ2knKS50ZXN0KGNsYXNzTmFtZSk7XG59XG5cbmZ1bmN0aW9uIGdldENsYXNzTmFtZShlbCkge1xuICAvLyBDYW4ndCB1c2UganVzdCBTVkdBbmltYXRlZFN0cmluZyBoZXJlIHNpbmNlIG5vZGVzIHdpdGhpbiBhIEZyYW1lIGluIElFIGhhdmVcbiAgLy8gY29tcGxldGVseSBzZXBhcmF0ZWx5IFNWR0FuaW1hdGVkU3RyaW5nIGJhc2UgY2xhc3Nlc1xuICBpZiAoZWwuY2xhc3NOYW1lIGluc3RhbmNlb2YgZWwub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5TVkdBbmltYXRlZFN0cmluZykge1xuICAgIHJldHVybiBlbC5jbGFzc05hbWUuYmFzZVZhbDtcbiAgfVxuICByZXR1cm4gZWwuY2xhc3NOYW1lO1xufVxuXG5mdW5jdGlvbiBzZXRDbGFzc05hbWUoZWwsIGNsYXNzTmFtZSkge1xuICBlbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgY2xhc3NOYW1lKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlQ2xhc3NlcyhlbCwgYWRkLCBhbGwpIHtcbiAgLy8gT2YgdGhlIHNldCBvZiAnYWxsJyBjbGFzc2VzLCB3ZSBuZWVkIHRoZSAnYWRkJyBjbGFzc2VzLCBhbmQgb25seSB0aGVcbiAgLy8gJ2FkZCcgY2xhc3NlcyB0byBiZSBzZXQuXG4gIGFsbC5mb3JFYWNoKGZ1bmN0aW9uIChjbHMpIHtcbiAgICBpZiAoYWRkLmluZGV4T2YoY2xzKSA9PT0gLTEgJiYgaGFzQ2xhc3MoZWwsIGNscykpIHtcbiAgICAgIHJlbW92ZUNsYXNzKGVsLCBjbHMpO1xuICAgIH1cbiAgfSk7XG5cbiAgYWRkLmZvckVhY2goZnVuY3Rpb24gKGNscykge1xuICAgIGlmICghaGFzQ2xhc3MoZWwsIGNscykpIHtcbiAgICAgIGFkZENsYXNzKGVsLCBjbHMpO1xuICAgIH1cbiAgfSk7XG59XG5cbnZhciBkZWZlcnJlZCA9IFtdO1xuXG52YXIgZGVmZXIgPSBmdW5jdGlvbiBkZWZlcihmbikge1xuICBkZWZlcnJlZC5wdXNoKGZuKTtcbn07XG5cbnZhciBmbHVzaCA9IGZ1bmN0aW9uIGZsdXNoKCkge1xuICB2YXIgZm4gPSB1bmRlZmluZWQ7XG4gIHdoaWxlIChmbiA9IGRlZmVycmVkLnBvcCgpKSB7XG4gICAgZm4oKTtcbiAgfVxufTtcblxudmFyIEV2ZW50ZWQgPSAoZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBFdmVudGVkKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFdmVudGVkKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhFdmVudGVkLCBbe1xuICAgIGtleTogJ29uJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb24oZXZlbnQsIGhhbmRsZXIsIGN0eCkge1xuICAgICAgdmFyIG9uY2UgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDMgfHwgYXJndW1lbnRzWzNdID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IGFyZ3VtZW50c1szXTtcblxuICAgICAgaWYgKHR5cGVvZiB0aGlzLmJpbmRpbmdzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aGlzLmJpbmRpbmdzID0ge307XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHRoaXMuYmluZGluZ3NbZXZlbnRdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aGlzLmJpbmRpbmdzW2V2ZW50XSA9IFtdO1xuICAgICAgfVxuICAgICAgdGhpcy5iaW5kaW5nc1tldmVudF0ucHVzaCh7IGhhbmRsZXI6IGhhbmRsZXIsIGN0eDogY3R4LCBvbmNlOiBvbmNlIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ29uY2UnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbmNlKGV2ZW50LCBoYW5kbGVyLCBjdHgpIHtcbiAgICAgIHRoaXMub24oZXZlbnQsIGhhbmRsZXIsIGN0eCwgdHJ1ZSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb2ZmJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb2ZmKGV2ZW50LCBoYW5kbGVyKSB7XG4gICAgICBpZiAodHlwZW9mIHRoaXMuYmluZGluZ3MgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiB0aGlzLmJpbmRpbmdzW2V2ZW50XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGhhbmRsZXIgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmJpbmRpbmdzW2V2ZW50XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCB0aGlzLmJpbmRpbmdzW2V2ZW50XS5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAodGhpcy5iaW5kaW5nc1tldmVudF1baV0uaGFuZGxlciA9PT0gaGFuZGxlcikge1xuICAgICAgICAgICAgdGhpcy5iaW5kaW5nc1tldmVudF0uc3BsaWNlKGksIDEpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICArK2k7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAndHJpZ2dlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHRyaWdnZXIoZXZlbnQpIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5iaW5kaW5ncyAhPT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy5iaW5kaW5nc1tldmVudF0pIHtcbiAgICAgICAgdmFyIGkgPSAwO1xuXG4gICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgd2hpbGUgKGkgPCB0aGlzLmJpbmRpbmdzW2V2ZW50XS5sZW5ndGgpIHtcbiAgICAgICAgICB2YXIgX2JpbmRpbmdzJGV2ZW50JGkgPSB0aGlzLmJpbmRpbmdzW2V2ZW50XVtpXTtcbiAgICAgICAgICB2YXIgaGFuZGxlciA9IF9iaW5kaW5ncyRldmVudCRpLmhhbmRsZXI7XG4gICAgICAgICAgdmFyIGN0eCA9IF9iaW5kaW5ncyRldmVudCRpLmN0eDtcbiAgICAgICAgICB2YXIgb25jZSA9IF9iaW5kaW5ncyRldmVudCRpLm9uY2U7XG5cbiAgICAgICAgICB2YXIgY29udGV4dCA9IGN0eDtcbiAgICAgICAgICBpZiAodHlwZW9mIGNvbnRleHQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBjb250ZXh0ID0gdGhpcztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBoYW5kbGVyLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuXG4gICAgICAgICAgaWYgKG9uY2UpIHtcbiAgICAgICAgICAgIHRoaXMuYmluZGluZ3NbZXZlbnRdLnNwbGljZShpLCAxKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgKytpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBFdmVudGVkO1xufSkoKTtcblxuVGV0aGVyQmFzZS5VdGlscyA9IHtcbiAgZ2V0QWN0dWFsQm91bmRpbmdDbGllbnRSZWN0OiBnZXRBY3R1YWxCb3VuZGluZ0NsaWVudFJlY3QsXG4gIGdldFNjcm9sbFBhcmVudHM6IGdldFNjcm9sbFBhcmVudHMsXG4gIGdldEJvdW5kczogZ2V0Qm91bmRzLFxuICBnZXRPZmZzZXRQYXJlbnQ6IGdldE9mZnNldFBhcmVudCxcbiAgZXh0ZW5kOiBleHRlbmQsXG4gIGFkZENsYXNzOiBhZGRDbGFzcyxcbiAgcmVtb3ZlQ2xhc3M6IHJlbW92ZUNsYXNzLFxuICBoYXNDbGFzczogaGFzQ2xhc3MsXG4gIHVwZGF0ZUNsYXNzZXM6IHVwZGF0ZUNsYXNzZXMsXG4gIGRlZmVyOiBkZWZlcixcbiAgZmx1c2g6IGZsdXNoLFxuICB1bmlxdWVJZDogdW5pcXVlSWQsXG4gIEV2ZW50ZWQ6IEV2ZW50ZWQsXG4gIGdldFNjcm9sbEJhclNpemU6IGdldFNjcm9sbEJhclNpemUsXG4gIHJlbW92ZVV0aWxFbGVtZW50czogcmVtb3ZlVXRpbEVsZW1lbnRzXG59O1xuLyogZ2xvYmFscyBUZXRoZXJCYXNlLCBwZXJmb3JtYW5jZSAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBfc2xpY2VkVG9BcnJheSA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIHNsaWNlSXRlcmF0b3IoYXJyLCBpKSB7IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pWydyZXR1cm4nXSkgX2lbJ3JldHVybiddKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfSByZXR1cm4gZnVuY3Rpb24gKGFyciwgaSkgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IHJldHVybiBhcnI7IH0gZWxzZSBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSB7IHJldHVybiBzbGljZUl0ZXJhdG9yKGFyciwgaSk7IH0gZWxzZSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UnKTsgfSB9OyB9KSgpO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgndmFsdWUnIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXG52YXIgX2dldCA9IGZ1bmN0aW9uIGdldChfeDYsIF94NywgX3g4KSB7IHZhciBfYWdhaW4gPSB0cnVlOyBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHsgdmFyIG9iamVjdCA9IF94NiwgcHJvcGVydHkgPSBfeDcsIHJlY2VpdmVyID0gX3g4OyBfYWdhaW4gPSBmYWxzZTsgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IF94NiA9IHBhcmVudDsgX3g3ID0gcHJvcGVydHk7IF94OCA9IHJlY2VpdmVyOyBfYWdhaW4gPSB0cnVlOyBkZXNjID0gcGFyZW50ID0gdW5kZWZpbmVkOyBjb250aW51ZSBfZnVuY3Rpb247IH0gfSBlbHNlIGlmICgndmFsdWUnIGluIGRlc2MpIHsgcmV0dXJuIGRlc2MudmFsdWU7IH0gZWxzZSB7IHZhciBnZXR0ZXIgPSBkZXNjLmdldDsgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsgfSB9IH07XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAnZnVuY3Rpb24nICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAnICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG5pZiAodHlwZW9mIFRldGhlckJhc2UgPT09ICd1bmRlZmluZWQnKSB7XG4gIHRocm93IG5ldyBFcnJvcignWW91IG11c3QgaW5jbHVkZSB0aGUgdXRpbHMuanMgZmlsZSBiZWZvcmUgdGV0aGVyLmpzJyk7XG59XG5cbnZhciBfVGV0aGVyQmFzZSRVdGlscyA9IFRldGhlckJhc2UuVXRpbHM7XG52YXIgZ2V0U2Nyb2xsUGFyZW50cyA9IF9UZXRoZXJCYXNlJFV0aWxzLmdldFNjcm9sbFBhcmVudHM7XG52YXIgZ2V0Qm91bmRzID0gX1RldGhlckJhc2UkVXRpbHMuZ2V0Qm91bmRzO1xudmFyIGdldE9mZnNldFBhcmVudCA9IF9UZXRoZXJCYXNlJFV0aWxzLmdldE9mZnNldFBhcmVudDtcbnZhciBleHRlbmQgPSBfVGV0aGVyQmFzZSRVdGlscy5leHRlbmQ7XG52YXIgYWRkQ2xhc3MgPSBfVGV0aGVyQmFzZSRVdGlscy5hZGRDbGFzcztcbnZhciByZW1vdmVDbGFzcyA9IF9UZXRoZXJCYXNlJFV0aWxzLnJlbW92ZUNsYXNzO1xudmFyIHVwZGF0ZUNsYXNzZXMgPSBfVGV0aGVyQmFzZSRVdGlscy51cGRhdGVDbGFzc2VzO1xudmFyIGRlZmVyID0gX1RldGhlckJhc2UkVXRpbHMuZGVmZXI7XG52YXIgZmx1c2ggPSBfVGV0aGVyQmFzZSRVdGlscy5mbHVzaDtcbnZhciBnZXRTY3JvbGxCYXJTaXplID0gX1RldGhlckJhc2UkVXRpbHMuZ2V0U2Nyb2xsQmFyU2l6ZTtcbnZhciByZW1vdmVVdGlsRWxlbWVudHMgPSBfVGV0aGVyQmFzZSRVdGlscy5yZW1vdmVVdGlsRWxlbWVudHM7XG5cbmZ1bmN0aW9uIHdpdGhpbihhLCBiKSB7XG4gIHZhciBkaWZmID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8gMSA6IGFyZ3VtZW50c1syXTtcblxuICByZXR1cm4gYSArIGRpZmYgPj0gYiAmJiBiID49IGEgLSBkaWZmO1xufVxuXG52YXIgdHJhbnNmb3JtS2V5ID0gKGZ1bmN0aW9uICgpIHtcbiAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgdmFyIHRyYW5zZm9ybXMgPSBbJ3RyYW5zZm9ybScsICdXZWJraXRUcmFuc2Zvcm0nLCAnT1RyYW5zZm9ybScsICdNb3pUcmFuc2Zvcm0nLCAnbXNUcmFuc2Zvcm0nXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmFuc2Zvcm1zLmxlbmd0aDsgKytpKSB7XG4gICAgdmFyIGtleSA9IHRyYW5zZm9ybXNbaV07XG4gICAgaWYgKGVsLnN0eWxlW2tleV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGtleTtcbiAgICB9XG4gIH1cbn0pKCk7XG5cbnZhciB0ZXRoZXJzID0gW107XG5cbnZhciBwb3NpdGlvbiA9IGZ1bmN0aW9uIHBvc2l0aW9uKCkge1xuICB0ZXRoZXJzLmZvckVhY2goZnVuY3Rpb24gKHRldGhlcikge1xuICAgIHRldGhlci5wb3NpdGlvbihmYWxzZSk7XG4gIH0pO1xuICBmbHVzaCgpO1xufTtcblxuZnVuY3Rpb24gbm93KCkge1xuICBpZiAodHlwZW9mIHBlcmZvcm1hbmNlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgcGVyZm9ybWFuY2Uubm93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBwZXJmb3JtYW5jZS5ub3coKTtcbiAgfVxuICByZXR1cm4gK25ldyBEYXRlKCk7XG59XG5cbihmdW5jdGlvbiAoKSB7XG4gIHZhciBsYXN0Q2FsbCA9IG51bGw7XG4gIHZhciBsYXN0RHVyYXRpb24gPSBudWxsO1xuICB2YXIgcGVuZGluZ1RpbWVvdXQgPSBudWxsO1xuXG4gIHZhciB0aWNrID0gZnVuY3Rpb24gdGljaygpIHtcbiAgICBpZiAodHlwZW9mIGxhc3REdXJhdGlvbiAhPT0gJ3VuZGVmaW5lZCcgJiYgbGFzdER1cmF0aW9uID4gMTYpIHtcbiAgICAgIC8vIFdlIHZvbHVudGFyaWx5IHRocm90dGxlIG91cnNlbHZlcyBpZiB3ZSBjYW4ndCBtYW5hZ2UgNjBmcHNcbiAgICAgIGxhc3REdXJhdGlvbiA9IE1hdGgubWluKGxhc3REdXJhdGlvbiAtIDE2LCAyNTApO1xuXG4gICAgICAvLyBKdXN0IGluIGNhc2UgdGhpcyBpcyB0aGUgbGFzdCBldmVudCwgcmVtZW1iZXIgdG8gcG9zaXRpb24ganVzdCBvbmNlIG1vcmVcbiAgICAgIHBlbmRpbmdUaW1lb3V0ID0gc2V0VGltZW91dCh0aWNrLCAyNTApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgbGFzdENhbGwgIT09ICd1bmRlZmluZWQnICYmIG5vdygpIC0gbGFzdENhbGwgPCAxMCkge1xuICAgICAgLy8gU29tZSBicm93c2VycyBjYWxsIGV2ZW50cyBhIGxpdHRsZSB0b28gZnJlcXVlbnRseSwgcmVmdXNlIHRvIHJ1biBtb3JlIHRoYW4gaXMgcmVhc29uYWJsZVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChwZW5kaW5nVGltZW91dCAhPSBudWxsKSB7XG4gICAgICBjbGVhclRpbWVvdXQocGVuZGluZ1RpbWVvdXQpO1xuICAgICAgcGVuZGluZ1RpbWVvdXQgPSBudWxsO1xuICAgIH1cblxuICAgIGxhc3RDYWxsID0gbm93KCk7XG4gICAgcG9zaXRpb24oKTtcbiAgICBsYXN0RHVyYXRpb24gPSBub3coKSAtIGxhc3RDYWxsO1xuICB9O1xuXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgWydyZXNpemUnLCAnc2Nyb2xsJywgJ3RvdWNobW92ZSddLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgdGljayk7XG4gICAgfSk7XG4gIH1cbn0pKCk7XG5cbnZhciBNSVJST1JfTFIgPSB7XG4gIGNlbnRlcjogJ2NlbnRlcicsXG4gIGxlZnQ6ICdyaWdodCcsXG4gIHJpZ2h0OiAnbGVmdCdcbn07XG5cbnZhciBNSVJST1JfVEIgPSB7XG4gIG1pZGRsZTogJ21pZGRsZScsXG4gIHRvcDogJ2JvdHRvbScsXG4gIGJvdHRvbTogJ3RvcCdcbn07XG5cbnZhciBPRkZTRVRfTUFQID0ge1xuICB0b3A6IDAsXG4gIGxlZnQ6IDAsXG4gIG1pZGRsZTogJzUwJScsXG4gIGNlbnRlcjogJzUwJScsXG4gIGJvdHRvbTogJzEwMCUnLFxuICByaWdodDogJzEwMCUnXG59O1xuXG52YXIgYXV0b1RvRml4ZWRBdHRhY2htZW50ID0gZnVuY3Rpb24gYXV0b1RvRml4ZWRBdHRhY2htZW50KGF0dGFjaG1lbnQsIHJlbGF0aXZlVG9BdHRhY2htZW50KSB7XG4gIHZhciBsZWZ0ID0gYXR0YWNobWVudC5sZWZ0O1xuICB2YXIgdG9wID0gYXR0YWNobWVudC50b3A7XG5cbiAgaWYgKGxlZnQgPT09ICdhdXRvJykge1xuICAgIGxlZnQgPSBNSVJST1JfTFJbcmVsYXRpdmVUb0F0dGFjaG1lbnQubGVmdF07XG4gIH1cblxuICBpZiAodG9wID09PSAnYXV0bycpIHtcbiAgICB0b3AgPSBNSVJST1JfVEJbcmVsYXRpdmVUb0F0dGFjaG1lbnQudG9wXTtcbiAgfVxuXG4gIHJldHVybiB7IGxlZnQ6IGxlZnQsIHRvcDogdG9wIH07XG59O1xuXG52YXIgYXR0YWNobWVudFRvT2Zmc2V0ID0gZnVuY3Rpb24gYXR0YWNobWVudFRvT2Zmc2V0KGF0dGFjaG1lbnQpIHtcbiAgdmFyIGxlZnQgPSBhdHRhY2htZW50LmxlZnQ7XG4gIHZhciB0b3AgPSBhdHRhY2htZW50LnRvcDtcblxuICBpZiAodHlwZW9mIE9GRlNFVF9NQVBbYXR0YWNobWVudC5sZWZ0XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBsZWZ0ID0gT0ZGU0VUX01BUFthdHRhY2htZW50LmxlZnRdO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBPRkZTRVRfTUFQW2F0dGFjaG1lbnQudG9wXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB0b3AgPSBPRkZTRVRfTUFQW2F0dGFjaG1lbnQudG9wXTtcbiAgfVxuXG4gIHJldHVybiB7IGxlZnQ6IGxlZnQsIHRvcDogdG9wIH07XG59O1xuXG5mdW5jdGlvbiBhZGRPZmZzZXQoKSB7XG4gIHZhciBvdXQgPSB7IHRvcDogMCwgbGVmdDogMCB9O1xuXG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBvZmZzZXRzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgb2Zmc2V0c1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIG9mZnNldHMuZm9yRWFjaChmdW5jdGlvbiAoX3JlZikge1xuICAgIHZhciB0b3AgPSBfcmVmLnRvcDtcbiAgICB2YXIgbGVmdCA9IF9yZWYubGVmdDtcblxuICAgIGlmICh0eXBlb2YgdG9wID09PSAnc3RyaW5nJykge1xuICAgICAgdG9wID0gcGFyc2VGbG9hdCh0b3AsIDEwKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBsZWZ0ID09PSAnc3RyaW5nJykge1xuICAgICAgbGVmdCA9IHBhcnNlRmxvYXQobGVmdCwgMTApO1xuICAgIH1cblxuICAgIG91dC50b3AgKz0gdG9wO1xuICAgIG91dC5sZWZ0ICs9IGxlZnQ7XG4gIH0pO1xuXG4gIHJldHVybiBvdXQ7XG59XG5cbmZ1bmN0aW9uIG9mZnNldFRvUHgob2Zmc2V0LCBzaXplKSB7XG4gIGlmICh0eXBlb2Ygb2Zmc2V0LmxlZnQgPT09ICdzdHJpbmcnICYmIG9mZnNldC5sZWZ0LmluZGV4T2YoJyUnKSAhPT0gLTEpIHtcbiAgICBvZmZzZXQubGVmdCA9IHBhcnNlRmxvYXQob2Zmc2V0LmxlZnQsIDEwKSAvIDEwMCAqIHNpemUud2lkdGg7XG4gIH1cbiAgaWYgKHR5cGVvZiBvZmZzZXQudG9wID09PSAnc3RyaW5nJyAmJiBvZmZzZXQudG9wLmluZGV4T2YoJyUnKSAhPT0gLTEpIHtcbiAgICBvZmZzZXQudG9wID0gcGFyc2VGbG9hdChvZmZzZXQudG9wLCAxMCkgLyAxMDAgKiBzaXplLmhlaWdodDtcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQ7XG59XG5cbnZhciBwYXJzZU9mZnNldCA9IGZ1bmN0aW9uIHBhcnNlT2Zmc2V0KHZhbHVlKSB7XG4gIHZhciBfdmFsdWUkc3BsaXQgPSB2YWx1ZS5zcGxpdCgnICcpO1xuXG4gIHZhciBfdmFsdWUkc3BsaXQyID0gX3NsaWNlZFRvQXJyYXkoX3ZhbHVlJHNwbGl0LCAyKTtcblxuICB2YXIgdG9wID0gX3ZhbHVlJHNwbGl0MlswXTtcbiAgdmFyIGxlZnQgPSBfdmFsdWUkc3BsaXQyWzFdO1xuXG4gIHJldHVybiB7IHRvcDogdG9wLCBsZWZ0OiBsZWZ0IH07XG59O1xudmFyIHBhcnNlQXR0YWNobWVudCA9IHBhcnNlT2Zmc2V0O1xuXG52YXIgVGV0aGVyQ2xhc3MgPSAoZnVuY3Rpb24gKF9FdmVudGVkKSB7XG4gIF9pbmhlcml0cyhUZXRoZXJDbGFzcywgX0V2ZW50ZWQpO1xuXG4gIGZ1bmN0aW9uIFRldGhlckNsYXNzKG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRldGhlckNsYXNzKTtcblxuICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKFRldGhlckNsYXNzLnByb3RvdHlwZSksICdjb25zdHJ1Y3RvcicsIHRoaXMpLmNhbGwodGhpcyk7XG4gICAgdGhpcy5wb3NpdGlvbiA9IHRoaXMucG9zaXRpb24uYmluZCh0aGlzKTtcblxuICAgIHRldGhlcnMucHVzaCh0aGlzKTtcblxuICAgIHRoaXMuaGlzdG9yeSA9IFtdO1xuXG4gICAgdGhpcy5zZXRPcHRpb25zKG9wdGlvbnMsIGZhbHNlKTtcblxuICAgIFRldGhlckJhc2UubW9kdWxlcy5mb3JFYWNoKGZ1bmN0aW9uIChtb2R1bGUpIHtcbiAgICAgIGlmICh0eXBlb2YgbW9kdWxlLmluaXRpYWxpemUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIG1vZHVsZS5pbml0aWFsaXplLmNhbGwoX3RoaXMpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5wb3NpdGlvbigpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFRldGhlckNsYXNzLCBbe1xuICAgIGtleTogJ2dldENsYXNzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q2xhc3MoKSB7XG4gICAgICB2YXIga2V5ID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gJycgOiBhcmd1bWVudHNbMF07XG4gICAgICB2YXIgY2xhc3NlcyA9IHRoaXMub3B0aW9ucy5jbGFzc2VzO1xuXG4gICAgICBpZiAodHlwZW9mIGNsYXNzZXMgIT09ICd1bmRlZmluZWQnICYmIGNsYXNzZXNba2V5XSkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmNsYXNzZXNba2V5XTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLmNsYXNzUHJlZml4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuY2xhc3NQcmVmaXggKyAnLScgKyBrZXk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3NldE9wdGlvbnMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRPcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICB2YXIgcG9zID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IGFyZ3VtZW50c1sxXTtcblxuICAgICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgICBvZmZzZXQ6ICcwIDAnLFxuICAgICAgICB0YXJnZXRPZmZzZXQ6ICcwIDAnLFxuICAgICAgICB0YXJnZXRBdHRhY2htZW50OiAnYXV0byBhdXRvJyxcbiAgICAgICAgY2xhc3NQcmVmaXg6ICd0ZXRoZXInXG4gICAgICB9O1xuXG4gICAgICB0aGlzLm9wdGlvbnMgPSBleHRlbmQoZGVmYXVsdHMsIG9wdGlvbnMpO1xuXG4gICAgICB2YXIgX29wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICB2YXIgZWxlbWVudCA9IF9vcHRpb25zLmVsZW1lbnQ7XG4gICAgICB2YXIgdGFyZ2V0ID0gX29wdGlvbnMudGFyZ2V0O1xuICAgICAgdmFyIHRhcmdldE1vZGlmaWVyID0gX29wdGlvbnMudGFyZ2V0TW9kaWZpZXI7XG5cbiAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgICAgIHRoaXMudGFyZ2V0TW9kaWZpZXIgPSB0YXJnZXRNb2RpZmllcjtcblxuICAgICAgaWYgKHRoaXMudGFyZ2V0ID09PSAndmlld3BvcnQnKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gZG9jdW1lbnQuYm9keTtcbiAgICAgICAgdGhpcy50YXJnZXRNb2RpZmllciA9ICd2aXNpYmxlJztcbiAgICAgIH0gZWxzZSBpZiAodGhpcy50YXJnZXQgPT09ICdzY3JvbGwtaGFuZGxlJykge1xuICAgICAgICB0aGlzLnRhcmdldCA9IGRvY3VtZW50LmJvZHk7XG4gICAgICAgIHRoaXMudGFyZ2V0TW9kaWZpZXIgPSAnc2Nyb2xsLWhhbmRsZSc7XG4gICAgICB9XG5cbiAgICAgIFsnZWxlbWVudCcsICd0YXJnZXQnXS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBfdGhpczJba2V5XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RldGhlciBFcnJvcjogQm90aCBlbGVtZW50IGFuZCB0YXJnZXQgbXVzdCBiZSBkZWZpbmVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIF90aGlzMltrZXldLmpxdWVyeSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBfdGhpczJba2V5XSA9IF90aGlzMltrZXldWzBdO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBfdGhpczJba2V5XSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBfdGhpczJba2V5XSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoX3RoaXMyW2tleV0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgYWRkQ2xhc3ModGhpcy5lbGVtZW50LCB0aGlzLmdldENsYXNzKCdlbGVtZW50JykpO1xuICAgICAgaWYgKCEodGhpcy5vcHRpb25zLmFkZFRhcmdldENsYXNzZXMgPT09IGZhbHNlKSkge1xuICAgICAgICBhZGRDbGFzcyh0aGlzLnRhcmdldCwgdGhpcy5nZXRDbGFzcygndGFyZ2V0JykpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMub3B0aW9ucy5hdHRhY2htZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGV0aGVyIEVycm9yOiBZb3UgbXVzdCBwcm92aWRlIGFuIGF0dGFjaG1lbnQnKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy50YXJnZXRBdHRhY2htZW50ID0gcGFyc2VBdHRhY2htZW50KHRoaXMub3B0aW9ucy50YXJnZXRBdHRhY2htZW50KTtcbiAgICAgIHRoaXMuYXR0YWNobWVudCA9IHBhcnNlQXR0YWNobWVudCh0aGlzLm9wdGlvbnMuYXR0YWNobWVudCk7XG4gICAgICB0aGlzLm9mZnNldCA9IHBhcnNlT2Zmc2V0KHRoaXMub3B0aW9ucy5vZmZzZXQpO1xuICAgICAgdGhpcy50YXJnZXRPZmZzZXQgPSBwYXJzZU9mZnNldCh0aGlzLm9wdGlvbnMudGFyZ2V0T2Zmc2V0KTtcblxuICAgICAgaWYgKHR5cGVvZiB0aGlzLnNjcm9sbFBhcmVudHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMuZGlzYWJsZSgpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy50YXJnZXRNb2RpZmllciA9PT0gJ3Njcm9sbC1oYW5kbGUnKSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsUGFyZW50cyA9IFt0aGlzLnRhcmdldF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNjcm9sbFBhcmVudHMgPSBnZXRTY3JvbGxQYXJlbnRzKHRoaXMudGFyZ2V0KTtcbiAgICAgIH1cblxuICAgICAgaWYgKCEodGhpcy5vcHRpb25zLmVuYWJsZWQgPT09IGZhbHNlKSkge1xuICAgICAgICB0aGlzLmVuYWJsZShwb3MpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2dldFRhcmdldEJvdW5kcycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRhcmdldEJvdW5kcygpIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy50YXJnZXRNb2RpZmllciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0TW9kaWZpZXIgPT09ICd2aXNpYmxlJykge1xuICAgICAgICAgIGlmICh0aGlzLnRhcmdldCA9PT0gZG9jdW1lbnQuYm9keSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgdG9wOiBwYWdlWU9mZnNldCwgbGVmdDogcGFnZVhPZmZzZXQsIGhlaWdodDogaW5uZXJIZWlnaHQsIHdpZHRoOiBpbm5lcldpZHRoIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBib3VuZHMgPSBnZXRCb3VuZHModGhpcy50YXJnZXQpO1xuXG4gICAgICAgICAgICB2YXIgb3V0ID0ge1xuICAgICAgICAgICAgICBoZWlnaHQ6IGJvdW5kcy5oZWlnaHQsXG4gICAgICAgICAgICAgIHdpZHRoOiBib3VuZHMud2lkdGgsXG4gICAgICAgICAgICAgIHRvcDogYm91bmRzLnRvcCxcbiAgICAgICAgICAgICAgbGVmdDogYm91bmRzLmxlZnRcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIG91dC5oZWlnaHQgPSBNYXRoLm1pbihvdXQuaGVpZ2h0LCBib3VuZHMuaGVpZ2h0IC0gKHBhZ2VZT2Zmc2V0IC0gYm91bmRzLnRvcCkpO1xuICAgICAgICAgICAgb3V0LmhlaWdodCA9IE1hdGgubWluKG91dC5oZWlnaHQsIGJvdW5kcy5oZWlnaHQgLSAoYm91bmRzLnRvcCArIGJvdW5kcy5oZWlnaHQgLSAocGFnZVlPZmZzZXQgKyBpbm5lckhlaWdodCkpKTtcbiAgICAgICAgICAgIG91dC5oZWlnaHQgPSBNYXRoLm1pbihpbm5lckhlaWdodCwgb3V0LmhlaWdodCk7XG4gICAgICAgICAgICBvdXQuaGVpZ2h0IC09IDI7XG5cbiAgICAgICAgICAgIG91dC53aWR0aCA9IE1hdGgubWluKG91dC53aWR0aCwgYm91bmRzLndpZHRoIC0gKHBhZ2VYT2Zmc2V0IC0gYm91bmRzLmxlZnQpKTtcbiAgICAgICAgICAgIG91dC53aWR0aCA9IE1hdGgubWluKG91dC53aWR0aCwgYm91bmRzLndpZHRoIC0gKGJvdW5kcy5sZWZ0ICsgYm91bmRzLndpZHRoIC0gKHBhZ2VYT2Zmc2V0ICsgaW5uZXJXaWR0aCkpKTtcbiAgICAgICAgICAgIG91dC53aWR0aCA9IE1hdGgubWluKGlubmVyV2lkdGgsIG91dC53aWR0aCk7XG4gICAgICAgICAgICBvdXQud2lkdGggLT0gMjtcblxuICAgICAgICAgICAgaWYgKG91dC50b3AgPCBwYWdlWU9mZnNldCkge1xuICAgICAgICAgICAgICBvdXQudG9wID0gcGFnZVlPZmZzZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3V0LmxlZnQgPCBwYWdlWE9mZnNldCkge1xuICAgICAgICAgICAgICBvdXQubGVmdCA9IHBhZ2VYT2Zmc2V0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRhcmdldE1vZGlmaWVyID09PSAnc2Nyb2xsLWhhbmRsZScpIHtcbiAgICAgICAgICB2YXIgYm91bmRzID0gdW5kZWZpbmVkO1xuICAgICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLnRhcmdldDtcbiAgICAgICAgICBpZiAodGFyZ2V0ID09PSBkb2N1bWVudC5ib2R5KSB7XG4gICAgICAgICAgICB0YXJnZXQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cbiAgICAgICAgICAgIGJvdW5kcyA9IHtcbiAgICAgICAgICAgICAgbGVmdDogcGFnZVhPZmZzZXQsXG4gICAgICAgICAgICAgIHRvcDogcGFnZVlPZmZzZXQsXG4gICAgICAgICAgICAgIGhlaWdodDogaW5uZXJIZWlnaHQsXG4gICAgICAgICAgICAgIHdpZHRoOiBpbm5lcldpZHRoXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBib3VuZHMgPSBnZXRCb3VuZHModGFyZ2V0KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKHRhcmdldCk7XG5cbiAgICAgICAgICB2YXIgaGFzQm90dG9tU2Nyb2xsID0gdGFyZ2V0LnNjcm9sbFdpZHRoID4gdGFyZ2V0LmNsaWVudFdpZHRoIHx8IFtzdHlsZS5vdmVyZmxvdywgc3R5bGUub3ZlcmZsb3dYXS5pbmRleE9mKCdzY3JvbGwnKSA+PSAwIHx8IHRoaXMudGFyZ2V0ICE9PSBkb2N1bWVudC5ib2R5O1xuXG4gICAgICAgICAgdmFyIHNjcm9sbEJvdHRvbSA9IDA7XG4gICAgICAgICAgaWYgKGhhc0JvdHRvbVNjcm9sbCkge1xuICAgICAgICAgICAgc2Nyb2xsQm90dG9tID0gMTU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIGhlaWdodCA9IGJvdW5kcy5oZWlnaHQgLSBwYXJzZUZsb2F0KHN0eWxlLmJvcmRlclRvcFdpZHRoKSAtIHBhcnNlRmxvYXQoc3R5bGUuYm9yZGVyQm90dG9tV2lkdGgpIC0gc2Nyb2xsQm90dG9tO1xuXG4gICAgICAgICAgdmFyIG91dCA9IHtcbiAgICAgICAgICAgIHdpZHRoOiAxNSxcbiAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0ICogMC45NzUgKiAoaGVpZ2h0IC8gdGFyZ2V0LnNjcm9sbEhlaWdodCksXG4gICAgICAgICAgICBsZWZ0OiBib3VuZHMubGVmdCArIGJvdW5kcy53aWR0aCAtIHBhcnNlRmxvYXQoc3R5bGUuYm9yZGVyTGVmdFdpZHRoKSAtIDE1XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBmaXRBZGogPSAwO1xuICAgICAgICAgIGlmIChoZWlnaHQgPCA0MDggJiYgdGhpcy50YXJnZXQgPT09IGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgICAgIGZpdEFkaiA9IC0wLjAwMDExICogTWF0aC5wb3coaGVpZ2h0LCAyKSAtIDAuMDA3MjcgKiBoZWlnaHQgKyAyMi41ODtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodGhpcy50YXJnZXQgIT09IGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgICAgIG91dC5oZWlnaHQgPSBNYXRoLm1heChvdXQuaGVpZ2h0LCAyNCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIHNjcm9sbFBlcmNlbnRhZ2UgPSB0aGlzLnRhcmdldC5zY3JvbGxUb3AgLyAodGFyZ2V0LnNjcm9sbEhlaWdodCAtIGhlaWdodCk7XG4gICAgICAgICAgb3V0LnRvcCA9IHNjcm9sbFBlcmNlbnRhZ2UgKiAoaGVpZ2h0IC0gb3V0LmhlaWdodCAtIGZpdEFkaikgKyBib3VuZHMudG9wICsgcGFyc2VGbG9hdChzdHlsZS5ib3JkZXJUb3BXaWR0aCk7XG5cbiAgICAgICAgICBpZiAodGhpcy50YXJnZXQgPT09IGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgICAgIG91dC5oZWlnaHQgPSBNYXRoLm1heChvdXQuaGVpZ2h0LCAyNCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGdldEJvdW5kcyh0aGlzLnRhcmdldCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY2xlYXJDYWNoZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyQ2FjaGUoKSB7XG4gICAgICB0aGlzLl9jYWNoZSA9IHt9O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NhY2hlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2FjaGUoaywgZ2V0dGVyKSB7XG4gICAgICAvLyBNb3JlIHRoYW4gb25lIG1vZHVsZSB3aWxsIG9mdGVuIG5lZWQgdGhlIHNhbWUgRE9NIGluZm8sIHNvXG4gICAgICAvLyB3ZSBrZWVwIGEgY2FjaGUgd2hpY2ggaXMgY2xlYXJlZCBvbiBlYWNoIHBvc2l0aW9uIGNhbGxcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5fY2FjaGUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMuX2NhY2hlID0ge307XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgdGhpcy5fY2FjaGVba10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMuX2NhY2hlW2tdID0gZ2V0dGVyLmNhbGwodGhpcyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLl9jYWNoZVtrXTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdlbmFibGUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlbmFibGUoKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgdmFyIHBvcyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHRydWUgOiBhcmd1bWVudHNbMF07XG5cbiAgICAgIGlmICghKHRoaXMub3B0aW9ucy5hZGRUYXJnZXRDbGFzc2VzID09PSBmYWxzZSkpIHtcbiAgICAgICAgYWRkQ2xhc3ModGhpcy50YXJnZXQsIHRoaXMuZ2V0Q2xhc3MoJ2VuYWJsZWQnKSk7XG4gICAgICB9XG4gICAgICBhZGRDbGFzcyh0aGlzLmVsZW1lbnQsIHRoaXMuZ2V0Q2xhc3MoJ2VuYWJsZWQnKSk7XG4gICAgICB0aGlzLmVuYWJsZWQgPSB0cnVlO1xuXG4gICAgICB0aGlzLnNjcm9sbFBhcmVudHMuZm9yRWFjaChmdW5jdGlvbiAocGFyZW50KSB7XG4gICAgICAgIGlmIChwYXJlbnQgIT09IF90aGlzMy50YXJnZXQub3duZXJEb2N1bWVudCkge1xuICAgICAgICAgIHBhcmVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBfdGhpczMucG9zaXRpb24pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKHBvcykge1xuICAgICAgICB0aGlzLnBvc2l0aW9uKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZGlzYWJsZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGRpc2FibGUoKSB7XG4gICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgICAgcmVtb3ZlQ2xhc3ModGhpcy50YXJnZXQsIHRoaXMuZ2V0Q2xhc3MoJ2VuYWJsZWQnKSk7XG4gICAgICByZW1vdmVDbGFzcyh0aGlzLmVsZW1lbnQsIHRoaXMuZ2V0Q2xhc3MoJ2VuYWJsZWQnKSk7XG4gICAgICB0aGlzLmVuYWJsZWQgPSBmYWxzZTtcblxuICAgICAgaWYgKHR5cGVvZiB0aGlzLnNjcm9sbFBhcmVudHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsUGFyZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChwYXJlbnQpIHtcbiAgICAgICAgICBwYXJlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgX3RoaXM0LnBvc2l0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZGVzdHJveScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgICAgdGhpcy5kaXNhYmxlKCk7XG5cbiAgICAgIHRldGhlcnMuZm9yRWFjaChmdW5jdGlvbiAodGV0aGVyLCBpKSB7XG4gICAgICAgIGlmICh0ZXRoZXIgPT09IF90aGlzNSkge1xuICAgICAgICAgIHRldGhlcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gUmVtb3ZlIGFueSBlbGVtZW50cyB3ZSB3ZXJlIHVzaW5nIGZvciBjb252ZW5pZW5jZSBmcm9tIHRoZSBET01cbiAgICAgIGlmICh0ZXRoZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZW1vdmVVdGlsRWxlbWVudHMoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICd1cGRhdGVBdHRhY2hDbGFzc2VzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlQXR0YWNoQ2xhc3NlcyhlbGVtZW50QXR0YWNoLCB0YXJnZXRBdHRhY2gpIHtcbiAgICAgIHZhciBfdGhpczYgPSB0aGlzO1xuXG4gICAgICBlbGVtZW50QXR0YWNoID0gZWxlbWVudEF0dGFjaCB8fCB0aGlzLmF0dGFjaG1lbnQ7XG4gICAgICB0YXJnZXRBdHRhY2ggPSB0YXJnZXRBdHRhY2ggfHwgdGhpcy50YXJnZXRBdHRhY2htZW50O1xuICAgICAgdmFyIHNpZGVzID0gWydsZWZ0JywgJ3RvcCcsICdib3R0b20nLCAncmlnaHQnLCAnbWlkZGxlJywgJ2NlbnRlciddO1xuXG4gICAgICBpZiAodHlwZW9mIHRoaXMuX2FkZEF0dGFjaENsYXNzZXMgIT09ICd1bmRlZmluZWQnICYmIHRoaXMuX2FkZEF0dGFjaENsYXNzZXMubGVuZ3RoKSB7XG4gICAgICAgIC8vIHVwZGF0ZUF0dGFjaENsYXNzZXMgY2FuIGJlIGNhbGxlZCBtb3JlIHRoYW4gb25jZSBpbiBhIHBvc2l0aW9uIGNhbGwsIHNvXG4gICAgICAgIC8vIHdlIG5lZWQgdG8gY2xlYW4gdXAgYWZ0ZXIgb3Vyc2VsdmVzIHN1Y2ggdGhhdCB3aGVuIHRoZSBsYXN0IGRlZmVyIGdldHNcbiAgICAgICAgLy8gcmFuIGl0IGRvZXNuJ3QgYWRkIGFueSBleHRyYSBjbGFzc2VzIGZyb20gcHJldmlvdXMgY2FsbHMuXG4gICAgICAgIHRoaXMuX2FkZEF0dGFjaENsYXNzZXMuc3BsaWNlKDAsIHRoaXMuX2FkZEF0dGFjaENsYXNzZXMubGVuZ3RoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiB0aGlzLl9hZGRBdHRhY2hDbGFzc2VzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aGlzLl9hZGRBdHRhY2hDbGFzc2VzID0gW107XG4gICAgICB9XG4gICAgICB2YXIgYWRkID0gdGhpcy5fYWRkQXR0YWNoQ2xhc3NlcztcblxuICAgICAgaWYgKGVsZW1lbnRBdHRhY2gudG9wKSB7XG4gICAgICAgIGFkZC5wdXNoKHRoaXMuZ2V0Q2xhc3MoJ2VsZW1lbnQtYXR0YWNoZWQnKSArICctJyArIGVsZW1lbnRBdHRhY2gudG9wKTtcbiAgICAgIH1cbiAgICAgIGlmIChlbGVtZW50QXR0YWNoLmxlZnQpIHtcbiAgICAgICAgYWRkLnB1c2godGhpcy5nZXRDbGFzcygnZWxlbWVudC1hdHRhY2hlZCcpICsgJy0nICsgZWxlbWVudEF0dGFjaC5sZWZ0KTtcbiAgICAgIH1cbiAgICAgIGlmICh0YXJnZXRBdHRhY2gudG9wKSB7XG4gICAgICAgIGFkZC5wdXNoKHRoaXMuZ2V0Q2xhc3MoJ3RhcmdldC1hdHRhY2hlZCcpICsgJy0nICsgdGFyZ2V0QXR0YWNoLnRvcCk7XG4gICAgICB9XG4gICAgICBpZiAodGFyZ2V0QXR0YWNoLmxlZnQpIHtcbiAgICAgICAgYWRkLnB1c2godGhpcy5nZXRDbGFzcygndGFyZ2V0LWF0dGFjaGVkJykgKyAnLScgKyB0YXJnZXRBdHRhY2gubGVmdCk7XG4gICAgICB9XG5cbiAgICAgIHZhciBhbGwgPSBbXTtcbiAgICAgIHNpZGVzLmZvckVhY2goZnVuY3Rpb24gKHNpZGUpIHtcbiAgICAgICAgYWxsLnB1c2goX3RoaXM2LmdldENsYXNzKCdlbGVtZW50LWF0dGFjaGVkJykgKyAnLScgKyBzaWRlKTtcbiAgICAgICAgYWxsLnB1c2goX3RoaXM2LmdldENsYXNzKCd0YXJnZXQtYXR0YWNoZWQnKSArICctJyArIHNpZGUpO1xuICAgICAgfSk7XG5cbiAgICAgIGRlZmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCEodHlwZW9mIF90aGlzNi5fYWRkQXR0YWNoQ2xhc3NlcyAhPT0gJ3VuZGVmaW5lZCcpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdXBkYXRlQ2xhc3NlcyhfdGhpczYuZWxlbWVudCwgX3RoaXM2Ll9hZGRBdHRhY2hDbGFzc2VzLCBhbGwpO1xuICAgICAgICBpZiAoIShfdGhpczYub3B0aW9ucy5hZGRUYXJnZXRDbGFzc2VzID09PSBmYWxzZSkpIHtcbiAgICAgICAgICB1cGRhdGVDbGFzc2VzKF90aGlzNi50YXJnZXQsIF90aGlzNi5fYWRkQXR0YWNoQ2xhc3NlcywgYWxsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRlbGV0ZSBfdGhpczYuX2FkZEF0dGFjaENsYXNzZXM7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdwb3NpdGlvbicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBvc2l0aW9uKCkge1xuICAgICAgdmFyIF90aGlzNyA9IHRoaXM7XG5cbiAgICAgIHZhciBmbHVzaENoYW5nZXMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyB0cnVlIDogYXJndW1lbnRzWzBdO1xuXG4gICAgICAvLyBmbHVzaENoYW5nZXMgY29tbWl0cyB0aGUgY2hhbmdlcyBpbW1lZGlhdGVseSwgbGVhdmUgdHJ1ZSB1bmxlc3MgeW91IGFyZSBwb3NpdGlvbmluZyBtdWx0aXBsZVxuICAgICAgLy8gdGV0aGVycyAoaW4gd2hpY2ggY2FzZSBjYWxsIFRldGhlci5VdGlscy5mbHVzaCB5b3Vyc2VsZiB3aGVuIHlvdSdyZSBkb25lKVxuXG4gICAgICBpZiAoIXRoaXMuZW5hYmxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY2xlYXJDYWNoZSgpO1xuXG4gICAgICAvLyBUdXJuICdhdXRvJyBhdHRhY2htZW50cyBpbnRvIHRoZSBhcHByb3ByaWF0ZSBjb3JuZXIgb3IgZWRnZVxuICAgICAgdmFyIHRhcmdldEF0dGFjaG1lbnQgPSBhdXRvVG9GaXhlZEF0dGFjaG1lbnQodGhpcy50YXJnZXRBdHRhY2htZW50LCB0aGlzLmF0dGFjaG1lbnQpO1xuXG4gICAgICB0aGlzLnVwZGF0ZUF0dGFjaENsYXNzZXModGhpcy5hdHRhY2htZW50LCB0YXJnZXRBdHRhY2htZW50KTtcblxuICAgICAgdmFyIGVsZW1lbnRQb3MgPSB0aGlzLmNhY2hlKCdlbGVtZW50LWJvdW5kcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGdldEJvdW5kcyhfdGhpczcuZWxlbWVudCk7XG4gICAgICB9KTtcblxuICAgICAgdmFyIHdpZHRoID0gZWxlbWVudFBvcy53aWR0aDtcbiAgICAgIHZhciBoZWlnaHQgPSBlbGVtZW50UG9zLmhlaWdodDtcblxuICAgICAgaWYgKHdpZHRoID09PSAwICYmIGhlaWdodCA9PT0gMCAmJiB0eXBlb2YgdGhpcy5sYXN0U2l6ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdmFyIF9sYXN0U2l6ZSA9IHRoaXMubGFzdFNpemU7XG5cbiAgICAgICAgLy8gV2UgY2FjaGUgdGhlIGhlaWdodCBhbmQgd2lkdGggdG8gbWFrZSBpdCBwb3NzaWJsZSB0byBwb3NpdGlvbiBlbGVtZW50cyB0aGF0IGFyZVxuICAgICAgICAvLyBnZXR0aW5nIGhpZGRlbi5cbiAgICAgICAgd2lkdGggPSBfbGFzdFNpemUud2lkdGg7XG4gICAgICAgIGhlaWdodCA9IF9sYXN0U2l6ZS5oZWlnaHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmxhc3RTaXplID0geyB3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0IH07XG4gICAgICB9XG5cbiAgICAgIHZhciB0YXJnZXRQb3MgPSB0aGlzLmNhY2hlKCd0YXJnZXQtYm91bmRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX3RoaXM3LmdldFRhcmdldEJvdW5kcygpO1xuICAgICAgfSk7XG4gICAgICB2YXIgdGFyZ2V0U2l6ZSA9IHRhcmdldFBvcztcblxuICAgICAgLy8gR2V0IGFuIGFjdHVhbCBweCBvZmZzZXQgZnJvbSB0aGUgYXR0YWNobWVudFxuICAgICAgdmFyIG9mZnNldCA9IG9mZnNldFRvUHgoYXR0YWNobWVudFRvT2Zmc2V0KHRoaXMuYXR0YWNobWVudCksIHsgd2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodCB9KTtcbiAgICAgIHZhciB0YXJnZXRPZmZzZXQgPSBvZmZzZXRUb1B4KGF0dGFjaG1lbnRUb09mZnNldCh0YXJnZXRBdHRhY2htZW50KSwgdGFyZ2V0U2l6ZSk7XG5cbiAgICAgIHZhciBtYW51YWxPZmZzZXQgPSBvZmZzZXRUb1B4KHRoaXMub2Zmc2V0LCB7IHdpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHQgfSk7XG4gICAgICB2YXIgbWFudWFsVGFyZ2V0T2Zmc2V0ID0gb2Zmc2V0VG9QeCh0aGlzLnRhcmdldE9mZnNldCwgdGFyZ2V0U2l6ZSk7XG5cbiAgICAgIC8vIEFkZCB0aGUgbWFudWFsbHkgcHJvdmlkZWQgb2Zmc2V0XG4gICAgICBvZmZzZXQgPSBhZGRPZmZzZXQob2Zmc2V0LCBtYW51YWxPZmZzZXQpO1xuICAgICAgdGFyZ2V0T2Zmc2V0ID0gYWRkT2Zmc2V0KHRhcmdldE9mZnNldCwgbWFudWFsVGFyZ2V0T2Zmc2V0KTtcblxuICAgICAgLy8gSXQncyBub3cgb3VyIGdvYWwgdG8gbWFrZSAoZWxlbWVudCBwb3NpdGlvbiArIG9mZnNldCkgPT0gKHRhcmdldCBwb3NpdGlvbiArIHRhcmdldCBvZmZzZXQpXG4gICAgICB2YXIgbGVmdCA9IHRhcmdldFBvcy5sZWZ0ICsgdGFyZ2V0T2Zmc2V0LmxlZnQgLSBvZmZzZXQubGVmdDtcbiAgICAgIHZhciB0b3AgPSB0YXJnZXRQb3MudG9wICsgdGFyZ2V0T2Zmc2V0LnRvcCAtIG9mZnNldC50b3A7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVGV0aGVyQmFzZS5tb2R1bGVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBfbW9kdWxlMiA9IFRldGhlckJhc2UubW9kdWxlc1tpXTtcbiAgICAgICAgdmFyIHJldCA9IF9tb2R1bGUyLnBvc2l0aW9uLmNhbGwodGhpcywge1xuICAgICAgICAgIGxlZnQ6IGxlZnQsXG4gICAgICAgICAgdG9wOiB0b3AsXG4gICAgICAgICAgdGFyZ2V0QXR0YWNobWVudDogdGFyZ2V0QXR0YWNobWVudCxcbiAgICAgICAgICB0YXJnZXRQb3M6IHRhcmdldFBvcyxcbiAgICAgICAgICBlbGVtZW50UG9zOiBlbGVtZW50UG9zLFxuICAgICAgICAgIG9mZnNldDogb2Zmc2V0LFxuICAgICAgICAgIHRhcmdldE9mZnNldDogdGFyZ2V0T2Zmc2V0LFxuICAgICAgICAgIG1hbnVhbE9mZnNldDogbWFudWFsT2Zmc2V0LFxuICAgICAgICAgIG1hbnVhbFRhcmdldE9mZnNldDogbWFudWFsVGFyZ2V0T2Zmc2V0LFxuICAgICAgICAgIHNjcm9sbGJhclNpemU6IHNjcm9sbGJhclNpemUsXG4gICAgICAgICAgYXR0YWNobWVudDogdGhpcy5hdHRhY2htZW50XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChyZXQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiByZXQgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiByZXQgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdG9wID0gcmV0LnRvcDtcbiAgICAgICAgICBsZWZ0ID0gcmV0LmxlZnQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gV2UgZGVzY3JpYmUgdGhlIHBvc2l0aW9uIHRocmVlIGRpZmZlcmVudCB3YXlzIHRvIGdpdmUgdGhlIG9wdGltaXplclxuICAgICAgLy8gYSBjaGFuY2UgdG8gZGVjaWRlIHRoZSBiZXN0IHBvc3NpYmxlIHdheSB0byBwb3NpdGlvbiB0aGUgZWxlbWVudFxuICAgICAgLy8gd2l0aCB0aGUgZmV3ZXN0IHJlcGFpbnRzLlxuICAgICAgdmFyIG5leHQgPSB7XG4gICAgICAgIC8vIEl0J3MgcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIHBhZ2UgKGFic29sdXRlIHBvc2l0aW9uaW5nIHdoZW5cbiAgICAgICAgLy8gdGhlIGVsZW1lbnQgaXMgYSBjaGlsZCBvZiB0aGUgYm9keSlcbiAgICAgICAgcGFnZToge1xuICAgICAgICAgIHRvcDogdG9wLFxuICAgICAgICAgIGxlZnQ6IGxlZnRcbiAgICAgICAgfSxcblxuICAgICAgICAvLyBJdCdzIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSB2aWV3cG9ydCAoZml4ZWQgcG9zaXRpb25pbmcpXG4gICAgICAgIHZpZXdwb3J0OiB7XG4gICAgICAgICAgdG9wOiB0b3AgLSBwYWdlWU9mZnNldCxcbiAgICAgICAgICBib3R0b206IHBhZ2VZT2Zmc2V0IC0gdG9wIC0gaGVpZ2h0ICsgaW5uZXJIZWlnaHQsXG4gICAgICAgICAgbGVmdDogbGVmdCAtIHBhZ2VYT2Zmc2V0LFxuICAgICAgICAgIHJpZ2h0OiBwYWdlWE9mZnNldCAtIGxlZnQgLSB3aWR0aCArIGlubmVyV2lkdGhcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdmFyIGRvYyA9IHRoaXMudGFyZ2V0Lm93bmVyRG9jdW1lbnQ7XG4gICAgICB2YXIgd2luID0gZG9jLmRlZmF1bHRWaWV3O1xuXG4gICAgICB2YXIgc2Nyb2xsYmFyU2l6ZSA9IHVuZGVmaW5lZDtcbiAgICAgIGlmIChkb2MuYm9keS5zY3JvbGxXaWR0aCA+IHdpbi5pbm5lcldpZHRoKSB7XG4gICAgICAgIHNjcm9sbGJhclNpemUgPSB0aGlzLmNhY2hlKCdzY3JvbGxiYXItc2l6ZScsIGdldFNjcm9sbEJhclNpemUpO1xuICAgICAgICBuZXh0LnZpZXdwb3J0LmJvdHRvbSAtPSBzY3JvbGxiYXJTaXplLmhlaWdodDtcbiAgICAgIH1cblxuICAgICAgaWYgKGRvYy5ib2R5LnNjcm9sbEhlaWdodCA+IHdpbi5pbm5lckhlaWdodCkge1xuICAgICAgICBzY3JvbGxiYXJTaXplID0gdGhpcy5jYWNoZSgnc2Nyb2xsYmFyLXNpemUnLCBnZXRTY3JvbGxCYXJTaXplKTtcbiAgICAgICAgbmV4dC52aWV3cG9ydC5yaWdodCAtPSBzY3JvbGxiYXJTaXplLndpZHRoO1xuICAgICAgfVxuXG4gICAgICBpZiAoWycnLCAnc3RhdGljJ10uaW5kZXhPZihkb2MuYm9keS5zdHlsZS5wb3NpdGlvbikgPT09IC0xIHx8IFsnJywgJ3N0YXRpYyddLmluZGV4T2YoZG9jLmJvZHkucGFyZW50RWxlbWVudC5zdHlsZS5wb3NpdGlvbikgPT09IC0xKSB7XG4gICAgICAgIC8vIEFic29sdXRlIHBvc2l0aW9uaW5nIGluIHRoZSBib2R5IHdpbGwgYmUgcmVsYXRpdmUgdG8gdGhlIHBhZ2UsIG5vdCB0aGUgJ2luaXRpYWwgY29udGFpbmluZyBibG9jaydcbiAgICAgICAgbmV4dC5wYWdlLmJvdHRvbSA9IGRvYy5ib2R5LnNjcm9sbEhlaWdodCAtIHRvcCAtIGhlaWdodDtcbiAgICAgICAgbmV4dC5wYWdlLnJpZ2h0ID0gZG9jLmJvZHkuc2Nyb2xsV2lkdGggLSBsZWZ0IC0gd2lkdGg7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9wdGltaXphdGlvbnMgIT09ICd1bmRlZmluZWQnICYmIHRoaXMub3B0aW9ucy5vcHRpbWl6YXRpb25zLm1vdmVFbGVtZW50ICE9PSBmYWxzZSAmJiAhKHR5cGVvZiB0aGlzLnRhcmdldE1vZGlmaWVyICE9PSAndW5kZWZpbmVkJykpIHtcbiAgICAgICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgb2Zmc2V0UGFyZW50ID0gX3RoaXM3LmNhY2hlKCd0YXJnZXQtb2Zmc2V0cGFyZW50JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGdldE9mZnNldFBhcmVudChfdGhpczcudGFyZ2V0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB2YXIgb2Zmc2V0UG9zaXRpb24gPSBfdGhpczcuY2FjaGUoJ3RhcmdldC1vZmZzZXRwYXJlbnQtYm91bmRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGdldEJvdW5kcyhvZmZzZXRQYXJlbnQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHZhciBvZmZzZXRQYXJlbnRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUob2Zmc2V0UGFyZW50KTtcbiAgICAgICAgICB2YXIgb2Zmc2V0UGFyZW50U2l6ZSA9IG9mZnNldFBvc2l0aW9uO1xuXG4gICAgICAgICAgdmFyIG9mZnNldEJvcmRlciA9IHt9O1xuICAgICAgICAgIFsnVG9wJywgJ0xlZnQnLCAnQm90dG9tJywgJ1JpZ2h0J10uZm9yRWFjaChmdW5jdGlvbiAoc2lkZSkge1xuICAgICAgICAgICAgb2Zmc2V0Qm9yZGVyW3NpZGUudG9Mb3dlckNhc2UoKV0gPSBwYXJzZUZsb2F0KG9mZnNldFBhcmVudFN0eWxlWydib3JkZXInICsgc2lkZSArICdXaWR0aCddKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIG9mZnNldFBvc2l0aW9uLnJpZ2h0ID0gZG9jLmJvZHkuc2Nyb2xsV2lkdGggLSBvZmZzZXRQb3NpdGlvbi5sZWZ0IC0gb2Zmc2V0UGFyZW50U2l6ZS53aWR0aCArIG9mZnNldEJvcmRlci5yaWdodDtcbiAgICAgICAgICBvZmZzZXRQb3NpdGlvbi5ib3R0b20gPSBkb2MuYm9keS5zY3JvbGxIZWlnaHQgLSBvZmZzZXRQb3NpdGlvbi50b3AgLSBvZmZzZXRQYXJlbnRTaXplLmhlaWdodCArIG9mZnNldEJvcmRlci5ib3R0b207XG5cbiAgICAgICAgICBpZiAobmV4dC5wYWdlLnRvcCA+PSBvZmZzZXRQb3NpdGlvbi50b3AgKyBvZmZzZXRCb3JkZXIudG9wICYmIG5leHQucGFnZS5ib3R0b20gPj0gb2Zmc2V0UG9zaXRpb24uYm90dG9tKSB7XG4gICAgICAgICAgICBpZiAobmV4dC5wYWdlLmxlZnQgPj0gb2Zmc2V0UG9zaXRpb24ubGVmdCArIG9mZnNldEJvcmRlci5sZWZ0ICYmIG5leHQucGFnZS5yaWdodCA+PSBvZmZzZXRQb3NpdGlvbi5yaWdodCkge1xuICAgICAgICAgICAgICAvLyBXZSdyZSB3aXRoaW4gdGhlIHZpc2libGUgcGFydCBvZiB0aGUgdGFyZ2V0J3Mgc2Nyb2xsIHBhcmVudFxuICAgICAgICAgICAgICB2YXIgc2Nyb2xsVG9wID0gb2Zmc2V0UGFyZW50LnNjcm9sbFRvcDtcbiAgICAgICAgICAgICAgdmFyIHNjcm9sbExlZnQgPSBvZmZzZXRQYXJlbnQuc2Nyb2xsTGVmdDtcblxuICAgICAgICAgICAgICAvLyBJdCdzIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSB0YXJnZXQncyBvZmZzZXQgcGFyZW50IChhYnNvbHV0ZSBwb3NpdGlvbmluZyB3aGVuXG4gICAgICAgICAgICAgIC8vIHRoZSBlbGVtZW50IGlzIG1vdmVkIHRvIGJlIGEgY2hpbGQgb2YgdGhlIHRhcmdldCdzIG9mZnNldCBwYXJlbnQpLlxuICAgICAgICAgICAgICBuZXh0Lm9mZnNldCA9IHtcbiAgICAgICAgICAgICAgICB0b3A6IG5leHQucGFnZS50b3AgLSBvZmZzZXRQb3NpdGlvbi50b3AgKyBzY3JvbGxUb3AgLSBvZmZzZXRCb3JkZXIudG9wLFxuICAgICAgICAgICAgICAgIGxlZnQ6IG5leHQucGFnZS5sZWZ0IC0gb2Zmc2V0UG9zaXRpb24ubGVmdCArIHNjcm9sbExlZnQgLSBvZmZzZXRCb3JkZXIubGVmdFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSkoKTtcbiAgICAgIH1cblxuICAgICAgLy8gV2UgY291bGQgYWxzbyB0cmF2ZWwgdXAgdGhlIERPTSBhbmQgdHJ5IGVhY2ggY29udGFpbmluZyBjb250ZXh0LCByYXRoZXIgdGhhbiBvbmx5XG4gICAgICAvLyBsb29raW5nIGF0IHRoZSBib2R5LCBidXQgd2UncmUgZ29ubmEgZ2V0IGRpbWluaXNoaW5nIHJldHVybnMuXG5cbiAgICAgIHRoaXMubW92ZShuZXh0KTtcblxuICAgICAgdGhpcy5oaXN0b3J5LnVuc2hpZnQobmV4dCk7XG5cbiAgICAgIGlmICh0aGlzLmhpc3RvcnkubGVuZ3RoID4gMykge1xuICAgICAgICB0aGlzLmhpc3RvcnkucG9wKCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChmbHVzaENoYW5nZXMpIHtcbiAgICAgICAgZmx1c2goKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gVEhFIElTU1VFXG4gIH0sIHtcbiAgICBrZXk6ICdtb3ZlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gbW92ZShwb3MpIHtcbiAgICAgIHZhciBfdGhpczggPSB0aGlzO1xuXG4gICAgICBpZiAoISh0eXBlb2YgdGhpcy5lbGVtZW50LnBhcmVudE5vZGUgIT09ICd1bmRlZmluZWQnKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBzYW1lID0ge307XG5cbiAgICAgIGZvciAodmFyIHR5cGUgaW4gcG9zKSB7XG4gICAgICAgIHNhbWVbdHlwZV0gPSB7fTtcblxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gcG9zW3R5cGVdKSB7XG4gICAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7XG5cbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaGlzdG9yeS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFyIHBvaW50ID0gdGhpcy5oaXN0b3J5W2ldO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBwb2ludFt0eXBlXSAhPT0gJ3VuZGVmaW5lZCcgJiYgIXdpdGhpbihwb2ludFt0eXBlXVtrZXldLCBwb3NbdHlwZV1ba2V5XSkpIHtcbiAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWZvdW5kKSB7XG4gICAgICAgICAgICBzYW1lW3R5cGVdW2tleV0gPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgY3NzID0geyB0b3A6ICcnLCBsZWZ0OiAnJywgcmlnaHQ6ICcnLCBib3R0b206ICcnIH07XG5cbiAgICAgIHZhciB0cmFuc2NyaWJlID0gZnVuY3Rpb24gdHJhbnNjcmliZShfc2FtZSwgX3Bvcykge1xuICAgICAgICB2YXIgaGFzT3B0aW1pemF0aW9ucyA9IHR5cGVvZiBfdGhpczgub3B0aW9ucy5vcHRpbWl6YXRpb25zICE9PSAndW5kZWZpbmVkJztcbiAgICAgICAgdmFyIGdwdSA9IGhhc09wdGltaXphdGlvbnMgPyBfdGhpczgub3B0aW9ucy5vcHRpbWl6YXRpb25zLmdwdSA6IG51bGw7XG4gICAgICAgIGlmIChncHUgIT09IGZhbHNlKSB7XG4gICAgICAgICAgdmFyIHlQb3MgPSB1bmRlZmluZWQsXG4gICAgICAgICAgICAgIHhQb3MgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgaWYgKF9zYW1lLnRvcCkge1xuICAgICAgICAgICAgY3NzLnRvcCA9IDA7XG4gICAgICAgICAgICB5UG9zID0gX3Bvcy50b3A7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNzcy5ib3R0b20gPSAwO1xuICAgICAgICAgICAgeVBvcyA9IC1fcG9zLmJvdHRvbTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoX3NhbWUubGVmdCkge1xuICAgICAgICAgICAgY3NzLmxlZnQgPSAwO1xuICAgICAgICAgICAgeFBvcyA9IF9wb3MubGVmdDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3NzLnJpZ2h0ID0gMDtcbiAgICAgICAgICAgIHhQb3MgPSAtX3Bvcy5yaWdodDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjc3NbdHJhbnNmb3JtS2V5XSA9ICd0cmFuc2xhdGVYKCcgKyBNYXRoLnJvdW5kKHhQb3MpICsgJ3B4KSB0cmFuc2xhdGVZKCcgKyBNYXRoLnJvdW5kKHlQb3MpICsgJ3B4KSc7XG5cbiAgICAgICAgICBpZiAodHJhbnNmb3JtS2V5ICE9PSAnbXNUcmFuc2Zvcm0nKSB7XG4gICAgICAgICAgICAvLyBUaGUgWiB0cmFuc2Zvcm0gd2lsbCBrZWVwIHRoaXMgaW4gdGhlIEdQVSAoZmFzdGVyLCBhbmQgcHJldmVudHMgYXJ0aWZhY3RzKSxcbiAgICAgICAgICAgIC8vIGJ1dCBJRTkgZG9lc24ndCBzdXBwb3J0IDNkIHRyYW5zZm9ybXMgYW5kIHdpbGwgY2hva2UuXG4gICAgICAgICAgICBjc3NbdHJhbnNmb3JtS2V5XSArPSBcIiB0cmFuc2xhdGVaKDApXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChfc2FtZS50b3ApIHtcbiAgICAgICAgICAgIGNzcy50b3AgPSBfcG9zLnRvcCArICdweCc7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNzcy5ib3R0b20gPSBfcG9zLmJvdHRvbSArICdweCc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKF9zYW1lLmxlZnQpIHtcbiAgICAgICAgICAgIGNzcy5sZWZ0ID0gX3Bvcy5sZWZ0ICsgJ3B4JztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3NzLnJpZ2h0ID0gX3Bvcy5yaWdodCArICdweCc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB2YXIgbW92ZWQgPSBmYWxzZTtcbiAgICAgIGlmICgoc2FtZS5wYWdlLnRvcCB8fCBzYW1lLnBhZ2UuYm90dG9tKSAmJiAoc2FtZS5wYWdlLmxlZnQgfHwgc2FtZS5wYWdlLnJpZ2h0KSkge1xuICAgICAgICBjc3MucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICB0cmFuc2NyaWJlKHNhbWUucGFnZSwgcG9zLnBhZ2UpO1xuICAgICAgfSBlbHNlIGlmICgoc2FtZS52aWV3cG9ydC50b3AgfHwgc2FtZS52aWV3cG9ydC5ib3R0b20pICYmIChzYW1lLnZpZXdwb3J0LmxlZnQgfHwgc2FtZS52aWV3cG9ydC5yaWdodCkpIHtcbiAgICAgICAgY3NzLnBvc2l0aW9uID0gJ2ZpeGVkJztcbiAgICAgICAgdHJhbnNjcmliZShzYW1lLnZpZXdwb3J0LCBwb3Mudmlld3BvcnQpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc2FtZS5vZmZzZXQgIT09ICd1bmRlZmluZWQnICYmIHNhbWUub2Zmc2V0LnRvcCAmJiBzYW1lLm9mZnNldC5sZWZ0KSB7XG4gICAgICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY3NzLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICB2YXIgb2Zmc2V0UGFyZW50ID0gX3RoaXM4LmNhY2hlKCd0YXJnZXQtb2Zmc2V0cGFyZW50JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGdldE9mZnNldFBhcmVudChfdGhpczgudGFyZ2V0KTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChnZXRPZmZzZXRQYXJlbnQoX3RoaXM4LmVsZW1lbnQpICE9PSBvZmZzZXRQYXJlbnQpIHtcbiAgICAgICAgICAgIGRlZmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgX3RoaXM4LmVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChfdGhpczguZWxlbWVudCk7XG4gICAgICAgICAgICAgIG9mZnNldFBhcmVudC5hcHBlbmRDaGlsZChfdGhpczguZWxlbWVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0cmFuc2NyaWJlKHNhbWUub2Zmc2V0LCBwb3Mub2Zmc2V0KTtcbiAgICAgICAgICBtb3ZlZCA9IHRydWU7XG4gICAgICAgIH0pKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjc3MucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICB0cmFuc2NyaWJlKHsgdG9wOiB0cnVlLCBsZWZ0OiB0cnVlIH0sIHBvcy5wYWdlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFtb3ZlZCkge1xuICAgICAgICB2YXIgb2Zmc2V0UGFyZW50SXNCb2R5ID0gdHJ1ZTtcbiAgICAgICAgdmFyIGN1cnJlbnROb2RlID0gdGhpcy5lbGVtZW50LnBhcmVudE5vZGU7XG4gICAgICAgIHdoaWxlIChjdXJyZW50Tm9kZSAmJiBjdXJyZW50Tm9kZS5ub2RlVHlwZSA9PT0gMSAmJiBjdXJyZW50Tm9kZS50YWdOYW1lICE9PSAnQk9EWScpIHtcbiAgICAgICAgICBpZiAoZ2V0Q29tcHV0ZWRTdHlsZShjdXJyZW50Tm9kZSkucG9zaXRpb24gIT09ICdzdGF0aWMnKSB7XG4gICAgICAgICAgICBvZmZzZXRQYXJlbnRJc0JvZHkgPSBmYWxzZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGN1cnJlbnROb2RlID0gY3VycmVudE5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghb2Zmc2V0UGFyZW50SXNCb2R5KSB7XG4gICAgICAgICAgdGhpcy5lbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICB0aGlzLmVsZW1lbnQub3duZXJEb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQW55IGNzcyBjaGFuZ2Ugd2lsbCB0cmlnZ2VyIGEgcmVwYWludCwgc28gbGV0J3MgYXZvaWQgb25lIGlmIG5vdGhpbmcgY2hhbmdlZFxuICAgICAgdmFyIHdyaXRlQ1NTID0ge307XG4gICAgICB2YXIgd3JpdGUgPSBmYWxzZTtcbiAgICAgIGZvciAodmFyIGtleSBpbiBjc3MpIHtcbiAgICAgICAgdmFyIHZhbCA9IGNzc1trZXldO1xuICAgICAgICB2YXIgZWxWYWwgPSB0aGlzLmVsZW1lbnQuc3R5bGVba2V5XTtcblxuICAgICAgICBpZiAoZWxWYWwgIT09IHZhbCkge1xuICAgICAgICAgIHdyaXRlID0gdHJ1ZTtcbiAgICAgICAgICB3cml0ZUNTU1trZXldID0gdmFsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh3cml0ZSkge1xuICAgICAgICBkZWZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgZXh0ZW5kKF90aGlzOC5lbGVtZW50LnN0eWxlLCB3cml0ZUNTUyk7XG4gICAgICAgICAgX3RoaXM4LnRyaWdnZXIoJ3JlcG9zaXRpb25lZCcpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gVGV0aGVyQ2xhc3M7XG59KShFdmVudGVkKTtcblxuVGV0aGVyQ2xhc3MubW9kdWxlcyA9IFtdO1xuXG5UZXRoZXJCYXNlLnBvc2l0aW9uID0gcG9zaXRpb247XG5cbnZhciBUZXRoZXIgPSBleHRlbmQoVGV0aGVyQ2xhc3MsIFRldGhlckJhc2UpO1xuLyogZ2xvYmFscyBUZXRoZXJCYXNlICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIF9zbGljZWRUb0FycmF5ID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gc2xpY2VJdGVyYXRvcihhcnIsIGkpIHsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbJ3JldHVybiddKSBfaVsncmV0dXJuJ10oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9IHJldHVybiBmdW5jdGlvbiAoYXJyLCBpKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgcmV0dXJuIGFycjsgfSBlbHNlIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpIHsgcmV0dXJuIHNsaWNlSXRlcmF0b3IoYXJyLCBpKTsgfSBlbHNlIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZScpOyB9IH07IH0pKCk7XG5cbnZhciBfVGV0aGVyQmFzZSRVdGlscyA9IFRldGhlckJhc2UuVXRpbHM7XG52YXIgZ2V0Qm91bmRzID0gX1RldGhlckJhc2UkVXRpbHMuZ2V0Qm91bmRzO1xudmFyIGV4dGVuZCA9IF9UZXRoZXJCYXNlJFV0aWxzLmV4dGVuZDtcbnZhciB1cGRhdGVDbGFzc2VzID0gX1RldGhlckJhc2UkVXRpbHMudXBkYXRlQ2xhc3NlcztcbnZhciBkZWZlciA9IF9UZXRoZXJCYXNlJFV0aWxzLmRlZmVyO1xuXG52YXIgQk9VTkRTX0ZPUk1BVCA9IFsnbGVmdCcsICd0b3AnLCAncmlnaHQnLCAnYm90dG9tJ107XG5cbmZ1bmN0aW9uIGdldEJvdW5kaW5nUmVjdCh0ZXRoZXIsIHRvKSB7XG4gIGlmICh0byA9PT0gJ3Njcm9sbFBhcmVudCcpIHtcbiAgICB0byA9IHRldGhlci5zY3JvbGxQYXJlbnRzWzBdO1xuICB9IGVsc2UgaWYgKHRvID09PSAnd2luZG93Jykge1xuICAgIHRvID0gW3BhZ2VYT2Zmc2V0LCBwYWdlWU9mZnNldCwgaW5uZXJXaWR0aCArIHBhZ2VYT2Zmc2V0LCBpbm5lckhlaWdodCArIHBhZ2VZT2Zmc2V0XTtcbiAgfVxuXG4gIGlmICh0byA9PT0gZG9jdW1lbnQpIHtcbiAgICB0byA9IHRvLmRvY3VtZW50RWxlbWVudDtcbiAgfVxuXG4gIGlmICh0eXBlb2YgdG8ubm9kZVR5cGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBub2RlID0gdG87XG4gICAgICB2YXIgc2l6ZSA9IGdldEJvdW5kcyh0byk7XG4gICAgICB2YXIgcG9zID0gc2l6ZTtcbiAgICAgIHZhciBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUodG8pO1xuXG4gICAgICB0byA9IFtwb3MubGVmdCwgcG9zLnRvcCwgc2l6ZS53aWR0aCArIHBvcy5sZWZ0LCBzaXplLmhlaWdodCArIHBvcy50b3BdO1xuXG4gICAgICAvLyBBY2NvdW50IGFueSBwYXJlbnQgRnJhbWVzIHNjcm9sbCBvZmZzZXRcbiAgICAgIGlmIChub2RlLm93bmVyRG9jdW1lbnQgIT09IGRvY3VtZW50KSB7XG4gICAgICAgIHZhciB3aW4gPSBub2RlLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7XG4gICAgICAgIHRvWzBdICs9IHdpbi5wYWdlWE9mZnNldDtcbiAgICAgICAgdG9bMV0gKz0gd2luLnBhZ2VZT2Zmc2V0O1xuICAgICAgICB0b1syXSArPSB3aW4ucGFnZVhPZmZzZXQ7XG4gICAgICAgIHRvWzNdICs9IHdpbi5wYWdlWU9mZnNldDtcbiAgICAgIH1cblxuICAgICAgQk9VTkRTX0ZPUk1BVC5mb3JFYWNoKGZ1bmN0aW9uIChzaWRlLCBpKSB7XG4gICAgICAgIHNpZGUgPSBzaWRlWzBdLnRvVXBwZXJDYXNlKCkgKyBzaWRlLnN1YnN0cigxKTtcbiAgICAgICAgaWYgKHNpZGUgPT09ICdUb3AnIHx8IHNpZGUgPT09ICdMZWZ0Jykge1xuICAgICAgICAgIHRvW2ldICs9IHBhcnNlRmxvYXQoc3R5bGVbJ2JvcmRlcicgKyBzaWRlICsgJ1dpZHRoJ10pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRvW2ldIC09IHBhcnNlRmxvYXQoc3R5bGVbJ2JvcmRlcicgKyBzaWRlICsgJ1dpZHRoJ10pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KSgpO1xuICB9XG5cbiAgcmV0dXJuIHRvO1xufVxuXG5UZXRoZXJCYXNlLm1vZHVsZXMucHVzaCh7XG4gIHBvc2l0aW9uOiBmdW5jdGlvbiBwb3NpdGlvbihfcmVmKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciB0b3AgPSBfcmVmLnRvcDtcbiAgICB2YXIgbGVmdCA9IF9yZWYubGVmdDtcbiAgICB2YXIgdGFyZ2V0QXR0YWNobWVudCA9IF9yZWYudGFyZ2V0QXR0YWNobWVudDtcblxuICAgIGlmICghdGhpcy5vcHRpb25zLmNvbnN0cmFpbnRzKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YXIgX2NhY2hlID0gdGhpcy5jYWNoZSgnZWxlbWVudC1ib3VuZHMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gZ2V0Qm91bmRzKF90aGlzLmVsZW1lbnQpO1xuICAgIH0pO1xuXG4gICAgdmFyIGhlaWdodCA9IF9jYWNoZS5oZWlnaHQ7XG4gICAgdmFyIHdpZHRoID0gX2NhY2hlLndpZHRoO1xuXG4gICAgaWYgKHdpZHRoID09PSAwICYmIGhlaWdodCA9PT0gMCAmJiB0eXBlb2YgdGhpcy5sYXN0U2l6ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHZhciBfbGFzdFNpemUgPSB0aGlzLmxhc3RTaXplO1xuXG4gICAgICAvLyBIYW5kbGUgdGhlIGl0ZW0gZ2V0dGluZyBoaWRkZW4gYXMgYSByZXN1bHQgb2Ygb3VyIHBvc2l0aW9uaW5nIHdpdGhvdXQgZ2xpdGNoaW5nXG4gICAgICAvLyB0aGUgY2xhc3NlcyBpbiBhbmQgb3V0XG4gICAgICB3aWR0aCA9IF9sYXN0U2l6ZS53aWR0aDtcbiAgICAgIGhlaWdodCA9IF9sYXN0U2l6ZS5oZWlnaHQ7XG4gICAgfVxuXG4gICAgdmFyIHRhcmdldFNpemUgPSB0aGlzLmNhY2hlKCd0YXJnZXQtYm91bmRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF90aGlzLmdldFRhcmdldEJvdW5kcygpO1xuICAgIH0pO1xuXG4gICAgdmFyIHRhcmdldEhlaWdodCA9IHRhcmdldFNpemUuaGVpZ2h0O1xuICAgIHZhciB0YXJnZXRXaWR0aCA9IHRhcmdldFNpemUud2lkdGg7XG5cbiAgICB2YXIgYWxsQ2xhc3NlcyA9IFt0aGlzLmdldENsYXNzKCdwaW5uZWQnKSwgdGhpcy5nZXRDbGFzcygnb3V0LW9mLWJvdW5kcycpXTtcblxuICAgIHRoaXMub3B0aW9ucy5jb25zdHJhaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChjb25zdHJhaW50KSB7XG4gICAgICB2YXIgb3V0T2ZCb3VuZHNDbGFzcyA9IGNvbnN0cmFpbnQub3V0T2ZCb3VuZHNDbGFzcztcbiAgICAgIHZhciBwaW5uZWRDbGFzcyA9IGNvbnN0cmFpbnQucGlubmVkQ2xhc3M7XG5cbiAgICAgIGlmIChvdXRPZkJvdW5kc0NsYXNzKSB7XG4gICAgICAgIGFsbENsYXNzZXMucHVzaChvdXRPZkJvdW5kc0NsYXNzKTtcbiAgICAgIH1cbiAgICAgIGlmIChwaW5uZWRDbGFzcykge1xuICAgICAgICBhbGxDbGFzc2VzLnB1c2gocGlubmVkQ2xhc3MpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgYWxsQ2xhc3Nlcy5mb3JFYWNoKGZ1bmN0aW9uIChjbHMpIHtcbiAgICAgIFsnbGVmdCcsICd0b3AnLCAncmlnaHQnLCAnYm90dG9tJ10uZm9yRWFjaChmdW5jdGlvbiAoc2lkZSkge1xuICAgICAgICBhbGxDbGFzc2VzLnB1c2goY2xzICsgJy0nICsgc2lkZSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHZhciBhZGRDbGFzc2VzID0gW107XG5cbiAgICB2YXIgdEF0dGFjaG1lbnQgPSBleHRlbmQoe30sIHRhcmdldEF0dGFjaG1lbnQpO1xuICAgIHZhciBlQXR0YWNobWVudCA9IGV4dGVuZCh7fSwgdGhpcy5hdHRhY2htZW50KTtcblxuICAgIHRoaXMub3B0aW9ucy5jb25zdHJhaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChjb25zdHJhaW50KSB7XG4gICAgICB2YXIgdG8gPSBjb25zdHJhaW50LnRvO1xuICAgICAgdmFyIGF0dGFjaG1lbnQgPSBjb25zdHJhaW50LmF0dGFjaG1lbnQ7XG4gICAgICB2YXIgcGluID0gY29uc3RyYWludC5waW47XG5cbiAgICAgIGlmICh0eXBlb2YgYXR0YWNobWVudCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgYXR0YWNobWVudCA9ICcnO1xuICAgICAgfVxuXG4gICAgICB2YXIgY2hhbmdlQXR0YWNoWCA9IHVuZGVmaW5lZCxcbiAgICAgICAgICBjaGFuZ2VBdHRhY2hZID0gdW5kZWZpbmVkO1xuICAgICAgaWYgKGF0dGFjaG1lbnQuaW5kZXhPZignICcpID49IDApIHtcbiAgICAgICAgdmFyIF9hdHRhY2htZW50JHNwbGl0ID0gYXR0YWNobWVudC5zcGxpdCgnICcpO1xuXG4gICAgICAgIHZhciBfYXR0YWNobWVudCRzcGxpdDIgPSBfc2xpY2VkVG9BcnJheShfYXR0YWNobWVudCRzcGxpdCwgMik7XG5cbiAgICAgICAgY2hhbmdlQXR0YWNoWSA9IF9hdHRhY2htZW50JHNwbGl0MlswXTtcbiAgICAgICAgY2hhbmdlQXR0YWNoWCA9IF9hdHRhY2htZW50JHNwbGl0MlsxXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoYW5nZUF0dGFjaFggPSBjaGFuZ2VBdHRhY2hZID0gYXR0YWNobWVudDtcbiAgICAgIH1cblxuICAgICAgdmFyIGJvdW5kcyA9IGdldEJvdW5kaW5nUmVjdChfdGhpcywgdG8pO1xuXG4gICAgICBpZiAoY2hhbmdlQXR0YWNoWSA9PT0gJ3RhcmdldCcgfHwgY2hhbmdlQXR0YWNoWSA9PT0gJ2JvdGgnKSB7XG4gICAgICAgIGlmICh0b3AgPCBib3VuZHNbMV0gJiYgdEF0dGFjaG1lbnQudG9wID09PSAndG9wJykge1xuICAgICAgICAgIHRvcCArPSB0YXJnZXRIZWlnaHQ7XG4gICAgICAgICAgdEF0dGFjaG1lbnQudG9wID0gJ2JvdHRvbSc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodG9wICsgaGVpZ2h0ID4gYm91bmRzWzNdICYmIHRBdHRhY2htZW50LnRvcCA9PT0gJ2JvdHRvbScpIHtcbiAgICAgICAgICB0b3AgLT0gdGFyZ2V0SGVpZ2h0O1xuICAgICAgICAgIHRBdHRhY2htZW50LnRvcCA9ICd0b3AnO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFuZ2VBdHRhY2hZID09PSAndG9nZXRoZXInKSB7XG4gICAgICAgIGlmICh0QXR0YWNobWVudC50b3AgPT09ICd0b3AnKSB7XG4gICAgICAgICAgaWYgKGVBdHRhY2htZW50LnRvcCA9PT0gJ2JvdHRvbScgJiYgdG9wIDwgYm91bmRzWzFdKSB7XG4gICAgICAgICAgICB0b3AgKz0gdGFyZ2V0SGVpZ2h0O1xuICAgICAgICAgICAgdEF0dGFjaG1lbnQudG9wID0gJ2JvdHRvbSc7XG5cbiAgICAgICAgICAgIHRvcCArPSBoZWlnaHQ7XG4gICAgICAgICAgICBlQXR0YWNobWVudC50b3AgPSAndG9wJztcbiAgICAgICAgICB9IGVsc2UgaWYgKGVBdHRhY2htZW50LnRvcCA9PT0gJ3RvcCcgJiYgdG9wICsgaGVpZ2h0ID4gYm91bmRzWzNdICYmIHRvcCAtIChoZWlnaHQgLSB0YXJnZXRIZWlnaHQpID49IGJvdW5kc1sxXSkge1xuICAgICAgICAgICAgdG9wIC09IGhlaWdodCAtIHRhcmdldEhlaWdodDtcbiAgICAgICAgICAgIHRBdHRhY2htZW50LnRvcCA9ICdib3R0b20nO1xuXG4gICAgICAgICAgICBlQXR0YWNobWVudC50b3AgPSAnYm90dG9tJztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodEF0dGFjaG1lbnQudG9wID09PSAnYm90dG9tJykge1xuICAgICAgICAgIGlmIChlQXR0YWNobWVudC50b3AgPT09ICd0b3AnICYmIHRvcCArIGhlaWdodCA+IGJvdW5kc1szXSkge1xuICAgICAgICAgICAgdG9wIC09IHRhcmdldEhlaWdodDtcbiAgICAgICAgICAgIHRBdHRhY2htZW50LnRvcCA9ICd0b3AnO1xuXG4gICAgICAgICAgICB0b3AgLT0gaGVpZ2h0O1xuICAgICAgICAgICAgZUF0dGFjaG1lbnQudG9wID0gJ2JvdHRvbSc7XG4gICAgICAgICAgfSBlbHNlIGlmIChlQXR0YWNobWVudC50b3AgPT09ICdib3R0b20nICYmIHRvcCA8IGJvdW5kc1sxXSAmJiB0b3AgKyAoaGVpZ2h0ICogMiAtIHRhcmdldEhlaWdodCkgPD0gYm91bmRzWzNdKSB7XG4gICAgICAgICAgICB0b3AgKz0gaGVpZ2h0IC0gdGFyZ2V0SGVpZ2h0O1xuICAgICAgICAgICAgdEF0dGFjaG1lbnQudG9wID0gJ3RvcCc7XG5cbiAgICAgICAgICAgIGVBdHRhY2htZW50LnRvcCA9ICd0b3AnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0QXR0YWNobWVudC50b3AgPT09ICdtaWRkbGUnKSB7XG4gICAgICAgICAgaWYgKHRvcCArIGhlaWdodCA+IGJvdW5kc1szXSAmJiBlQXR0YWNobWVudC50b3AgPT09ICd0b3AnKSB7XG4gICAgICAgICAgICB0b3AgLT0gaGVpZ2h0O1xuICAgICAgICAgICAgZUF0dGFjaG1lbnQudG9wID0gJ2JvdHRvbSc7XG4gICAgICAgICAgfSBlbHNlIGlmICh0b3AgPCBib3VuZHNbMV0gJiYgZUF0dGFjaG1lbnQudG9wID09PSAnYm90dG9tJykge1xuICAgICAgICAgICAgdG9wICs9IGhlaWdodDtcbiAgICAgICAgICAgIGVBdHRhY2htZW50LnRvcCA9ICd0b3AnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoY2hhbmdlQXR0YWNoWCA9PT0gJ3RhcmdldCcgfHwgY2hhbmdlQXR0YWNoWCA9PT0gJ2JvdGgnKSB7XG4gICAgICAgIGlmIChsZWZ0IDwgYm91bmRzWzBdICYmIHRBdHRhY2htZW50LmxlZnQgPT09ICdsZWZ0Jykge1xuICAgICAgICAgIGxlZnQgKz0gdGFyZ2V0V2lkdGg7XG4gICAgICAgICAgdEF0dGFjaG1lbnQubGVmdCA9ICdyaWdodCc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGVmdCArIHdpZHRoID4gYm91bmRzWzJdICYmIHRBdHRhY2htZW50LmxlZnQgPT09ICdyaWdodCcpIHtcbiAgICAgICAgICBsZWZ0IC09IHRhcmdldFdpZHRoO1xuICAgICAgICAgIHRBdHRhY2htZW50LmxlZnQgPSAnbGVmdCc7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGNoYW5nZUF0dGFjaFggPT09ICd0b2dldGhlcicpIHtcbiAgICAgICAgaWYgKGxlZnQgPCBib3VuZHNbMF0gJiYgdEF0dGFjaG1lbnQubGVmdCA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgaWYgKGVBdHRhY2htZW50LmxlZnQgPT09ICdyaWdodCcpIHtcbiAgICAgICAgICAgIGxlZnQgKz0gdGFyZ2V0V2lkdGg7XG4gICAgICAgICAgICB0QXR0YWNobWVudC5sZWZ0ID0gJ3JpZ2h0JztcblxuICAgICAgICAgICAgbGVmdCArPSB3aWR0aDtcbiAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAnbGVmdCc7XG4gICAgICAgICAgfSBlbHNlIGlmIChlQXR0YWNobWVudC5sZWZ0ID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgIGxlZnQgKz0gdGFyZ2V0V2lkdGg7XG4gICAgICAgICAgICB0QXR0YWNobWVudC5sZWZ0ID0gJ3JpZ2h0JztcblxuICAgICAgICAgICAgbGVmdCAtPSB3aWR0aDtcbiAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAncmlnaHQnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChsZWZ0ICsgd2lkdGggPiBib3VuZHNbMl0gJiYgdEF0dGFjaG1lbnQubGVmdCA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgIGlmIChlQXR0YWNobWVudC5sZWZ0ID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgIGxlZnQgLT0gdGFyZ2V0V2lkdGg7XG4gICAgICAgICAgICB0QXR0YWNobWVudC5sZWZ0ID0gJ2xlZnQnO1xuXG4gICAgICAgICAgICBsZWZ0IC09IHdpZHRoO1xuICAgICAgICAgICAgZUF0dGFjaG1lbnQubGVmdCA9ICdyaWdodCc7XG4gICAgICAgICAgfSBlbHNlIGlmIChlQXR0YWNobWVudC5sZWZ0ID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgICBsZWZ0IC09IHRhcmdldFdpZHRoO1xuICAgICAgICAgICAgdEF0dGFjaG1lbnQubGVmdCA9ICdsZWZ0JztcblxuICAgICAgICAgICAgbGVmdCArPSB3aWR0aDtcbiAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAnbGVmdCc7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRBdHRhY2htZW50LmxlZnQgPT09ICdjZW50ZXInKSB7XG4gICAgICAgICAgaWYgKGxlZnQgKyB3aWR0aCA+IGJvdW5kc1syXSAmJiBlQXR0YWNobWVudC5sZWZ0ID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgIGxlZnQgLT0gd2lkdGg7XG4gICAgICAgICAgICBlQXR0YWNobWVudC5sZWZ0ID0gJ3JpZ2h0JztcbiAgICAgICAgICB9IGVsc2UgaWYgKGxlZnQgPCBib3VuZHNbMF0gJiYgZUF0dGFjaG1lbnQubGVmdCA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgICAgbGVmdCArPSB3aWR0aDtcbiAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAnbGVmdCc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFuZ2VBdHRhY2hZID09PSAnZWxlbWVudCcgfHwgY2hhbmdlQXR0YWNoWSA9PT0gJ2JvdGgnKSB7XG4gICAgICAgIGlmICh0b3AgPCBib3VuZHNbMV0gJiYgZUF0dGFjaG1lbnQudG9wID09PSAnYm90dG9tJykge1xuICAgICAgICAgIHRvcCArPSBoZWlnaHQ7XG4gICAgICAgICAgZUF0dGFjaG1lbnQudG9wID0gJ3RvcCc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodG9wICsgaGVpZ2h0ID4gYm91bmRzWzNdICYmIGVBdHRhY2htZW50LnRvcCA9PT0gJ3RvcCcpIHtcbiAgICAgICAgICB0b3AgLT0gaGVpZ2h0O1xuICAgICAgICAgIGVBdHRhY2htZW50LnRvcCA9ICdib3R0b20nO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFuZ2VBdHRhY2hYID09PSAnZWxlbWVudCcgfHwgY2hhbmdlQXR0YWNoWCA9PT0gJ2JvdGgnKSB7XG4gICAgICAgIGlmIChsZWZ0IDwgYm91bmRzWzBdKSB7XG4gICAgICAgICAgaWYgKGVBdHRhY2htZW50LmxlZnQgPT09ICdyaWdodCcpIHtcbiAgICAgICAgICAgIGxlZnQgKz0gd2lkdGg7XG4gICAgICAgICAgICBlQXR0YWNobWVudC5sZWZ0ID0gJ2xlZnQnO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZUF0dGFjaG1lbnQubGVmdCA9PT0gJ2NlbnRlcicpIHtcbiAgICAgICAgICAgIGxlZnQgKz0gd2lkdGggLyAyO1xuICAgICAgICAgICAgZUF0dGFjaG1lbnQubGVmdCA9ICdsZWZ0JztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGVmdCArIHdpZHRoID4gYm91bmRzWzJdKSB7XG4gICAgICAgICAgaWYgKGVBdHRhY2htZW50LmxlZnQgPT09ICdsZWZ0Jykge1xuICAgICAgICAgICAgbGVmdCAtPSB3aWR0aDtcbiAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAncmlnaHQnO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZUF0dGFjaG1lbnQubGVmdCA9PT0gJ2NlbnRlcicpIHtcbiAgICAgICAgICAgIGxlZnQgLT0gd2lkdGggLyAyO1xuICAgICAgICAgICAgZUF0dGFjaG1lbnQubGVmdCA9ICdyaWdodCc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgcGluID09PSAnc3RyaW5nJykge1xuICAgICAgICBwaW4gPSBwaW4uc3BsaXQoJywnKS5tYXAoZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICByZXR1cm4gcC50cmltKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChwaW4gPT09IHRydWUpIHtcbiAgICAgICAgcGluID0gWyd0b3AnLCAnbGVmdCcsICdyaWdodCcsICdib3R0b20nXTtcbiAgICAgIH1cblxuICAgICAgcGluID0gcGluIHx8IFtdO1xuXG4gICAgICB2YXIgcGlubmVkID0gW107XG4gICAgICB2YXIgb29iID0gW107XG5cbiAgICAgIGlmICh0b3AgPCBib3VuZHNbMV0pIHtcbiAgICAgICAgaWYgKHBpbi5pbmRleE9mKCd0b3AnKSA+PSAwKSB7XG4gICAgICAgICAgdG9wID0gYm91bmRzWzFdO1xuICAgICAgICAgIHBpbm5lZC5wdXNoKCd0b3AnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvb2IucHVzaCgndG9wJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRvcCArIGhlaWdodCA+IGJvdW5kc1szXSkge1xuICAgICAgICBpZiAocGluLmluZGV4T2YoJ2JvdHRvbScpID49IDApIHtcbiAgICAgICAgICB0b3AgPSBib3VuZHNbM10gLSBoZWlnaHQ7XG4gICAgICAgICAgcGlubmVkLnB1c2goJ2JvdHRvbScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9vYi5wdXNoKCdib3R0b20nKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAobGVmdCA8IGJvdW5kc1swXSkge1xuICAgICAgICBpZiAocGluLmluZGV4T2YoJ2xlZnQnKSA+PSAwKSB7XG4gICAgICAgICAgbGVmdCA9IGJvdW5kc1swXTtcbiAgICAgICAgICBwaW5uZWQucHVzaCgnbGVmdCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9vYi5wdXNoKCdsZWZ0Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGxlZnQgKyB3aWR0aCA+IGJvdW5kc1syXSkge1xuICAgICAgICBpZiAocGluLmluZGV4T2YoJ3JpZ2h0JykgPj0gMCkge1xuICAgICAgICAgIGxlZnQgPSBib3VuZHNbMl0gLSB3aWR0aDtcbiAgICAgICAgICBwaW5uZWQucHVzaCgncmlnaHQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvb2IucHVzaCgncmlnaHQnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocGlubmVkLmxlbmd0aCkge1xuICAgICAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBwaW5uZWRDbGFzcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBpZiAodHlwZW9mIF90aGlzLm9wdGlvbnMucGlubmVkQ2xhc3MgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBwaW5uZWRDbGFzcyA9IF90aGlzLm9wdGlvbnMucGlubmVkQ2xhc3M7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBpbm5lZENsYXNzID0gX3RoaXMuZ2V0Q2xhc3MoJ3Bpbm5lZCcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGFkZENsYXNzZXMucHVzaChwaW5uZWRDbGFzcyk7XG4gICAgICAgICAgcGlubmVkLmZvckVhY2goZnVuY3Rpb24gKHNpZGUpIHtcbiAgICAgICAgICAgIGFkZENsYXNzZXMucHVzaChwaW5uZWRDbGFzcyArICctJyArIHNpZGUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KSgpO1xuICAgICAgfVxuXG4gICAgICBpZiAob29iLmxlbmd0aCkge1xuICAgICAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBvb2JDbGFzcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBpZiAodHlwZW9mIF90aGlzLm9wdGlvbnMub3V0T2ZCb3VuZHNDbGFzcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIG9vYkNsYXNzID0gX3RoaXMub3B0aW9ucy5vdXRPZkJvdW5kc0NsYXNzO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvb2JDbGFzcyA9IF90aGlzLmdldENsYXNzKCdvdXQtb2YtYm91bmRzJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYWRkQ2xhc3Nlcy5wdXNoKG9vYkNsYXNzKTtcbiAgICAgICAgICBvb2IuZm9yRWFjaChmdW5jdGlvbiAoc2lkZSkge1xuICAgICAgICAgICAgYWRkQ2xhc3Nlcy5wdXNoKG9vYkNsYXNzICsgJy0nICsgc2lkZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pKCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChwaW5uZWQuaW5kZXhPZignbGVmdCcpID49IDAgfHwgcGlubmVkLmluZGV4T2YoJ3JpZ2h0JykgPj0gMCkge1xuICAgICAgICBlQXR0YWNobWVudC5sZWZ0ID0gdEF0dGFjaG1lbnQubGVmdCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKHBpbm5lZC5pbmRleE9mKCd0b3AnKSA+PSAwIHx8IHBpbm5lZC5pbmRleE9mKCdib3R0b20nKSA+PSAwKSB7XG4gICAgICAgIGVBdHRhY2htZW50LnRvcCA9IHRBdHRhY2htZW50LnRvcCA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAodEF0dGFjaG1lbnQudG9wICE9PSB0YXJnZXRBdHRhY2htZW50LnRvcCB8fCB0QXR0YWNobWVudC5sZWZ0ICE9PSB0YXJnZXRBdHRhY2htZW50LmxlZnQgfHwgZUF0dGFjaG1lbnQudG9wICE9PSBfdGhpcy5hdHRhY2htZW50LnRvcCB8fCBlQXR0YWNobWVudC5sZWZ0ICE9PSBfdGhpcy5hdHRhY2htZW50LmxlZnQpIHtcbiAgICAgICAgX3RoaXMudXBkYXRlQXR0YWNoQ2xhc3NlcyhlQXR0YWNobWVudCwgdEF0dGFjaG1lbnQpO1xuICAgICAgICBfdGhpcy50cmlnZ2VyKCd1cGRhdGUnLCB7XG4gICAgICAgICAgYXR0YWNobWVudDogZUF0dGFjaG1lbnQsXG4gICAgICAgICAgdGFyZ2V0QXR0YWNobWVudDogdEF0dGFjaG1lbnRcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBkZWZlcihmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIShfdGhpcy5vcHRpb25zLmFkZFRhcmdldENsYXNzZXMgPT09IGZhbHNlKSkge1xuICAgICAgICB1cGRhdGVDbGFzc2VzKF90aGlzLnRhcmdldCwgYWRkQ2xhc3NlcywgYWxsQ2xhc3Nlcyk7XG4gICAgICB9XG4gICAgICB1cGRhdGVDbGFzc2VzKF90aGlzLmVsZW1lbnQsIGFkZENsYXNzZXMsIGFsbENsYXNzZXMpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHsgdG9wOiB0b3AsIGxlZnQ6IGxlZnQgfTtcbiAgfVxufSk7XG4vKiBnbG9iYWxzIFRldGhlckJhc2UgKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX1RldGhlckJhc2UkVXRpbHMgPSBUZXRoZXJCYXNlLlV0aWxzO1xudmFyIGdldEJvdW5kcyA9IF9UZXRoZXJCYXNlJFV0aWxzLmdldEJvdW5kcztcbnZhciB1cGRhdGVDbGFzc2VzID0gX1RldGhlckJhc2UkVXRpbHMudXBkYXRlQ2xhc3NlcztcbnZhciBkZWZlciA9IF9UZXRoZXJCYXNlJFV0aWxzLmRlZmVyO1xuXG5UZXRoZXJCYXNlLm1vZHVsZXMucHVzaCh7XG4gIHBvc2l0aW9uOiBmdW5jdGlvbiBwb3NpdGlvbihfcmVmKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciB0b3AgPSBfcmVmLnRvcDtcbiAgICB2YXIgbGVmdCA9IF9yZWYubGVmdDtcblxuICAgIHZhciBfY2FjaGUgPSB0aGlzLmNhY2hlKCdlbGVtZW50LWJvdW5kcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBnZXRCb3VuZHMoX3RoaXMuZWxlbWVudCk7XG4gICAgfSk7XG5cbiAgICB2YXIgaGVpZ2h0ID0gX2NhY2hlLmhlaWdodDtcbiAgICB2YXIgd2lkdGggPSBfY2FjaGUud2lkdGg7XG5cbiAgICB2YXIgdGFyZ2V0UG9zID0gdGhpcy5nZXRUYXJnZXRCb3VuZHMoKTtcblxuICAgIHZhciBib3R0b20gPSB0b3AgKyBoZWlnaHQ7XG4gICAgdmFyIHJpZ2h0ID0gbGVmdCArIHdpZHRoO1xuXG4gICAgdmFyIGFidXR0ZWQgPSBbXTtcbiAgICBpZiAodG9wIDw9IHRhcmdldFBvcy5ib3R0b20gJiYgYm90dG9tID49IHRhcmdldFBvcy50b3ApIHtcbiAgICAgIFsnbGVmdCcsICdyaWdodCddLmZvckVhY2goZnVuY3Rpb24gKHNpZGUpIHtcbiAgICAgICAgdmFyIHRhcmdldFBvc1NpZGUgPSB0YXJnZXRQb3Nbc2lkZV07XG4gICAgICAgIGlmICh0YXJnZXRQb3NTaWRlID09PSBsZWZ0IHx8IHRhcmdldFBvc1NpZGUgPT09IHJpZ2h0KSB7XG4gICAgICAgICAgYWJ1dHRlZC5wdXNoKHNpZGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAobGVmdCA8PSB0YXJnZXRQb3MucmlnaHQgJiYgcmlnaHQgPj0gdGFyZ2V0UG9zLmxlZnQpIHtcbiAgICAgIFsndG9wJywgJ2JvdHRvbSddLmZvckVhY2goZnVuY3Rpb24gKHNpZGUpIHtcbiAgICAgICAgdmFyIHRhcmdldFBvc1NpZGUgPSB0YXJnZXRQb3Nbc2lkZV07XG4gICAgICAgIGlmICh0YXJnZXRQb3NTaWRlID09PSB0b3AgfHwgdGFyZ2V0UG9zU2lkZSA9PT0gYm90dG9tKSB7XG4gICAgICAgICAgYWJ1dHRlZC5wdXNoKHNpZGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB2YXIgYWxsQ2xhc3NlcyA9IFtdO1xuICAgIHZhciBhZGRDbGFzc2VzID0gW107XG5cbiAgICB2YXIgc2lkZXMgPSBbJ2xlZnQnLCAndG9wJywgJ3JpZ2h0JywgJ2JvdHRvbSddO1xuICAgIGFsbENsYXNzZXMucHVzaCh0aGlzLmdldENsYXNzKCdhYnV0dGVkJykpO1xuICAgIHNpZGVzLmZvckVhY2goZnVuY3Rpb24gKHNpZGUpIHtcbiAgICAgIGFsbENsYXNzZXMucHVzaChfdGhpcy5nZXRDbGFzcygnYWJ1dHRlZCcpICsgJy0nICsgc2lkZSk7XG4gICAgfSk7XG5cbiAgICBpZiAoYWJ1dHRlZC5sZW5ndGgpIHtcbiAgICAgIGFkZENsYXNzZXMucHVzaCh0aGlzLmdldENsYXNzKCdhYnV0dGVkJykpO1xuICAgIH1cblxuICAgIGFidXR0ZWQuZm9yRWFjaChmdW5jdGlvbiAoc2lkZSkge1xuICAgICAgYWRkQ2xhc3Nlcy5wdXNoKF90aGlzLmdldENsYXNzKCdhYnV0dGVkJykgKyAnLScgKyBzaWRlKTtcbiAgICB9KTtcblxuICAgIGRlZmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghKF90aGlzLm9wdGlvbnMuYWRkVGFyZ2V0Q2xhc3NlcyA9PT0gZmFsc2UpKSB7XG4gICAgICAgIHVwZGF0ZUNsYXNzZXMoX3RoaXMudGFyZ2V0LCBhZGRDbGFzc2VzLCBhbGxDbGFzc2VzKTtcbiAgICAgIH1cbiAgICAgIHVwZGF0ZUNsYXNzZXMoX3RoaXMuZWxlbWVudCwgYWRkQ2xhc3NlcywgYWxsQ2xhc3Nlcyk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufSk7XG4vKiBnbG9iYWxzIFRldGhlckJhc2UgKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX3NsaWNlZFRvQXJyYXkgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBzbGljZUl0ZXJhdG9yKGFyciwgaSkgeyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVsncmV0dXJuJ10pIF9pWydyZXR1cm4nXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH0gcmV0dXJuIGZ1bmN0aW9uIChhcnIsIGkpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyByZXR1cm4gYXJyOyB9IGVsc2UgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkgeyByZXR1cm4gc2xpY2VJdGVyYXRvcihhcnIsIGkpOyB9IGVsc2UgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlJyk7IH0gfTsgfSkoKTtcblxuVGV0aGVyQmFzZS5tb2R1bGVzLnB1c2goe1xuICBwb3NpdGlvbjogZnVuY3Rpb24gcG9zaXRpb24oX3JlZikge1xuICAgIHZhciB0b3AgPSBfcmVmLnRvcDtcbiAgICB2YXIgbGVmdCA9IF9yZWYubGVmdDtcblxuICAgIGlmICghdGhpcy5vcHRpb25zLnNoaWZ0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHNoaWZ0ID0gdGhpcy5vcHRpb25zLnNoaWZ0O1xuICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLnNoaWZ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBzaGlmdCA9IHRoaXMub3B0aW9ucy5zaGlmdC5jYWxsKHRoaXMsIHsgdG9wOiB0b3AsIGxlZnQ6IGxlZnQgfSk7XG4gICAgfVxuXG4gICAgdmFyIHNoaWZ0VG9wID0gdW5kZWZpbmVkLFxuICAgICAgICBzaGlmdExlZnQgPSB1bmRlZmluZWQ7XG4gICAgaWYgKHR5cGVvZiBzaGlmdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHNoaWZ0ID0gc2hpZnQuc3BsaXQoJyAnKTtcbiAgICAgIHNoaWZ0WzFdID0gc2hpZnRbMV0gfHwgc2hpZnRbMF07XG5cbiAgICAgIHZhciBfc2hpZnQgPSBzaGlmdDtcblxuICAgICAgdmFyIF9zaGlmdDIgPSBfc2xpY2VkVG9BcnJheShfc2hpZnQsIDIpO1xuXG4gICAgICBzaGlmdFRvcCA9IF9zaGlmdDJbMF07XG4gICAgICBzaGlmdExlZnQgPSBfc2hpZnQyWzFdO1xuXG4gICAgICBzaGlmdFRvcCA9IHBhcnNlRmxvYXQoc2hpZnRUb3AsIDEwKTtcbiAgICAgIHNoaWZ0TGVmdCA9IHBhcnNlRmxvYXQoc2hpZnRMZWZ0LCAxMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNoaWZ0VG9wID0gc2hpZnQudG9wO1xuICAgICAgc2hpZnRMZWZ0ID0gc2hpZnQubGVmdDtcbiAgICB9XG5cbiAgICB0b3AgKz0gc2hpZnRUb3A7XG4gICAgbGVmdCArPSBzaGlmdExlZnQ7XG5cbiAgICByZXR1cm4geyB0b3A6IHRvcCwgbGVmdDogbGVmdCB9O1xuICB9XG59KTtcbnJldHVybiBUZXRoZXI7XG5cbn0pKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
