/*!
 * ET-Final
 * Emerging Technologies Final
 * 
 * @author Jared and Bridgett
 * @version 1.0.0
 * Copyright 2016. MIT licensed.
 */
!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e(require,exports,module):t.Tether=e()}(this,function(t,e,o){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t){var e=t.getBoundingClientRect(),o={};for(var i in e)o[i]=e[i];if(t.ownerDocument!==document){var r=t.ownerDocument.defaultView.frameElement;if(r){var s=n(r);o.top+=s.top,o.bottom+=s.top,o.left+=s.left,o.right+=s.left}}return o}function r(t){var e=getComputedStyle(t)||{},o=e.position,i=[];if("fixed"===o)return[t];for(var n=t;(n=n.parentNode)&&n&&1===n.nodeType;){var r=void 0;try{r=getComputedStyle(n)}catch(s){}if("undefined"==typeof r||null===r)return i.push(n),i;var a=r,f=a.overflow,l=a.overflowX,h=a.overflowY;/(auto|scroll)/.test(f+h+l)&&("absolute"!==o||["relative","absolute","fixed"].indexOf(r.position)>=0)&&i.push(n)}return i.push(t.ownerDocument.body),t.ownerDocument!==document&&i.push(t.ownerDocument.defaultView),i}function s(){A&&document.body.removeChild(A),A=null}function a(t){var e=void 0;t===document?(e=document,t=document.documentElement):e=t.ownerDocument;var o=e.documentElement,i=n(t),r=P();return i.top-=r.top,i.left-=r.left,"undefined"==typeof i.width&&(i.width=document.body.scrollWidth-i.left-i.right),"undefined"==typeof i.height&&(i.height=document.body.scrollHeight-i.top-i.bottom),i.top=i.top-o.clientTop,i.left=i.left-o.clientLeft,i.right=e.body.clientWidth-i.width-i.left,i.bottom=e.body.clientHeight-i.height-i.top,i}function f(t){return t.offsetParent||document.documentElement}function l(){if(M)return M;var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");h(e.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);var o=t.offsetWidth;e.style.overflow="scroll";var i=t.offsetWidth;o===i&&(i=e.clientWidth),document.body.removeChild(e);var n=o-i;return M={width:n,height:n}}function h(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=[];return Array.prototype.push.apply(e,arguments),e.slice(1).forEach(function(e){if(e)for(var o in e)({}).hasOwnProperty.call(e,o)&&(t[o]=e[o])}),t}function d(t,e){if("undefined"!=typeof t.classList)e.split(" ").forEach(function(e){e.trim()&&t.classList.remove(e)});else{var o=new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi"),i=c(t).replace(o," ");g(t,i)}}function u(t,e){if("undefined"!=typeof t.classList)e.split(" ").forEach(function(e){e.trim()&&t.classList.add(e)});else{d(t,e);var o=c(t)+(" "+e);g(t,o)}}function p(t,e){if("undefined"!=typeof t.classList)return t.classList.contains(e);var o=c(t);return new RegExp("(^| )"+e+"( |$)","gi").test(o)}function c(t){return t.className instanceof t.ownerDocument.defaultView.SVGAnimatedString?t.className.baseVal:t.className}function g(t,e){t.setAttribute("class",e)}function m(t,e,o){o.forEach(function(o){e.indexOf(o)===-1&&p(t,o)&&d(t,o)}),e.forEach(function(e){p(t,e)||u(t,e)})}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function y(t,e){var o=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return t+o>=e&&e>=t-o}function b(){return"undefined"!=typeof performance&&"undefined"!=typeof performance.now?performance.now():+new Date}function w(){for(var t={top:0,left:0},e=arguments.length,o=Array(e),i=0;i<e;i++)o[i]=arguments[i];return o.forEach(function(e){var o=e.top,i=e.left;"string"==typeof o&&(o=parseFloat(o,10)),"string"==typeof i&&(i=parseFloat(i,10)),t.top+=o,t.left+=i}),t}function C(t,e){return"string"==typeof t.left&&t.left.indexOf("%")!==-1&&(t.left=parseFloat(t.left,10)/100*e.width),"string"==typeof t.top&&t.top.indexOf("%")!==-1&&(t.top=parseFloat(t.top,10)/100*e.height),t}function O(t,e){return"scrollParent"===e?e=t.scrollParents[0]:"window"===e&&(e=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),e===document&&(e=e.documentElement),"undefined"!=typeof e.nodeType&&!function(){var t=e,o=a(e),i=o,n=getComputedStyle(e);if(e=[i.left,i.top,o.width+i.left,o.height+i.top],t.ownerDocument!==document){var r=t.ownerDocument.defaultView;e[0]+=r.pageXOffset,e[1]+=r.pageYOffset,e[2]+=r.pageXOffset,e[3]+=r.pageYOffset}G.forEach(function(t,o){t=t[0].toUpperCase()+t.substr(1),"Top"===t||"Left"===t?e[o]+=parseFloat(n["border"+t+"Width"]):e[o]-=parseFloat(n["border"+t+"Width"])})}(),e}var E=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),x=void 0;"undefined"==typeof x&&(x={modules:[]});var A=null,T=function(){var t=0;return function(){return++t}}(),S={},P=function(){var t=A;t||(t=document.createElement("div"),t.setAttribute("data-tether-id",T()),h(t.style,{top:0,left:0,position:"absolute"}),document.body.appendChild(t),A=t);var e=t.getAttribute("data-tether-id");return"undefined"==typeof S[e]&&(S[e]=n(t),k(function(){delete S[e]})),S[e]},M=null,W=[],k=function(t){W.push(t)},_=function(){for(var t=void 0;t=W.pop();)t()},B=function(){function t(){i(this,t)}return E(t,[{key:"on",value:function(t,e,o){var i=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];"undefined"==typeof this.bindings&&(this.bindings={}),"undefined"==typeof this.bindings[t]&&(this.bindings[t]=[]),this.bindings[t].push({handler:e,ctx:o,once:i})}},{key:"once",value:function(t,e,o){this.on(t,e,o,!0)}},{key:"off",value:function(t,e){if("undefined"!=typeof this.bindings&&"undefined"!=typeof this.bindings[t])if("undefined"==typeof e)delete this.bindings[t];else for(var o=0;o<this.bindings[t].length;)this.bindings[t][o].handler===e?this.bindings[t].splice(o,1):++o}},{key:"trigger",value:function(t){if("undefined"!=typeof this.bindings&&this.bindings[t]){for(var e=0,o=arguments.length,i=Array(o>1?o-1:0),n=1;n<o;n++)i[n-1]=arguments[n];for(;e<this.bindings[t].length;){var r=this.bindings[t][e],s=r.handler,a=r.ctx,f=r.once,l=a;"undefined"==typeof l&&(l=this),s.apply(l,i),f?this.bindings[t].splice(e,1):++e}}}}]),t}();x.Utils={getActualBoundingClientRect:n,getScrollParents:r,getBounds:a,getOffsetParent:f,extend:h,addClass:u,removeClass:d,hasClass:p,updateClasses:m,defer:k,flush:_,uniqueId:T,Evented:B,getScrollBarSize:l,removeUtilElements:s};var z=function(){function t(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(f){n=!0,r=f}finally{try{!i&&a["return"]&&a["return"]()}finally{if(n)throw r}}return o}return function(e,o){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),E=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),j=function(t,e,o){for(var i=!0;i;){var n=t,r=e,s=o;i=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,r);if(void 0!==a){if("value"in a)return a.value;var f=a.get;if(void 0===f)return;return f.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;t=l,e=r,o=s,i=!0,a=l=void 0}};if("undefined"==typeof x)throw new Error("You must include the utils.js file before tether.js");var Y=x.Utils,r=Y.getScrollParents,a=Y.getBounds,f=Y.getOffsetParent,h=Y.extend,u=Y.addClass,d=Y.removeClass,m=Y.updateClasses,k=Y.defer,_=Y.flush,l=Y.getScrollBarSize,s=Y.removeUtilElements,L=function(){if("undefined"==typeof document)return"";for(var t=document.createElement("div"),e=["transform","WebkitTransform","OTransform","MozTransform","msTransform"],o=0;o<e.length;++o){var i=e[o];if(void 0!==t.style[i])return i}}(),D=[],X=function(){D.forEach(function(t){t.position(!1)}),_()};!function(){var t=null,e=null,o=null,i=function n(){return"undefined"!=typeof e&&e>16?(e=Math.min(e-16,250),void(o=setTimeout(n,250))):void("undefined"!=typeof t&&b()-t<10||(null!=o&&(clearTimeout(o),o=null),t=b(),X(),e=b()-t))};"undefined"!=typeof window&&"undefined"!=typeof window.addEventListener&&["resize","scroll","touchmove"].forEach(function(t){window.addEventListener(t,i)})}();var F={center:"center",left:"right",right:"left"},H={middle:"middle",top:"bottom",bottom:"top"},N={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},U=function(t,e){var o=t.left,i=t.top;return"auto"===o&&(o=F[e.left]),"auto"===i&&(i=H[e.top]),{left:o,top:i}},V=function(t){var e=t.left,o=t.top;return"undefined"!=typeof N[t.left]&&(e=N[t.left]),"undefined"!=typeof N[t.top]&&(o=N[t.top]),{left:e,top:o}},R=function(t){var e=t.split(" "),o=z(e,2),i=o[0],n=o[1];return{top:i,left:n}},q=R,I=function(t){function e(t){var o=this;i(this,e),j(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.position=this.position.bind(this),D.push(this),this.history=[],this.setOptions(t,!1),x.modules.forEach(function(t){"undefined"!=typeof t.initialize&&t.initialize.call(o)}),this.position()}return v(e,t),E(e,[{key:"getClass",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],e=this.options.classes;return"undefined"!=typeof e&&e[t]?this.options.classes[t]:this.options.classPrefix?this.options.classPrefix+"-"+t:t}},{key:"setOptions",value:function(t){var e=this,o=arguments.length<=1||void 0===arguments[1]||arguments[1],i={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"};this.options=h(i,t);var n=this.options,s=n.element,a=n.target,f=n.targetModifier;if(this.element=s,this.target=a,this.targetModifier=f,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach(function(t){if("undefined"==typeof e[t])throw new Error("Tether Error: Both element and target must be defined");"undefined"!=typeof e[t].jquery?e[t]=e[t][0]:"string"==typeof e[t]&&(e[t]=document.querySelector(e[t]))}),u(this.element,this.getClass("element")),this.options.addTargetClasses!==!1&&u(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=q(this.options.targetAttachment),this.attachment=q(this.options.attachment),this.offset=R(this.options.offset),this.targetOffset=R(this.options.targetOffset),"undefined"!=typeof this.scrollParents&&this.disable(),"scroll-handle"===this.targetModifier?this.scrollParents=[this.target]:this.scrollParents=r(this.target),this.options.enabled!==!1&&this.enable(o)}},{key:"getTargetBounds",value:function(){if("undefined"==typeof this.targetModifier)return a(this.target);if("visible"===this.targetModifier){if(this.target===document.body)return{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth};var t=a(this.target),e={height:t.height,width:t.width,top:t.top,left:t.left};return e.height=Math.min(e.height,t.height-(pageYOffset-t.top)),e.height=Math.min(e.height,t.height-(t.top+t.height-(pageYOffset+innerHeight))),e.height=Math.min(innerHeight,e.height),e.height-=2,e.width=Math.min(e.width,t.width-(pageXOffset-t.left)),e.width=Math.min(e.width,t.width-(t.left+t.width-(pageXOffset+innerWidth))),e.width=Math.min(innerWidth,e.width),e.width-=2,e.top<pageYOffset&&(e.top=pageYOffset),e.left<pageXOffset&&(e.left=pageXOffset),e}if("scroll-handle"===this.targetModifier){var t=void 0,o=this.target;o===document.body?(o=document.documentElement,t={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):t=a(o);var i=getComputedStyle(o),n=o.scrollWidth>o.clientWidth||[i.overflow,i.overflowX].indexOf("scroll")>=0||this.target!==document.body,r=0;n&&(r=15);var s=t.height-parseFloat(i.borderTopWidth)-parseFloat(i.borderBottomWidth)-r,e={width:15,height:.975*s*(s/o.scrollHeight),left:t.left+t.width-parseFloat(i.borderLeftWidth)-15},f=0;s<408&&this.target===document.body&&(f=-11e-5*Math.pow(s,2)-.00727*s+22.58),this.target!==document.body&&(e.height=Math.max(e.height,24));var l=this.target.scrollTop/(o.scrollHeight-s);return e.top=l*(s-e.height-f)+t.top+parseFloat(i.borderTopWidth),this.target===document.body&&(e.height=Math.max(e.height,24)),e}}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(t,e){return"undefined"==typeof this._cache&&(this._cache={}),"undefined"==typeof this._cache[t]&&(this._cache[t]=e.call(this)),this._cache[t]}},{key:"enable",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];this.options.addTargetClasses!==!1&&u(this.target,this.getClass("enabled")),u(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParents.forEach(function(e){e!==t.target.ownerDocument&&e.addEventListener("scroll",t.position)}),e&&this.position()}},{key:"disable",value:function(){var t=this;d(this.target,this.getClass("enabled")),d(this.element,this.getClass("enabled")),this.enabled=!1,"undefined"!=typeof this.scrollParents&&this.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.position)})}},{key:"destroy",value:function(){var t=this;this.disable(),D.forEach(function(e,o){e===t&&D.splice(o,1)}),0===D.length&&s()}},{key:"updateAttachClasses",value:function(t,e){var o=this;t=t||this.attachment,e=e||this.targetAttachment;var i=["left","top","bottom","right","middle","center"];"undefined"!=typeof this._addAttachClasses&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),"undefined"==typeof this._addAttachClasses&&(this._addAttachClasses=[]);var n=this._addAttachClasses;t.top&&n.push(this.getClass("element-attached")+"-"+t.top),t.left&&n.push(this.getClass("element-attached")+"-"+t.left),e.top&&n.push(this.getClass("target-attached")+"-"+e.top),e.left&&n.push(this.getClass("target-attached")+"-"+e.left);var r=[];i.forEach(function(t){r.push(o.getClass("element-attached")+"-"+t),r.push(o.getClass("target-attached")+"-"+t)}),k(function(){"undefined"!=typeof o._addAttachClasses&&(m(o.element,o._addAttachClasses,r),o.options.addTargetClasses!==!1&&m(o.target,o._addAttachClasses,r),delete o._addAttachClasses)})}},{key:"position",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];if(this.enabled){this.clearCache();var o=U(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,o);var i=this.cache("element-bounds",function(){return a(t.element)}),n=i.width,r=i.height;if(0===n&&0===r&&"undefined"!=typeof this.lastSize){var s=this.lastSize;n=s.width,r=s.height}else this.lastSize={width:n,height:r};var h=this.cache("target-bounds",function(){return t.getTargetBounds()}),d=h,u=C(V(this.attachment),{width:n,height:r}),p=C(V(o),d),c=C(this.offset,{width:n,height:r}),g=C(this.targetOffset,d);u=w(u,c),p=w(p,g);for(var m=h.left+p.left-u.left,v=h.top+p.top-u.top,y=0;y<x.modules.length;++y){var b=x.modules[y],O=b.position.call(this,{left:m,top:v,targetAttachment:o,targetPos:h,elementPos:i,offset:u,targetOffset:p,manualOffset:c,manualTargetOffset:g,scrollbarSize:S,attachment:this.attachment});if(O===!1)return!1;"undefined"!=typeof O&&"object"==typeof O&&(v=O.top,m=O.left)}var E={page:{top:v,left:m},viewport:{top:v-pageYOffset,bottom:pageYOffset-v-r+innerHeight,left:m-pageXOffset,right:pageXOffset-m-n+innerWidth}},A=this.target.ownerDocument,T=A.defaultView,S=void 0;return T.innerHeight>A.documentElement.clientHeight&&(S=this.cache("scrollbar-size",l),E.viewport.bottom-=S.height),T.innerWidth>A.documentElement.clientWidth&&(S=this.cache("scrollbar-size",l),E.viewport.right-=S.width),["","static"].indexOf(A.body.style.position)!==-1&&["","static"].indexOf(A.body.parentElement.style.position)!==-1||(E.page.bottom=A.body.scrollHeight-v-r,E.page.right=A.body.scrollWidth-m-n),"undefined"!=typeof this.options.optimizations&&this.options.optimizations.moveElement!==!1&&"undefined"==typeof this.targetModifier&&!function(){var e=t.cache("target-offsetparent",function(){return f(t.target)}),o=t.cache("target-offsetparent-bounds",function(){return a(e)}),i=getComputedStyle(e),n=o,r={};if(["Top","Left","Bottom","Right"].forEach(function(t){r[t.toLowerCase()]=parseFloat(i["border"+t+"Width"])}),o.right=A.body.scrollWidth-o.left-n.width+r.right,o.bottom=A.body.scrollHeight-o.top-n.height+r.bottom,E.page.top>=o.top+r.top&&E.page.bottom>=o.bottom&&E.page.left>=o.left+r.left&&E.page.right>=o.right){var s=e.scrollTop,l=e.scrollLeft;E.offset={top:E.page.top-o.top+s-r.top,left:E.page.left-o.left+l-r.left}}}(),this.move(E),this.history.unshift(E),this.history.length>3&&this.history.pop(),e&&_(),!0}}},{key:"move",value:function(t){var e=this;if("undefined"!=typeof this.element.parentNode){var o={};for(var i in t){o[i]={};for(var n in t[i]){for(var r=!1,s=0;s<this.history.length;++s){var a=this.history[s];if("undefined"!=typeof a[i]&&!y(a[i][n],t[i][n])){r=!0;break}}r||(o[i][n]=!0)}}var l={top:"",left:"",right:"",bottom:""},d=function(t,o){var i="undefined"!=typeof e.options.optimizations,n=i?e.options.optimizations.gpu:null;if(n!==!1){var r=void 0,s=void 0;if(t.top?(l.top=0,r=o.top):(l.bottom=0,r=-o.bottom),t.left?(l.left=0,s=o.left):(l.right=0,s=-o.right),window.matchMedia){var a=window.matchMedia("only screen and (min-resolution: 1.3dppx)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.3)").matches;a||(s=Math.round(s),r=Math.round(r))}l[L]="translateX("+s+"px) translateY("+r+"px)","msTransform"!==L&&(l[L]+=" translateZ(0)")}else t.top?l.top=o.top+"px":l.bottom=o.bottom+"px",t.left?l.left=o.left+"px":l.right=o.right+"px"},u=!1;if((o.page.top||o.page.bottom)&&(o.page.left||o.page.right)?(l.position="absolute",d(o.page,t.page)):(o.viewport.top||o.viewport.bottom)&&(o.viewport.left||o.viewport.right)?(l.position="fixed",d(o.viewport,t.viewport)):"undefined"!=typeof o.offset&&o.offset.top&&o.offset.left?!function(){l.position="absolute";var i=e.cache("target-offsetparent",function(){return f(e.target)});f(e.element)!==i&&k(function(){e.element.parentNode.removeChild(e.element),i.appendChild(e.element)}),d(o.offset,t.offset),u=!0}():(l.position="absolute",d({top:!0,left:!0},t.page)),!u){for(var p=!0,c=this.element.parentNode;c&&1===c.nodeType&&"BODY"!==c.tagName;){if("static"!==getComputedStyle(c).position){p=!1;break}c=c.parentNode}p||(this.element.parentNode.removeChild(this.element),this.element.ownerDocument.body.appendChild(this.element))}var g={},m=!1;for(var n in l){var v=l[n],b=this.element.style[n];b!==v&&(m=!0,g[n]=v)}m&&k(function(){h(e.element.style,g),e.trigger("repositioned")})}}}]),e}(B);I.modules=[],x.position=X;var $=h(I,x),z=function(){function t(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(f){n=!0,r=f}finally{try{!i&&a["return"]&&a["return"]()}finally{if(n)throw r}}return o}return function(e,o){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Y=x.Utils,a=Y.getBounds,h=Y.extend,m=Y.updateClasses,k=Y.defer,G=["left","top","right","bottom"];x.modules.push({position:function(t){var e=this,o=t.top,i=t.left,n=t.targetAttachment;if(!this.options.constraints)return!0;var r=this.cache("element-bounds",function(){return a(e.element)}),s=r.height,f=r.width;if(0===f&&0===s&&"undefined"!=typeof this.lastSize){var l=this.lastSize;f=l.width,s=l.height}var d=this.cache("target-bounds",function(){return e.getTargetBounds()}),u=d.height,p=d.width,c=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(t){var e=t.outOfBoundsClass,o=t.pinnedClass;e&&c.push(e),o&&c.push(o)}),c.forEach(function(t){["left","top","right","bottom"].forEach(function(e){c.push(t+"-"+e)})});var g=[],v=h({},n),y=h({},this.attachment);return this.options.constraints.forEach(function(t){var r=t.to,a=t.attachment,l=t.pin;"undefined"==typeof a&&(a="");var h=void 0,d=void 0;if(a.indexOf(" ")>=0){var c=a.split(" "),m=z(c,2);d=m[0],h=m[1]}else h=d=a;var b=O(e,r);"target"!==d&&"both"!==d||(o<b[1]&&"top"===v.top&&(o+=u,v.top="bottom"),o+s>b[3]&&"bottom"===v.top&&(o-=u,v.top="top")),"together"===d&&("top"===v.top&&("bottom"===y.top&&o<b[1]?(o+=u,v.top="bottom",o+=s,y.top="top"):"top"===y.top&&o+s>b[3]&&o-(s-u)>=b[1]&&(o-=s-u,v.top="bottom",y.top="bottom")),"bottom"===v.top&&("top"===y.top&&o+s>b[3]?(o-=u,v.top="top",o-=s,y.top="bottom"):"bottom"===y.top&&o<b[1]&&o+(2*s-u)<=b[3]&&(o+=s-u,v.top="top",y.top="top")),"middle"===v.top&&(o+s>b[3]&&"top"===y.top?(o-=s,y.top="bottom"):o<b[1]&&"bottom"===y.top&&(o+=s,y.top="top"))),"target"!==h&&"both"!==h||(i<b[0]&&"left"===v.left&&(i+=p,v.left="right"),i+f>b[2]&&"right"===v.left&&(i-=p,v.left="left")),"together"===h&&(i<b[0]&&"left"===v.left?"right"===y.left?(i+=p,v.left="right",i+=f,y.left="left"):"left"===y.left&&(i+=p,v.left="right",i-=f,y.left="right"):i+f>b[2]&&"right"===v.left?"left"===y.left?(i-=p,v.left="left",i-=f,y.left="right"):"right"===y.left&&(i-=p,v.left="left",i+=f,y.left="left"):"center"===v.left&&(i+f>b[2]&&"left"===y.left?(i-=f,y.left="right"):i<b[0]&&"right"===y.left&&(i+=f,y.left="left"))),"element"!==d&&"both"!==d||(o<b[1]&&"bottom"===y.top&&(o+=s,y.top="top"),o+s>b[3]&&"top"===y.top&&(o-=s,y.top="bottom")),"element"!==h&&"both"!==h||(i<b[0]&&("right"===y.left?(i+=f,y.left="left"):"center"===y.left&&(i+=f/2,y.left="left")),i+f>b[2]&&("left"===y.left?(i-=f,y.left="right"):"center"===y.left&&(i-=f/2,y.left="right"))),"string"==typeof l?l=l.split(",").map(function(t){return t.trim()}):l===!0&&(l=["top","left","right","bottom"]),l=l||[];var w=[],C=[];o<b[1]&&(l.indexOf("top")>=0?(o=b[1],w.push("top")):C.push("top")),o+s>b[3]&&(l.indexOf("bottom")>=0?(o=b[3]-s,w.push("bottom")):C.push("bottom")),i<b[0]&&(l.indexOf("left")>=0?(i=b[0],w.push("left")):C.push("left")),i+f>b[2]&&(l.indexOf("right")>=0?(i=b[2]-f,w.push("right")):C.push("right")),w.length&&!function(){var t=void 0;t="undefined"!=typeof e.options.pinnedClass?e.options.pinnedClass:e.getClass("pinned"),g.push(t),w.forEach(function(e){g.push(t+"-"+e)})}(),C.length&&!function(){var t=void 0;t="undefined"!=typeof e.options.outOfBoundsClass?e.options.outOfBoundsClass:e.getClass("out-of-bounds"),g.push(t),C.forEach(function(e){g.push(t+"-"+e)})}(),(w.indexOf("left")>=0||w.indexOf("right")>=0)&&(y.left=v.left=!1),(w.indexOf("top")>=0||w.indexOf("bottom")>=0)&&(y.top=v.top=!1),v.top===n.top&&v.left===n.left&&y.top===e.attachment.top&&y.left===e.attachment.left||(e.updateAttachClasses(y,v),e.trigger("update",{attachment:y,targetAttachment:v}))}),k(function(){e.options.addTargetClasses!==!1&&m(e.target,g,c),m(e.element,g,c)}),{top:o,left:i}}});var Y=x.Utils,a=Y.getBounds,m=Y.updateClasses,k=Y.defer;x.modules.push({position:function(t){var e=this,o=t.top,i=t.left,n=this.cache("element-bounds",function(){return a(e.element)}),r=n.height,s=n.width,f=this.getTargetBounds(),l=o+r,h=i+s,d=[];o<=f.bottom&&l>=f.top&&["left","right"].forEach(function(t){var e=f[t];e!==i&&e!==h||d.push(t)}),i<=f.right&&h>=f.left&&["top","bottom"].forEach(function(t){var e=f[t];e!==o&&e!==l||d.push(t)});var u=[],p=[],c=["left","top","right","bottom"];return u.push(this.getClass("abutted")),c.forEach(function(t){u.push(e.getClass("abutted")+"-"+t)}),d.length&&p.push(this.getClass("abutted")),d.forEach(function(t){p.push(e.getClass("abutted")+"-"+t)}),k(function(){e.options.addTargetClasses!==!1&&m(e.target,p,u),m(e.element,p,u)}),!0}});var z=function(){function t(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(f){n=!0,r=f}finally{try{!i&&a["return"]&&a["return"]()}finally{if(n)throw r}}return o}return function(e,o){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();return x.modules.push({position:function(t){var e=t.top,o=t.left;if(this.options.shift){var i=this.options.shift;"function"==typeof this.options.shift&&(i=this.options.shift.call(this,{top:e,left:o}));var n=void 0,r=void 0;if("string"==typeof i){i=i.split(" "),i[1]=i[1]||i[0];var s=i,a=z(s,2);n=a[0],r=a[1],n=parseFloat(n,10),r=parseFloat(r,10)}else n=i.top,r=i.left;return e+=n,o+=r,{top:e,left:o}}}}),$});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRldGhlci5qcyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImRlZmluZSIsImFtZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJyZXF1aXJlIiwiVGV0aGVyIiwidGhpcyIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJnZXRBY3R1YWxCb3VuZGluZ0NsaWVudFJlY3QiLCJub2RlIiwiYm91bmRpbmdSZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwicmVjdCIsImsiLCJvd25lckRvY3VtZW50IiwiZG9jdW1lbnQiLCJfZnJhbWVFbGVtZW50IiwiZGVmYXVsdFZpZXciLCJmcmFtZUVsZW1lbnQiLCJmcmFtZVJlY3QiLCJ0b3AiLCJib3R0b20iLCJsZWZ0IiwicmlnaHQiLCJnZXRTY3JvbGxQYXJlbnRzIiwiZWwiLCJjb21wdXRlZFN0eWxlIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInBvc2l0aW9uIiwicGFyZW50cyIsInBhcmVudCIsInBhcmVudE5vZGUiLCJub2RlVHlwZSIsInN0eWxlIiwidW5kZWZpbmVkIiwiZXJyIiwicHVzaCIsIl9zdHlsZSIsIm92ZXJmbG93Iiwib3ZlcmZsb3dYIiwib3ZlcmZsb3dZIiwidGVzdCIsImluZGV4T2YiLCJib2R5IiwicmVtb3ZlVXRpbEVsZW1lbnRzIiwiemVyb0VsZW1lbnQiLCJyZW1vdmVDaGlsZCIsImdldEJvdW5kcyIsImRvYyIsImRvY3VtZW50RWxlbWVudCIsImRvY0VsIiwiYm94Iiwib3JpZ2luIiwiZ2V0T3JpZ2luIiwid2lkdGgiLCJzY3JvbGxXaWR0aCIsImhlaWdodCIsInNjcm9sbEhlaWdodCIsImNsaWVudFRvcCIsImNsaWVudExlZnQiLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsImdldE9mZnNldFBhcmVudCIsIm9mZnNldFBhcmVudCIsImdldFNjcm9sbEJhclNpemUiLCJfc2Nyb2xsQmFyU2l6ZSIsImlubmVyIiwiY3JlYXRlRWxlbWVudCIsIm91dGVyIiwiZXh0ZW5kIiwicG9pbnRlckV2ZW50cyIsInZpc2liaWxpdHkiLCJhcHBlbmRDaGlsZCIsIndpZHRoQ29udGFpbmVkIiwib2Zmc2V0V2lkdGgiLCJ3aWR0aFNjcm9sbCIsIm91dCIsImFyZ3VtZW50cyIsImxlbmd0aCIsImFyZ3MiLCJBcnJheSIsInByb3RvdHlwZSIsImFwcGx5Iiwic2xpY2UiLCJmb3JFYWNoIiwib2JqIiwia2V5IiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwicmVtb3ZlQ2xhc3MiLCJuYW1lIiwiY2xhc3NMaXN0Iiwic3BsaXQiLCJjbHMiLCJ0cmltIiwicmVtb3ZlIiwicmVnZXgiLCJSZWdFeHAiLCJqb2luIiwiY2xhc3NOYW1lIiwiZ2V0Q2xhc3NOYW1lIiwicmVwbGFjZSIsInNldENsYXNzTmFtZSIsImFkZENsYXNzIiwiYWRkIiwiaGFzQ2xhc3MiLCJjb250YWlucyIsIlNWR0FuaW1hdGVkU3RyaW5nIiwiYmFzZVZhbCIsInNldEF0dHJpYnV0ZSIsInVwZGF0ZUNsYXNzZXMiLCJhbGwiLCJfaW5oZXJpdHMiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJPYmplY3QiLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsInZhbHVlIiwiZW51bWVyYWJsZSIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJ3aXRoaW4iLCJhIiwiYiIsImRpZmYiLCJub3ciLCJwZXJmb3JtYW5jZSIsIkRhdGUiLCJhZGRPZmZzZXQiLCJfbGVuIiwib2Zmc2V0cyIsIl9rZXkiLCJfcmVmIiwicGFyc2VGbG9hdCIsIm9mZnNldFRvUHgiLCJvZmZzZXQiLCJzaXplIiwiZ2V0Qm91bmRpbmdSZWN0IiwidGV0aGVyIiwidG8iLCJzY3JvbGxQYXJlbnRzIiwicGFnZVhPZmZzZXQiLCJwYWdlWU9mZnNldCIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsInBvcyIsIndpbiIsIkJPVU5EU19GT1JNQVQiLCJzaWRlIiwiaSIsInRvVXBwZXJDYXNlIiwic3Vic3RyIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiZGVzY3JpcHRvciIsImRlZmluZVByb3BlcnR5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiVGV0aGVyQmFzZSIsIm1vZHVsZXMiLCJ1bmlxdWVJZCIsImlkIiwiemVyb1Bvc0NhY2hlIiwiZ2V0QXR0cmlidXRlIiwiZGVmZXIiLCJkZWZlcnJlZCIsImZuIiwiZmx1c2giLCJwb3AiLCJFdmVudGVkIiwiZXZlbnQiLCJoYW5kbGVyIiwiY3R4Iiwib25jZSIsImJpbmRpbmdzIiwib24iLCJzcGxpY2UiLCJfYmluZGluZ3MkZXZlbnQkaSIsImNvbnRleHQiLCJVdGlscyIsIl9zbGljZWRUb0FycmF5Iiwic2xpY2VJdGVyYXRvciIsImFyciIsIl9hcnIiLCJfbiIsIl9kIiwiX2UiLCJfcyIsIl9pIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJuZXh0IiwiZG9uZSIsImlzQXJyYXkiLCJfZ2V0IiwiX3g2IiwiX3g3IiwiX3g4IiwiX2FnYWluIiwib2JqZWN0IiwicHJvcGVydHkiLCJyZWNlaXZlciIsIkZ1bmN0aW9uIiwiZGVzYyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImdldHRlciIsImdldCIsImdldFByb3RvdHlwZU9mIiwiRXJyb3IiLCJfVGV0aGVyQmFzZSRVdGlscyIsInRyYW5zZm9ybUtleSIsInRyYW5zZm9ybXMiLCJ0ZXRoZXJzIiwibGFzdENhbGwiLCJsYXN0RHVyYXRpb24iLCJwZW5kaW5nVGltZW91dCIsInRpY2siLCJNYXRoIiwibWluIiwic2V0VGltZW91dCIsImNsZWFyVGltZW91dCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJNSVJST1JfTFIiLCJjZW50ZXIiLCJNSVJST1JfVEIiLCJtaWRkbGUiLCJPRkZTRVRfTUFQIiwiYXV0b1RvRml4ZWRBdHRhY2htZW50IiwiYXR0YWNobWVudCIsInJlbGF0aXZlVG9BdHRhY2htZW50IiwiYXR0YWNobWVudFRvT2Zmc2V0IiwicGFyc2VPZmZzZXQiLCJfdmFsdWUkc3BsaXQiLCJfdmFsdWUkc3BsaXQyIiwicGFyc2VBdHRhY2htZW50IiwiVGV0aGVyQ2xhc3MiLCJfRXZlbnRlZCIsIm9wdGlvbnMiLCJfdGhpcyIsImJpbmQiLCJoaXN0b3J5Iiwic2V0T3B0aW9ucyIsImluaXRpYWxpemUiLCJjbGFzc2VzIiwiY2xhc3NQcmVmaXgiLCJfdGhpczIiLCJkZWZhdWx0cyIsInRhcmdldE9mZnNldCIsInRhcmdldEF0dGFjaG1lbnQiLCJfb3B0aW9ucyIsImVsZW1lbnQiLCJ0YXJnZXRNb2RpZmllciIsImpxdWVyeSIsInF1ZXJ5U2VsZWN0b3IiLCJnZXRDbGFzcyIsImFkZFRhcmdldENsYXNzZXMiLCJkaXNhYmxlIiwiZW5hYmxlZCIsImVuYWJsZSIsImJvdW5kcyIsImhhc0JvdHRvbVNjcm9sbCIsInNjcm9sbEJvdHRvbSIsImJvcmRlclRvcFdpZHRoIiwiYm9yZGVyQm90dG9tV2lkdGgiLCJib3JkZXJMZWZ0V2lkdGgiLCJmaXRBZGoiLCJwb3ciLCJtYXgiLCJzY3JvbGxQZXJjZW50YWdlIiwic2Nyb2xsVG9wIiwiX2NhY2hlIiwiX3RoaXMzIiwiX3RoaXM0IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl90aGlzNSIsImVsZW1lbnRBdHRhY2giLCJ0YXJnZXRBdHRhY2giLCJfdGhpczYiLCJzaWRlcyIsIl9hZGRBdHRhY2hDbGFzc2VzIiwiX3RoaXM3IiwiZmx1c2hDaGFuZ2VzIiwiY2xlYXJDYWNoZSIsInVwZGF0ZUF0dGFjaENsYXNzZXMiLCJlbGVtZW50UG9zIiwiY2FjaGUiLCJsYXN0U2l6ZSIsIl9sYXN0U2l6ZSIsInRhcmdldFBvcyIsImdldFRhcmdldEJvdW5kcyIsInRhcmdldFNpemUiLCJtYW51YWxPZmZzZXQiLCJtYW51YWxUYXJnZXRPZmZzZXQiLCJfbW9kdWxlMiIsInJldCIsInNjcm9sbGJhclNpemUiLCJwYWdlIiwidmlld3BvcnQiLCJwYXJlbnRFbGVtZW50Iiwib3B0aW1pemF0aW9ucyIsIm1vdmVFbGVtZW50Iiwib2Zmc2V0UG9zaXRpb24iLCJvZmZzZXRQYXJlbnRTdHlsZSIsIm9mZnNldFBhcmVudFNpemUiLCJvZmZzZXRCb3JkZXIiLCJ0b0xvd2VyQ2FzZSIsInNjcm9sbExlZnQiLCJtb3ZlIiwidW5zaGlmdCIsIl90aGlzOCIsInNhbWUiLCJ0eXBlIiwiZm91bmQiLCJwb2ludCIsImNzcyIsInRyYW5zY3JpYmUiLCJfc2FtZSIsIl9wb3MiLCJoYXNPcHRpbWl6YXRpb25zIiwiZ3B1IiwieVBvcyIsInhQb3MiLCJtYXRjaE1lZGlhIiwicmV0aW5hIiwibWF0Y2hlcyIsInJvdW5kIiwibW92ZWQiLCJvZmZzZXRQYXJlbnRJc0JvZHkiLCJjdXJyZW50Tm9kZSIsInRhZ05hbWUiLCJ3cml0ZUNTUyIsIndyaXRlIiwidmFsIiwiZWxWYWwiLCJ0cmlnZ2VyIiwiY29uc3RyYWludHMiLCJ0YXJnZXRIZWlnaHQiLCJ0YXJnZXRXaWR0aCIsImFsbENsYXNzZXMiLCJjb25zdHJhaW50Iiwib3V0T2ZCb3VuZHNDbGFzcyIsInBpbm5lZENsYXNzIiwiYWRkQ2xhc3NlcyIsInRBdHRhY2htZW50IiwiZUF0dGFjaG1lbnQiLCJwaW4iLCJjaGFuZ2VBdHRhY2hYIiwiY2hhbmdlQXR0YWNoWSIsIl9hdHRhY2htZW50JHNwbGl0IiwiX2F0dGFjaG1lbnQkc3BsaXQyIiwibWFwIiwicCIsInBpbm5lZCIsIm9vYiIsIm9vYkNsYXNzIiwiYWJ1dHRlZCIsInRhcmdldFBvc1NpZGUiLCJzaGlmdCIsInNoaWZ0VG9wIiwic2hpZnRMZWZ0IiwiX3NoaWZ0IiwiX3NoaWZ0MiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Q0FFQSxTQUFBQSxFQUFBQyxHQUNBLGtCQUFBQyxTQUFBQSxPQUFBQyxJQUNBRCxPQUFBRCxHQUNBLGdCQUFBRyxTQUNBQyxPQUFBRCxRQUFBSCxFQUFBSyxRQUFBRixRQUFBQyxRQUVBTCxFQUFBTyxPQUFBTixLQUVBTyxLQUFBLFNBQUFGLEVBQUFGLEVBQUFDLEdBRUEsWUFJQSxTQUFBSSxH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QUFBRyxFQUFBLEdBQ0FGLEVBQUFFLEVBQUEsR0FFQUgsRUFBQXBPLFdBQUFvTyxFQUFBLElBQ0FDLEVBQUFyTyxXQUFBcU8sRUFBQSxRQUVBRCxHQUFBRCxFQUFBdlYsSUFDQXlWLEVBQUFGLEVBQUFyVixJQU1BLE9BSEFGLElBQUF3VixFQUNBdFYsR0FBQXVWLEdBRUF6VixJQUFBQSxFQUFBRSxLQUFBQSxPQUdBcEIiLCJmaWxlIjoidGV0aGVyLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qISB0ZXRoZXIgMS4zLjcgKi9cblxuKGZ1bmN0aW9uKHJvb3QsIGZhY3RvcnkpIHtcbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShmYWN0b3J5KTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlKTtcbiAgfSBlbHNlIHtcbiAgICByb290LlRldGhlciA9IGZhY3RvcnkoKTtcbiAgfVxufSh0aGlzLCBmdW5jdGlvbihyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUpIHtcblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgndmFsdWUnIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbicpOyB9IH1cblxudmFyIFRldGhlckJhc2UgPSB1bmRlZmluZWQ7XG5pZiAodHlwZW9mIFRldGhlckJhc2UgPT09ICd1bmRlZmluZWQnKSB7XG4gIFRldGhlckJhc2UgPSB7IG1vZHVsZXM6IFtdIH07XG59XG5cbnZhciB6ZXJvRWxlbWVudCA9IG51bGw7XG5cbi8vIFNhbWUgYXMgbmF0aXZlIGdldEJvdW5kaW5nQ2xpZW50UmVjdCwgZXhjZXB0IGl0IHRha2VzIGludG8gYWNjb3VudCBwYXJlbnQgPGZyYW1lPiBvZmZzZXRzXG4vLyBpZiB0aGUgZWxlbWVudCBsaWVzIHdpdGhpbiBhIG5lc3RlZCBkb2N1bWVudCAoPGZyYW1lPiBvciA8aWZyYW1lPi1saWtlKS5cbmZ1bmN0aW9uIGdldEFjdHVhbEJvdW5kaW5nQ2xpZW50UmVjdChub2RlKSB7XG4gIHZhciBib3VuZGluZ1JlY3QgPSBub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gIC8vIFRoZSBvcmlnaW5hbCBvYmplY3QgcmV0dXJuZWQgYnkgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGlzIGltbXV0YWJsZSwgc28gd2UgY2xvbmUgaXRcbiAgLy8gV2UgY2FuJ3QgdXNlIGV4dGVuZCBiZWNhdXNlIHRoZSBwcm9wZXJ0aWVzIGFyZSBub3QgY29uc2lkZXJlZCBwYXJ0IG9mIHRoZSBvYmplY3QgYnkgaGFzT3duUHJvcGVydHkgaW4gSUU5XG4gIHZhciByZWN0ID0ge307XG4gIGZvciAodmFyIGsgaW4gYm91bmRpbmdSZWN0KSB7XG4gICAgcmVjdFtrXSA9IGJvdW5kaW5nUmVjdFtrXTtcbiAgfVxuXG4gIGlmIChub2RlLm93bmVyRG9jdW1lbnQgIT09IGRvY3VtZW50KSB7XG4gICAgdmFyIF9mcmFtZUVsZW1lbnQgPSBub2RlLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZnJhbWVFbGVtZW50O1xuICAgIGlmIChfZnJhbWVFbGVtZW50KSB7XG4gICAgICB2YXIgZnJhbWVSZWN0ID0gZ2V0QWN0dWFsQm91bmRpbmdDbGllbnRSZWN0KF9mcmFtZUVsZW1lbnQpO1xuICAgICAgcmVjdC50b3AgKz0gZnJhbWVSZWN0LnRvcDtcbiAgICAgIHJlY3QuYm90dG9tICs9IGZyYW1lUmVjdC50b3A7XG4gICAgICByZWN0LmxlZnQgKz0gZnJhbWVSZWN0LmxlZnQ7XG4gICAgICByZWN0LnJpZ2h0ICs9IGZyYW1lUmVjdC5sZWZ0O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZWN0O1xufVxuXG5mdW5jdGlvbiBnZXRTY3JvbGxQYXJlbnRzKGVsKSB7XG4gIC8vIEluIGZpcmVmb3ggaWYgdGhlIGVsIGlzIGluc2lkZSBhbiBpZnJhbWUgd2l0aCBkaXNwbGF5OiBub25lOyB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSgpIHdpbGwgcmV0dXJuIG51bGw7XG4gIC8vIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTU0ODM5N1xuICB2YXIgY29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWwpIHx8IHt9O1xuICB2YXIgcG9zaXRpb24gPSBjb21wdXRlZFN0eWxlLnBvc2l0aW9uO1xuICB2YXIgcGFyZW50cyA9IFtdO1xuXG4gIGlmIChwb3NpdGlvbiA9PT0gJ2ZpeGVkJykge1xuICAgIHJldHVybiBbZWxdO1xuICB9XG5cbiAgdmFyIHBhcmVudCA9IGVsO1xuICB3aGlsZSAoKHBhcmVudCA9IHBhcmVudC5wYXJlbnROb2RlKSAmJiBwYXJlbnQgJiYgcGFyZW50Lm5vZGVUeXBlID09PSAxKSB7XG4gICAgdmFyIHN0eWxlID0gdW5kZWZpbmVkO1xuICAgIHRyeSB7XG4gICAgICBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUocGFyZW50KTtcbiAgICB9IGNhdGNoIChlcnIpIHt9XG5cbiAgICBpZiAodHlwZW9mIHN0eWxlID09PSAndW5kZWZpbmVkJyB8fCBzdHlsZSA9PT0gbnVsbCkge1xuICAgICAgcGFyZW50cy5wdXNoKHBhcmVudCk7XG4gICAgICByZXR1cm4gcGFyZW50cztcbiAgICB9XG5cbiAgICB2YXIgX3N0eWxlID0gc3R5bGU7XG4gICAgdmFyIG92ZXJmbG93ID0gX3N0eWxlLm92ZXJmbG93O1xuICAgIHZhciBvdmVyZmxvd1ggPSBfc3R5bGUub3ZlcmZsb3dYO1xuICAgIHZhciBvdmVyZmxvd1kgPSBfc3R5bGUub3ZlcmZsb3dZO1xuXG4gICAgaWYgKC8oYXV0b3xzY3JvbGwpLy50ZXN0KG92ZXJmbG93ICsgb3ZlcmZsb3dZICsgb3ZlcmZsb3dYKSkge1xuICAgICAgaWYgKHBvc2l0aW9uICE9PSAnYWJzb2x1dGUnIHx8IFsncmVsYXRpdmUnLCAnYWJzb2x1dGUnLCAnZml4ZWQnXS5pbmRleE9mKHN0eWxlLnBvc2l0aW9uKSA+PSAwKSB7XG4gICAgICAgIHBhcmVudHMucHVzaChwYXJlbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHBhcmVudHMucHVzaChlbC5vd25lckRvY3VtZW50LmJvZHkpO1xuXG4gIC8vIElmIHRoZSBub2RlIGlzIHdpdGhpbiBhIGZyYW1lLCBhY2NvdW50IGZvciB0aGUgcGFyZW50IHdpbmRvdyBzY3JvbGxcbiAgaWYgKGVsLm93bmVyRG9jdW1lbnQgIT09IGRvY3VtZW50KSB7XG4gICAgcGFyZW50cy5wdXNoKGVsLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcpO1xuICB9XG5cbiAgcmV0dXJuIHBhcmVudHM7XG59XG5cbnZhciB1bmlxdWVJZCA9IChmdW5jdGlvbiAoKSB7XG4gIHZhciBpZCA9IDA7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICsraWQ7XG4gIH07XG59KSgpO1xuXG52YXIgemVyb1Bvc0NhY2hlID0ge307XG52YXIgZ2V0T3JpZ2luID0gZnVuY3Rpb24gZ2V0T3JpZ2luKCkge1xuICAvLyBnZXRCb3VuZGluZ0NsaWVudFJlY3QgaXMgdW5mb3J0dW5hdGVseSB0b28gYWNjdXJhdGUuICBJdCBpbnRyb2R1Y2VzIGEgcGl4ZWwgb3IgdHdvIG9mXG4gIC8vIGppdHRlciBhcyB0aGUgdXNlciBzY3JvbGxzIHRoYXQgbWVzc2VzIHdpdGggb3VyIGFiaWxpdHkgdG8gZGV0ZWN0IGlmIHR3byBwb3NpdGlvbnNcbiAgLy8gYXJlIGVxdWl2aWxhbnQgb3Igbm90LiAgV2UgcGxhY2UgYW4gZWxlbWVudCBhdCB0aGUgdG9wIGxlZnQgb2YgdGhlIHBhZ2UgdGhhdCB3aWxsXG4gIC8vIGdldCB0aGUgc2FtZSBqaXR0ZXIsIHNvIHdlIGNhbiBjYW5jZWwgdGhlIHR3byBvdXQuXG4gIHZhciBub2RlID0gemVyb0VsZW1lbnQ7XG4gIGlmICghbm9kZSkge1xuICAgIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBub2RlLnNldEF0dHJpYnV0ZSgnZGF0YS10ZXRoZXItaWQnLCB1bmlxdWVJZCgpKTtcbiAgICBleHRlbmQobm9kZS5zdHlsZSwge1xuICAgICAgdG9wOiAwLFxuICAgICAgbGVmdDogMCxcbiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnXG4gICAgfSk7XG5cbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG5vZGUpO1xuXG4gICAgemVyb0VsZW1lbnQgPSBub2RlO1xuICB9XG5cbiAgdmFyIGlkID0gbm9kZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGV0aGVyLWlkJyk7XG4gIGlmICh0eXBlb2YgemVyb1Bvc0NhY2hlW2lkXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB6ZXJvUG9zQ2FjaGVbaWRdID0gZ2V0QWN0dWFsQm91bmRpbmdDbGllbnRSZWN0KG5vZGUpO1xuXG4gICAgLy8gQ2xlYXIgdGhlIGNhY2hlIHdoZW4gdGhpcyBwb3NpdGlvbiBjYWxsIGlzIGRvbmVcbiAgICBkZWZlcihmdW5jdGlvbiAoKSB7XG4gICAgICBkZWxldGUgemVyb1Bvc0NhY2hlW2lkXTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiB6ZXJvUG9zQ2FjaGVbaWRdO1xufTtcblxuZnVuY3Rpb24gcmVtb3ZlVXRpbEVsZW1lbnRzKCkge1xuICBpZiAoemVyb0VsZW1lbnQpIHtcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHplcm9FbGVtZW50KTtcbiAgfVxuICB6ZXJvRWxlbWVudCA9IG51bGw7XG59O1xuXG5mdW5jdGlvbiBnZXRCb3VuZHMoZWwpIHtcbiAgdmFyIGRvYyA9IHVuZGVmaW5lZDtcbiAgaWYgKGVsID09PSBkb2N1bWVudCkge1xuICAgIGRvYyA9IGRvY3VtZW50O1xuICAgIGVsID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICB9IGVsc2Uge1xuICAgIGRvYyA9IGVsLm93bmVyRG9jdW1lbnQ7XG4gIH1cblxuICB2YXIgZG9jRWwgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuXG4gIHZhciBib3ggPSBnZXRBY3R1YWxCb3VuZGluZ0NsaWVudFJlY3QoZWwpO1xuXG4gIHZhciBvcmlnaW4gPSBnZXRPcmlnaW4oKTtcblxuICBib3gudG9wIC09IG9yaWdpbi50b3A7XG4gIGJveC5sZWZ0IC09IG9yaWdpbi5sZWZ0O1xuXG4gIGlmICh0eXBlb2YgYm94LndpZHRoID09PSAndW5kZWZpbmVkJykge1xuICAgIGJveC53aWR0aCA9IGRvY3VtZW50LmJvZHkuc2Nyb2xsV2lkdGggLSBib3gubGVmdCAtIGJveC5yaWdodDtcbiAgfVxuICBpZiAodHlwZW9mIGJveC5oZWlnaHQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgYm94LmhlaWdodCA9IGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0IC0gYm94LnRvcCAtIGJveC5ib3R0b207XG4gIH1cblxuICBib3gudG9wID0gYm94LnRvcCAtIGRvY0VsLmNsaWVudFRvcDtcbiAgYm94LmxlZnQgPSBib3gubGVmdCAtIGRvY0VsLmNsaWVudExlZnQ7XG4gIGJveC5yaWdodCA9IGRvYy5ib2R5LmNsaWVudFdpZHRoIC0gYm94LndpZHRoIC0gYm94LmxlZnQ7XG4gIGJveC5ib3R0b20gPSBkb2MuYm9keS5jbGllbnRIZWlnaHQgLSBib3guaGVpZ2h0IC0gYm94LnRvcDtcblxuICByZXR1cm4gYm94O1xufVxuXG5mdW5jdGlvbiBnZXRPZmZzZXRQYXJlbnQoZWwpIHtcbiAgcmV0dXJuIGVsLm9mZnNldFBhcmVudCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG59XG5cbnZhciBfc2Nyb2xsQmFyU2l6ZSA9IG51bGw7XG5mdW5jdGlvbiBnZXRTY3JvbGxCYXJTaXplKCkge1xuICBpZiAoX3Njcm9sbEJhclNpemUpIHtcbiAgICByZXR1cm4gX3Njcm9sbEJhclNpemU7XG4gIH1cbiAgdmFyIGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGlubmVyLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICBpbm5lci5zdHlsZS5oZWlnaHQgPSAnMjAwcHgnO1xuXG4gIHZhciBvdXRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBleHRlbmQob3V0ZXIuc3R5bGUsIHtcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICB0b3A6IDAsXG4gICAgbGVmdDogMCxcbiAgICBwb2ludGVyRXZlbnRzOiAnbm9uZScsXG4gICAgdmlzaWJpbGl0eTogJ2hpZGRlbicsXG4gICAgd2lkdGg6ICcyMDBweCcsXG4gICAgaGVpZ2h0OiAnMTUwcHgnLFxuICAgIG92ZXJmbG93OiAnaGlkZGVuJ1xuICB9KTtcblxuICBvdXRlci5hcHBlbmRDaGlsZChpbm5lcik7XG5cbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdXRlcik7XG5cbiAgdmFyIHdpZHRoQ29udGFpbmVkID0gaW5uZXIub2Zmc2V0V2lkdGg7XG4gIG91dGVyLnN0eWxlLm92ZXJmbG93ID0gJ3Njcm9sbCc7XG4gIHZhciB3aWR0aFNjcm9sbCA9IGlubmVyLm9mZnNldFdpZHRoO1xuXG4gIGlmICh3aWR0aENvbnRhaW5lZCA9PT0gd2lkdGhTY3JvbGwpIHtcbiAgICB3aWR0aFNjcm9sbCA9IG91dGVyLmNsaWVudFdpZHRoO1xuICB9XG5cbiAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChvdXRlcik7XG5cbiAgdmFyIHdpZHRoID0gd2lkdGhDb250YWluZWQgLSB3aWR0aFNjcm9sbDtcblxuICBfc2Nyb2xsQmFyU2l6ZSA9IHsgd2lkdGg6IHdpZHRoLCBoZWlnaHQ6IHdpZHRoIH07XG4gIHJldHVybiBfc2Nyb2xsQmFyU2l6ZTtcbn1cblxuZnVuY3Rpb24gZXh0ZW5kKCkge1xuICB2YXIgb3V0ID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMF07XG5cbiAgdmFyIGFyZ3MgPSBbXTtcblxuICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShhcmdzLCBhcmd1bWVudHMpO1xuXG4gIGFyZ3Muc2xpY2UoMSkuZm9yRWFjaChmdW5jdGlvbiAob2JqKSB7XG4gICAgaWYgKG9iaikge1xuICAgICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgICBpZiAoKHt9KS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgICAgIG91dFtrZXldID0gb2JqW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBvdXQ7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsLCBuYW1lKSB7XG4gIGlmICh0eXBlb2YgZWwuY2xhc3NMaXN0ICE9PSAndW5kZWZpbmVkJykge1xuICAgIG5hbWUuc3BsaXQoJyAnKS5mb3JFYWNoKGZ1bmN0aW9uIChjbHMpIHtcbiAgICAgIGlmIChjbHMudHJpbSgpKSB7XG4gICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKCcoXnwgKScgKyBuYW1lLnNwbGl0KCcgJykuam9pbignfCcpICsgJyggfCQpJywgJ2dpJyk7XG4gICAgdmFyIGNsYXNzTmFtZSA9IGdldENsYXNzTmFtZShlbCkucmVwbGFjZShyZWdleCwgJyAnKTtcbiAgICBzZXRDbGFzc05hbWUoZWwsIGNsYXNzTmFtZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gYWRkQ2xhc3MoZWwsIG5hbWUpIHtcbiAgaWYgKHR5cGVvZiBlbC5jbGFzc0xpc3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbmFtZS5zcGxpdCgnICcpLmZvckVhY2goZnVuY3Rpb24gKGNscykge1xuICAgICAgaWYgKGNscy50cmltKCkpIHtcbiAgICAgICAgZWwuY2xhc3NMaXN0LmFkZChjbHMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHJlbW92ZUNsYXNzKGVsLCBuYW1lKTtcbiAgICB2YXIgY2xzID0gZ2V0Q2xhc3NOYW1lKGVsKSArICgnICcgKyBuYW1lKTtcbiAgICBzZXRDbGFzc05hbWUoZWwsIGNscyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFzQ2xhc3MoZWwsIG5hbWUpIHtcbiAgaWYgKHR5cGVvZiBlbC5jbGFzc0xpc3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIGVsLmNsYXNzTGlzdC5jb250YWlucyhuYW1lKTtcbiAgfVxuICB2YXIgY2xhc3NOYW1lID0gZ2V0Q2xhc3NOYW1lKGVsKTtcbiAgcmV0dXJuIG5ldyBSZWdFeHAoJyhefCApJyArIG5hbWUgKyAnKCB8JCknLCAnZ2knKS50ZXN0KGNsYXNzTmFtZSk7XG59XG5cbmZ1bmN0aW9uIGdldENsYXNzTmFtZShlbCkge1xuICAvLyBDYW4ndCB1c2UganVzdCBTVkdBbmltYXRlZFN0cmluZyBoZXJlIHNpbmNlIG5vZGVzIHdpdGhpbiBhIEZyYW1lIGluIElFIGhhdmVcbiAgLy8gY29tcGxldGVseSBzZXBhcmF0ZWx5IFNWR0FuaW1hdGVkU3RyaW5nIGJhc2UgY2xhc3Nlc1xuICBpZiAoZWwuY2xhc3NOYW1lIGluc3RhbmNlb2YgZWwub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5TVkdBbmltYXRlZFN0cmluZykge1xuICAgIHJldHVybiBlbC5jbGFzc05hbWUuYmFzZVZhbDtcbiAgfVxuICByZXR1cm4gZWwuY2xhc3NOYW1lO1xufVxuXG5mdW5jdGlvbiBzZXRDbGFzc05hbWUoZWwsIGNsYXNzTmFtZSkge1xuICBlbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgY2xhc3NOYW1lKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlQ2xhc3NlcyhlbCwgYWRkLCBhbGwpIHtcbiAgLy8gT2YgdGhlIHNldCBvZiAnYWxsJyBjbGFzc2VzLCB3ZSBuZWVkIHRoZSAnYWRkJyBjbGFzc2VzLCBhbmQgb25seSB0aGVcbiAgLy8gJ2FkZCcgY2xhc3NlcyB0byBiZSBzZXQuXG4gIGFsbC5mb3JFYWNoKGZ1bmN0aW9uIChjbHMpIHtcbiAgICBpZiAoYWRkLmluZGV4T2YoY2xzKSA9PT0gLTEgJiYgaGFzQ2xhc3MoZWwsIGNscykpIHtcbiAgICAgIHJlbW92ZUNsYXNzKGVsLCBjbHMpO1xuICAgIH1cbiAgfSk7XG5cbiAgYWRkLmZvckVhY2goZnVuY3Rpb24gKGNscykge1xuICAgIGlmICghaGFzQ2xhc3MoZWwsIGNscykpIHtcbiAgICAgIGFkZENsYXNzKGVsLCBjbHMpO1xuICAgIH1cbiAgfSk7XG59XG5cbnZhciBkZWZlcnJlZCA9IFtdO1xuXG52YXIgZGVmZXIgPSBmdW5jdGlvbiBkZWZlcihmbikge1xuICBkZWZlcnJlZC5wdXNoKGZuKTtcbn07XG5cbnZhciBmbHVzaCA9IGZ1bmN0aW9uIGZsdXNoKCkge1xuICB2YXIgZm4gPSB1bmRlZmluZWQ7XG4gIHdoaWxlIChmbiA9IGRlZmVycmVkLnBvcCgpKSB7XG4gICAgZm4oKTtcbiAgfVxufTtcblxudmFyIEV2ZW50ZWQgPSAoZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBFdmVudGVkKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFdmVudGVkKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhFdmVudGVkLCBbe1xuICAgIGtleTogJ29uJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb24oZXZlbnQsIGhhbmRsZXIsIGN0eCkge1xuICAgICAgdmFyIG9uY2UgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDMgfHwgYXJndW1lbnRzWzNdID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IGFyZ3VtZW50c1szXTtcblxuICAgICAgaWYgKHR5cGVvZiB0aGlzLmJpbmRpbmdzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aGlzLmJpbmRpbmdzID0ge307XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHRoaXMuYmluZGluZ3NbZXZlbnRdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aGlzLmJpbmRpbmdzW2V2ZW50XSA9IFtdO1xuICAgICAgfVxuICAgICAgdGhpcy5iaW5kaW5nc1tldmVudF0ucHVzaCh7IGhhbmRsZXI6IGhhbmRsZXIsIGN0eDogY3R4LCBvbmNlOiBvbmNlIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ29uY2UnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbmNlKGV2ZW50LCBoYW5kbGVyLCBjdHgpIHtcbiAgICAgIHRoaXMub24oZXZlbnQsIGhhbmRsZXIsIGN0eCwgdHJ1ZSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb2ZmJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb2ZmKGV2ZW50LCBoYW5kbGVyKSB7XG4gICAgICBpZiAodHlwZW9mIHRoaXMuYmluZGluZ3MgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiB0aGlzLmJpbmRpbmdzW2V2ZW50XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGhhbmRsZXIgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmJpbmRpbmdzW2V2ZW50XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCB0aGlzLmJpbmRpbmdzW2V2ZW50XS5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAodGhpcy5iaW5kaW5nc1tldmVudF1baV0uaGFuZGxlciA9PT0gaGFuZGxlcikge1xuICAgICAgICAgICAgdGhpcy5iaW5kaW5nc1tldmVudF0uc3BsaWNlKGksIDEpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICArK2k7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAndHJpZ2dlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHRyaWdnZXIoZXZlbnQpIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5iaW5kaW5ncyAhPT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy5iaW5kaW5nc1tldmVudF0pIHtcbiAgICAgICAgdmFyIGkgPSAwO1xuXG4gICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgd2hpbGUgKGkgPCB0aGlzLmJpbmRpbmdzW2V2ZW50XS5sZW5ndGgpIHtcbiAgICAgICAgICB2YXIgX2JpbmRpbmdzJGV2ZW50JGkgPSB0aGlzLmJpbmRpbmdzW2V2ZW50XVtpXTtcbiAgICAgICAgICB2YXIgaGFuZGxlciA9IF9iaW5kaW5ncyRldmVudCRpLmhhbmRsZXI7XG4gICAgICAgICAgdmFyIGN0eCA9IF9iaW5kaW5ncyRldmVudCRpLmN0eDtcbiAgICAgICAgICB2YXIgb25jZSA9IF9iaW5kaW5ncyRldmVudCRpLm9uY2U7XG5cbiAgICAgICAgICB2YXIgY29udGV4dCA9IGN0eDtcbiAgICAgICAgICBpZiAodHlwZW9mIGNvbnRleHQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBjb250ZXh0ID0gdGhpcztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBoYW5kbGVyLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuXG4gICAgICAgICAgaWYgKG9uY2UpIHtcbiAgICAgICAgICAgIHRoaXMuYmluZGluZ3NbZXZlbnRdLnNwbGljZShpLCAxKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgKytpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBFdmVudGVkO1xufSkoKTtcblxuVGV0aGVyQmFzZS5VdGlscyA9IHtcbiAgZ2V0QWN0dWFsQm91bmRpbmdDbGllbnRSZWN0OiBnZXRBY3R1YWxCb3VuZGluZ0NsaWVudFJlY3QsXG4gIGdldFNjcm9sbFBhcmVudHM6IGdldFNjcm9sbFBhcmVudHMsXG4gIGdldEJvdW5kczogZ2V0Qm91bmRzLFxuICBnZXRPZmZzZXRQYXJlbnQ6IGdldE9mZnNldFBhcmVudCxcbiAgZXh0ZW5kOiBleHRlbmQsXG4gIGFkZENsYXNzOiBhZGRDbGFzcyxcbiAgcmVtb3ZlQ2xhc3M6IHJlbW92ZUNsYXNzLFxuICBoYXNDbGFzczogaGFzQ2xhc3MsXG4gIHVwZGF0ZUNsYXNzZXM6IHVwZGF0ZUNsYXNzZXMsXG4gIGRlZmVyOiBkZWZlcixcbiAgZmx1c2g6IGZsdXNoLFxuICB1bmlxdWVJZDogdW5pcXVlSWQsXG4gIEV2ZW50ZWQ6IEV2ZW50ZWQsXG4gIGdldFNjcm9sbEJhclNpemU6IGdldFNjcm9sbEJhclNpemUsXG4gIHJlbW92ZVV0aWxFbGVtZW50czogcmVtb3ZlVXRpbEVsZW1lbnRzXG59O1xuLyogZ2xvYmFscyBUZXRoZXJCYXNlLCBwZXJmb3JtYW5jZSAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBfc2xpY2VkVG9BcnJheSA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIHNsaWNlSXRlcmF0b3IoYXJyLCBpKSB7IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pWydyZXR1cm4nXSkgX2lbJ3JldHVybiddKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfSByZXR1cm4gZnVuY3Rpb24gKGFyciwgaSkgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IHJldHVybiBhcnI7IH0gZWxzZSBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSB7IHJldHVybiBzbGljZUl0ZXJhdG9yKGFyciwgaSk7IH0gZWxzZSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UnKTsgfSB9OyB9KSgpO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgndmFsdWUnIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXG52YXIgX2dldCA9IGZ1bmN0aW9uIGdldChfeDYsIF94NywgX3g4KSB7IHZhciBfYWdhaW4gPSB0cnVlOyBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHsgdmFyIG9iamVjdCA9IF94NiwgcHJvcGVydHkgPSBfeDcsIHJlY2VpdmVyID0gX3g4OyBfYWdhaW4gPSBmYWxzZTsgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IF94NiA9IHBhcmVudDsgX3g3ID0gcHJvcGVydHk7IF94OCA9IHJlY2VpdmVyOyBfYWdhaW4gPSB0cnVlOyBkZXNjID0gcGFyZW50ID0gdW5kZWZpbmVkOyBjb250aW51ZSBfZnVuY3Rpb247IH0gfSBlbHNlIGlmICgndmFsdWUnIGluIGRlc2MpIHsgcmV0dXJuIGRlc2MudmFsdWU7IH0gZWxzZSB7IHZhciBnZXR0ZXIgPSBkZXNjLmdldDsgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsgfSB9IH07XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAnZnVuY3Rpb24nICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAnICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG5pZiAodHlwZW9mIFRldGhlckJhc2UgPT09ICd1bmRlZmluZWQnKSB7XG4gIHRocm93IG5ldyBFcnJvcignWW91IG11c3QgaW5jbHVkZSB0aGUgdXRpbHMuanMgZmlsZSBiZWZvcmUgdGV0aGVyLmpzJyk7XG59XG5cbnZhciBfVGV0aGVyQmFzZSRVdGlscyA9IFRldGhlckJhc2UuVXRpbHM7XG52YXIgZ2V0U2Nyb2xsUGFyZW50cyA9IF9UZXRoZXJCYXNlJFV0aWxzLmdldFNjcm9sbFBhcmVudHM7XG52YXIgZ2V0Qm91bmRzID0gX1RldGhlckJhc2UkVXRpbHMuZ2V0Qm91bmRzO1xudmFyIGdldE9mZnNldFBhcmVudCA9IF9UZXRoZXJCYXNlJFV0aWxzLmdldE9mZnNldFBhcmVudDtcbnZhciBleHRlbmQgPSBfVGV0aGVyQmFzZSRVdGlscy5leHRlbmQ7XG52YXIgYWRkQ2xhc3MgPSBfVGV0aGVyQmFzZSRVdGlscy5hZGRDbGFzcztcbnZhciByZW1vdmVDbGFzcyA9IF9UZXRoZXJCYXNlJFV0aWxzLnJlbW92ZUNsYXNzO1xudmFyIHVwZGF0ZUNsYXNzZXMgPSBfVGV0aGVyQmFzZSRVdGlscy51cGRhdGVDbGFzc2VzO1xudmFyIGRlZmVyID0gX1RldGhlckJhc2UkVXRpbHMuZGVmZXI7XG52YXIgZmx1c2ggPSBfVGV0aGVyQmFzZSRVdGlscy5mbHVzaDtcbnZhciBnZXRTY3JvbGxCYXJTaXplID0gX1RldGhlckJhc2UkVXRpbHMuZ2V0U2Nyb2xsQmFyU2l6ZTtcbnZhciByZW1vdmVVdGlsRWxlbWVudHMgPSBfVGV0aGVyQmFzZSRVdGlscy5yZW1vdmVVdGlsRWxlbWVudHM7XG5cbmZ1bmN0aW9uIHdpdGhpbihhLCBiKSB7XG4gIHZhciBkaWZmID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8gMSA6IGFyZ3VtZW50c1syXTtcblxuICByZXR1cm4gYSArIGRpZmYgPj0gYiAmJiBiID49IGEgLSBkaWZmO1xufVxuXG52YXIgdHJhbnNmb3JtS2V5ID0gKGZ1bmN0aW9uICgpIHtcbiAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgdmFyIHRyYW5zZm9ybXMgPSBbJ3RyYW5zZm9ybScsICdXZWJraXRUcmFuc2Zvcm0nLCAnT1RyYW5zZm9ybScsICdNb3pUcmFuc2Zvcm0nLCAnbXNUcmFuc2Zvcm0nXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmFuc2Zvcm1zLmxlbmd0aDsgKytpKSB7XG4gICAgdmFyIGtleSA9IHRyYW5zZm9ybXNbaV07XG4gICAgaWYgKGVsLnN0eWxlW2tleV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGtleTtcbiAgICB9XG4gIH1cbn0pKCk7XG5cbnZhciB0ZXRoZXJzID0gW107XG5cbnZhciBwb3NpdGlvbiA9IGZ1bmN0aW9uIHBvc2l0aW9uKCkge1xuICB0ZXRoZXJzLmZvckVhY2goZnVuY3Rpb24gKHRldGhlcikge1xuICAgIHRldGhlci5wb3NpdGlvbihmYWxzZSk7XG4gIH0pO1xuICBmbHVzaCgpO1xufTtcblxuZnVuY3Rpb24gbm93KCkge1xuICBpZiAodHlwZW9mIHBlcmZvcm1hbmNlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgcGVyZm9ybWFuY2Uubm93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBwZXJmb3JtYW5jZS5ub3coKTtcbiAgfVxuICByZXR1cm4gK25ldyBEYXRlKCk7XG59XG5cbihmdW5jdGlvbiAoKSB7XG4gIHZhciBsYXN0Q2FsbCA9IG51bGw7XG4gIHZhciBsYXN0RHVyYXRpb24gPSBudWxsO1xuICB2YXIgcGVuZGluZ1RpbWVvdXQgPSBudWxsO1xuXG4gIHZhciB0aWNrID0gZnVuY3Rpb24gdGljaygpIHtcbiAgICBpZiAodHlwZW9mIGxhc3REdXJhdGlvbiAhPT0gJ3VuZGVmaW5lZCcgJiYgbGFzdER1cmF0aW9uID4gMTYpIHtcbiAgICAgIC8vIFdlIHZvbHVudGFyaWx5IHRocm90dGxlIG91cnNlbHZlcyBpZiB3ZSBjYW4ndCBtYW5hZ2UgNjBmcHNcbiAgICAgIGxhc3REdXJhdGlvbiA9IE1hdGgubWluKGxhc3REdXJhdGlvbiAtIDE2LCAyNTApO1xuXG4gICAgICAvLyBKdXN0IGluIGNhc2UgdGhpcyBpcyB0aGUgbGFzdCBldmVudCwgcmVtZW1iZXIgdG8gcG9zaXRpb24ganVzdCBvbmNlIG1vcmVcbiAgICAgIHBlbmRpbmdUaW1lb3V0ID0gc2V0VGltZW91dCh0aWNrLCAyNTApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgbGFzdENhbGwgIT09ICd1bmRlZmluZWQnICYmIG5vdygpIC0gbGFzdENhbGwgPCAxMCkge1xuICAgICAgLy8gU29tZSBicm93c2VycyBjYWxsIGV2ZW50cyBhIGxpdHRsZSB0b28gZnJlcXVlbnRseSwgcmVmdXNlIHRvIHJ1biBtb3JlIHRoYW4gaXMgcmVhc29uYWJsZVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChwZW5kaW5nVGltZW91dCAhPSBudWxsKSB7XG4gICAgICBjbGVhclRpbWVvdXQocGVuZGluZ1RpbWVvdXQpO1xuICAgICAgcGVuZGluZ1RpbWVvdXQgPSBudWxsO1xuICAgIH1cblxuICAgIGxhc3RDYWxsID0gbm93KCk7XG4gICAgcG9zaXRpb24oKTtcbiAgICBsYXN0RHVyYXRpb24gPSBub3coKSAtIGxhc3RDYWxsO1xuICB9O1xuXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgWydyZXNpemUnLCAnc2Nyb2xsJywgJ3RvdWNobW92ZSddLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgdGljayk7XG4gICAgfSk7XG4gIH1cbn0pKCk7XG5cbnZhciBNSVJST1JfTFIgPSB7XG4gIGNlbnRlcjogJ2NlbnRlcicsXG4gIGxlZnQ6ICdyaWdodCcsXG4gIHJpZ2h0OiAnbGVmdCdcbn07XG5cbnZhciBNSVJST1JfVEIgPSB7XG4gIG1pZGRsZTogJ21pZGRsZScsXG4gIHRvcDogJ2JvdHRvbScsXG4gIGJvdHRvbTogJ3RvcCdcbn07XG5cbnZhciBPRkZTRVRfTUFQID0ge1xuICB0b3A6IDAsXG4gIGxlZnQ6IDAsXG4gIG1pZGRsZTogJzUwJScsXG4gIGNlbnRlcjogJzUwJScsXG4gIGJvdHRvbTogJzEwMCUnLFxuICByaWdodDogJzEwMCUnXG59O1xuXG52YXIgYXV0b1RvRml4ZWRBdHRhY2htZW50ID0gZnVuY3Rpb24gYXV0b1RvRml4ZWRBdHRhY2htZW50KGF0dGFjaG1lbnQsIHJlbGF0aXZlVG9BdHRhY2htZW50KSB7XG4gIHZhciBsZWZ0ID0gYXR0YWNobWVudC5sZWZ0O1xuICB2YXIgdG9wID0gYXR0YWNobWVudC50b3A7XG5cbiAgaWYgKGxlZnQgPT09ICdhdXRvJykge1xuICAgIGxlZnQgPSBNSVJST1JfTFJbcmVsYXRpdmVUb0F0dGFjaG1lbnQubGVmdF07XG4gIH1cblxuICBpZiAodG9wID09PSAnYXV0bycpIHtcbiAgICB0b3AgPSBNSVJST1JfVEJbcmVsYXRpdmVUb0F0dGFjaG1lbnQudG9wXTtcbiAgfVxuXG4gIHJldHVybiB7IGxlZnQ6IGxlZnQsIHRvcDogdG9wIH07XG59O1xuXG52YXIgYXR0YWNobWVudFRvT2Zmc2V0ID0gZnVuY3Rpb24gYXR0YWNobWVudFRvT2Zmc2V0KGF0dGFjaG1lbnQpIHtcbiAgdmFyIGxlZnQgPSBhdHRhY2htZW50LmxlZnQ7XG4gIHZhciB0b3AgPSBhdHRhY2htZW50LnRvcDtcblxuICBpZiAodHlwZW9mIE9GRlNFVF9NQVBbYXR0YWNobWVudC5sZWZ0XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBsZWZ0ID0gT0ZGU0VUX01BUFthdHRhY2htZW50LmxlZnRdO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBPRkZTRVRfTUFQW2F0dGFjaG1lbnQudG9wXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB0b3AgPSBPRkZTRVRfTUFQW2F0dGFjaG1lbnQudG9wXTtcbiAgfVxuXG4gIHJldHVybiB7IGxlZnQ6IGxlZnQsIHRvcDogdG9wIH07XG59O1xuXG5mdW5jdGlvbiBhZGRPZmZzZXQoKSB7XG4gIHZhciBvdXQgPSB7IHRvcDogMCwgbGVmdDogMCB9O1xuXG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBvZmZzZXRzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgb2Zmc2V0c1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIG9mZnNldHMuZm9yRWFjaChmdW5jdGlvbiAoX3JlZikge1xuICAgIHZhciB0b3AgPSBfcmVmLnRvcDtcbiAgICB2YXIgbGVmdCA9IF9yZWYubGVmdDtcblxuICAgIGlmICh0eXBlb2YgdG9wID09PSAnc3RyaW5nJykge1xuICAgICAgdG9wID0gcGFyc2VGbG9hdCh0b3AsIDEwKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBsZWZ0ID09PSAnc3RyaW5nJykge1xuICAgICAgbGVmdCA9IHBhcnNlRmxvYXQobGVmdCwgMTApO1xuICAgIH1cblxuICAgIG91dC50b3AgKz0gdG9wO1xuICAgIG91dC5sZWZ0ICs9IGxlZnQ7XG4gIH0pO1xuXG4gIHJldHVybiBvdXQ7XG59XG5cbmZ1bmN0aW9uIG9mZnNldFRvUHgob2Zmc2V0LCBzaXplKSB7XG4gIGlmICh0eXBlb2Ygb2Zmc2V0LmxlZnQgPT09ICdzdHJpbmcnICYmIG9mZnNldC5sZWZ0LmluZGV4T2YoJyUnKSAhPT0gLTEpIHtcbiAgICBvZmZzZXQubGVmdCA9IHBhcnNlRmxvYXQob2Zmc2V0LmxlZnQsIDEwKSAvIDEwMCAqIHNpemUud2lkdGg7XG4gIH1cbiAgaWYgKHR5cGVvZiBvZmZzZXQudG9wID09PSAnc3RyaW5nJyAmJiBvZmZzZXQudG9wLmluZGV4T2YoJyUnKSAhPT0gLTEpIHtcbiAgICBvZmZzZXQudG9wID0gcGFyc2VGbG9hdChvZmZzZXQudG9wLCAxMCkgLyAxMDAgKiBzaXplLmhlaWdodDtcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQ7XG59XG5cbnZhciBwYXJzZU9mZnNldCA9IGZ1bmN0aW9uIHBhcnNlT2Zmc2V0KHZhbHVlKSB7XG4gIHZhciBfdmFsdWUkc3BsaXQgPSB2YWx1ZS5zcGxpdCgnICcpO1xuXG4gIHZhciBfdmFsdWUkc3BsaXQyID0gX3NsaWNlZFRvQXJyYXkoX3ZhbHVlJHNwbGl0LCAyKTtcblxuICB2YXIgdG9wID0gX3ZhbHVlJHNwbGl0MlswXTtcbiAgdmFyIGxlZnQgPSBfdmFsdWUkc3BsaXQyWzFdO1xuXG4gIHJldHVybiB7IHRvcDogdG9wLCBsZWZ0OiBsZWZ0IH07XG59O1xudmFyIHBhcnNlQXR0YWNobWVudCA9IHBhcnNlT2Zmc2V0O1xuXG52YXIgVGV0aGVyQ2xhc3MgPSAoZnVuY3Rpb24gKF9FdmVudGVkKSB7XG4gIF9pbmhlcml0cyhUZXRoZXJDbGFzcywgX0V2ZW50ZWQpO1xuXG4gIGZ1bmN0aW9uIFRldGhlckNsYXNzKG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRldGhlckNsYXNzKTtcblxuICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKFRldGhlckNsYXNzLnByb3RvdHlwZSksICdjb25zdHJ1Y3RvcicsIHRoaXMpLmNhbGwodGhpcyk7XG4gICAgdGhpcy5wb3NpdGlvbiA9IHRoaXMucG9zaXRpb24uYmluZCh0aGlzKTtcblxuICAgIHRldGhlcnMucHVzaCh0aGlzKTtcblxuICAgIHRoaXMuaGlzdG9yeSA9IFtdO1xuXG4gICAgdGhpcy5zZXRPcHRpb25zKG9wdGlvbnMsIGZhbHNlKTtcblxuICAgIFRldGhlckJhc2UubW9kdWxlcy5mb3JFYWNoKGZ1bmN0aW9uIChtb2R1bGUpIHtcbiAgICAgIGlmICh0eXBlb2YgbW9kdWxlLmluaXRpYWxpemUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIG1vZHVsZS5pbml0aWFsaXplLmNhbGwoX3RoaXMpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5wb3NpdGlvbigpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFRldGhlckNsYXNzLCBbe1xuICAgIGtleTogJ2dldENsYXNzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q2xhc3MoKSB7XG4gICAgICB2YXIga2V5ID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gJycgOiBhcmd1bWVudHNbMF07XG4gICAgICB2YXIgY2xhc3NlcyA9IHRoaXMub3B0aW9ucy5jbGFzc2VzO1xuXG4gICAgICBpZiAodHlwZW9mIGNsYXNzZXMgIT09ICd1bmRlZmluZWQnICYmIGNsYXNzZXNba2V5XSkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmNsYXNzZXNba2V5XTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLmNsYXNzUHJlZml4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuY2xhc3NQcmVmaXggKyAnLScgKyBrZXk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3NldE9wdGlvbnMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRPcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICB2YXIgcG9zID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IGFyZ3VtZW50c1sxXTtcblxuICAgICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgICBvZmZzZXQ6ICcwIDAnLFxuICAgICAgICB0YXJnZXRPZmZzZXQ6ICcwIDAnLFxuICAgICAgICB0YXJnZXRBdHRhY2htZW50OiAnYXV0byBhdXRvJyxcbiAgICAgICAgY2xhc3NQcmVmaXg6ICd0ZXRoZXInXG4gICAgICB9O1xuXG4gICAgICB0aGlzLm9wdGlvbnMgPSBleHRlbmQoZGVmYXVsdHMsIG9wdGlvbnMpO1xuXG4gICAgICB2YXIgX29wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICB2YXIgZWxlbWVudCA9IF9vcHRpb25zLmVsZW1lbnQ7XG4gICAgICB2YXIgdGFyZ2V0ID0gX29wdGlvbnMudGFyZ2V0O1xuICAgICAgdmFyIHRhcmdldE1vZGlmaWVyID0gX29wdGlvbnMudGFyZ2V0TW9kaWZpZXI7XG5cbiAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgICAgIHRoaXMudGFyZ2V0TW9kaWZpZXIgPSB0YXJnZXRNb2RpZmllcjtcblxuICAgICAgaWYgKHRoaXMudGFyZ2V0ID09PSAndmlld3BvcnQnKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gZG9jdW1lbnQuYm9keTtcbiAgICAgICAgdGhpcy50YXJnZXRNb2RpZmllciA9ICd2aXNpYmxlJztcbiAgICAgIH0gZWxzZSBpZiAodGhpcy50YXJnZXQgPT09ICdzY3JvbGwtaGFuZGxlJykge1xuICAgICAgICB0aGlzLnRhcmdldCA9IGRvY3VtZW50LmJvZHk7XG4gICAgICAgIHRoaXMudGFyZ2V0TW9kaWZpZXIgPSAnc2Nyb2xsLWhhbmRsZSc7XG4gICAgICB9XG5cbiAgICAgIFsnZWxlbWVudCcsICd0YXJnZXQnXS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBfdGhpczJba2V5XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RldGhlciBFcnJvcjogQm90aCBlbGVtZW50IGFuZCB0YXJnZXQgbXVzdCBiZSBkZWZpbmVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIF90aGlzMltrZXldLmpxdWVyeSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBfdGhpczJba2V5XSA9IF90aGlzMltrZXldWzBdO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBfdGhpczJba2V5XSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBfdGhpczJba2V5XSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoX3RoaXMyW2tleV0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgYWRkQ2xhc3ModGhpcy5lbGVtZW50LCB0aGlzLmdldENsYXNzKCdlbGVtZW50JykpO1xuICAgICAgaWYgKCEodGhpcy5vcHRpb25zLmFkZFRhcmdldENsYXNzZXMgPT09IGZhbHNlKSkge1xuICAgICAgICBhZGRDbGFzcyh0aGlzLnRhcmdldCwgdGhpcy5nZXRDbGFzcygndGFyZ2V0JykpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMub3B0aW9ucy5hdHRhY2htZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGV0aGVyIEVycm9yOiBZb3UgbXVzdCBwcm92aWRlIGFuIGF0dGFjaG1lbnQnKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy50YXJnZXRBdHRhY2htZW50ID0gcGFyc2VBdHRhY2htZW50KHRoaXMub3B0aW9ucy50YXJnZXRBdHRhY2htZW50KTtcbiAgICAgIHRoaXMuYXR0YWNobWVudCA9IHBhcnNlQXR0YWNobWVudCh0aGlzLm9wdGlvbnMuYXR0YWNobWVudCk7XG4gICAgICB0aGlzLm9mZnNldCA9IHBhcnNlT2Zmc2V0KHRoaXMub3B0aW9ucy5vZmZzZXQpO1xuICAgICAgdGhpcy50YXJnZXRPZmZzZXQgPSBwYXJzZU9mZnNldCh0aGlzLm9wdGlvbnMudGFyZ2V0T2Zmc2V0KTtcblxuICAgICAgaWYgKHR5cGVvZiB0aGlzLnNjcm9sbFBhcmVudHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMuZGlzYWJsZSgpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy50YXJnZXRNb2RpZmllciA9PT0gJ3Njcm9sbC1oYW5kbGUnKSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsUGFyZW50cyA9IFt0aGlzLnRhcmdldF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNjcm9sbFBhcmVudHMgPSBnZXRTY3JvbGxQYXJlbnRzKHRoaXMudGFyZ2V0KTtcbiAgICAgIH1cblxuICAgICAgaWYgKCEodGhpcy5vcHRpb25zLmVuYWJsZWQgPT09IGZhbHNlKSkge1xuICAgICAgICB0aGlzLmVuYWJsZShwb3MpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2dldFRhcmdldEJvdW5kcycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRhcmdldEJvdW5kcygpIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy50YXJnZXRNb2RpZmllciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0TW9kaWZpZXIgPT09ICd2aXNpYmxlJykge1xuICAgICAgICAgIGlmICh0aGlzLnRhcmdldCA9PT0gZG9jdW1lbnQuYm9keSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgdG9wOiBwYWdlWU9mZnNldCwgbGVmdDogcGFnZVhPZmZzZXQsIGhlaWdodDogaW5uZXJIZWlnaHQsIHdpZHRoOiBpbm5lcldpZHRoIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBib3VuZHMgPSBnZXRCb3VuZHModGhpcy50YXJnZXQpO1xuXG4gICAgICAgICAgICB2YXIgb3V0ID0ge1xuICAgICAgICAgICAgICBoZWlnaHQ6IGJvdW5kcy5oZWlnaHQsXG4gICAgICAgICAgICAgIHdpZHRoOiBib3VuZHMud2lkdGgsXG4gICAgICAgICAgICAgIHRvcDogYm91bmRzLnRvcCxcbiAgICAgICAgICAgICAgbGVmdDogYm91bmRzLmxlZnRcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIG91dC5oZWlnaHQgPSBNYXRoLm1pbihvdXQuaGVpZ2h0LCBib3VuZHMuaGVpZ2h0IC0gKHBhZ2VZT2Zmc2V0IC0gYm91bmRzLnRvcCkpO1xuICAgICAgICAgICAgb3V0LmhlaWdodCA9IE1hdGgubWluKG91dC5oZWlnaHQsIGJvdW5kcy5oZWlnaHQgLSAoYm91bmRzLnRvcCArIGJvdW5kcy5oZWlnaHQgLSAocGFnZVlPZmZzZXQgKyBpbm5lckhlaWdodCkpKTtcbiAgICAgICAgICAgIG91dC5oZWlnaHQgPSBNYXRoLm1pbihpbm5lckhlaWdodCwgb3V0LmhlaWdodCk7XG4gICAgICAgICAgICBvdXQuaGVpZ2h0IC09IDI7XG5cbiAgICAgICAgICAgIG91dC53aWR0aCA9IE1hdGgubWluKG91dC53aWR0aCwgYm91bmRzLndpZHRoIC0gKHBhZ2VYT2Zmc2V0IC0gYm91bmRzLmxlZnQpKTtcbiAgICAgICAgICAgIG91dC53aWR0aCA9IE1hdGgubWluKG91dC53aWR0aCwgYm91bmRzLndpZHRoIC0gKGJvdW5kcy5sZWZ0ICsgYm91bmRzLndpZHRoIC0gKHBhZ2VYT2Zmc2V0ICsgaW5uZXJXaWR0aCkpKTtcbiAgICAgICAgICAgIG91dC53aWR0aCA9IE1hdGgubWluKGlubmVyV2lkdGgsIG91dC53aWR0aCk7XG4gICAgICAgICAgICBvdXQud2lkdGggLT0gMjtcblxuICAgICAgICAgICAgaWYgKG91dC50b3AgPCBwYWdlWU9mZnNldCkge1xuICAgICAgICAgICAgICBvdXQudG9wID0gcGFnZVlPZmZzZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3V0LmxlZnQgPCBwYWdlWE9mZnNldCkge1xuICAgICAgICAgICAgICBvdXQubGVmdCA9IHBhZ2VYT2Zmc2V0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRhcmdldE1vZGlmaWVyID09PSAnc2Nyb2xsLWhhbmRsZScpIHtcbiAgICAgICAgICB2YXIgYm91bmRzID0gdW5kZWZpbmVkO1xuICAgICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLnRhcmdldDtcbiAgICAgICAgICBpZiAodGFyZ2V0ID09PSBkb2N1bWVudC5ib2R5KSB7XG4gICAgICAgICAgICB0YXJnZXQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cbiAgICAgICAgICAgIGJvdW5kcyA9IHtcbiAgICAgICAgICAgICAgbGVmdDogcGFnZVhPZmZzZXQsXG4gICAgICAgICAgICAgIHRvcDogcGFnZVlPZmZzZXQsXG4gICAgICAgICAgICAgIGhlaWdodDogaW5uZXJIZWlnaHQsXG4gICAgICAgICAgICAgIHdpZHRoOiBpbm5lcldpZHRoXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBib3VuZHMgPSBnZXRCb3VuZHModGFyZ2V0KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKHRhcmdldCk7XG5cbiAgICAgICAgICB2YXIgaGFzQm90dG9tU2Nyb2xsID0gdGFyZ2V0LnNjcm9sbFdpZHRoID4gdGFyZ2V0LmNsaWVudFdpZHRoIHx8IFtzdHlsZS5vdmVyZmxvdywgc3R5bGUub3ZlcmZsb3dYXS5pbmRleE9mKCdzY3JvbGwnKSA+PSAwIHx8IHRoaXMudGFyZ2V0ICE9PSBkb2N1bWVudC5ib2R5O1xuXG4gICAgICAgICAgdmFyIHNjcm9sbEJvdHRvbSA9IDA7XG4gICAgICAgICAgaWYgKGhhc0JvdHRvbVNjcm9sbCkge1xuICAgICAgICAgICAgc2Nyb2xsQm90dG9tID0gMTU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIGhlaWdodCA9IGJvdW5kcy5oZWlnaHQgLSBwYXJzZUZsb2F0KHN0eWxlLmJvcmRlclRvcFdpZHRoKSAtIHBhcnNlRmxvYXQoc3R5bGUuYm9yZGVyQm90dG9tV2lkdGgpIC0gc2Nyb2xsQm90dG9tO1xuXG4gICAgICAgICAgdmFyIG91dCA9IHtcbiAgICAgICAgICAgIHdpZHRoOiAxNSxcbiAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0ICogMC45NzUgKiAoaGVpZ2h0IC8gdGFyZ2V0LnNjcm9sbEhlaWdodCksXG4gICAgICAgICAgICBsZWZ0OiBib3VuZHMubGVmdCArIGJvdW5kcy53aWR0aCAtIHBhcnNlRmxvYXQoc3R5bGUuYm9yZGVyTGVmdFdpZHRoKSAtIDE1XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBmaXRBZGogPSAwO1xuICAgICAgICAgIGlmIChoZWlnaHQgPCA0MDggJiYgdGhpcy50YXJnZXQgPT09IGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgICAgIGZpdEFkaiA9IC0wLjAwMDExICogTWF0aC5wb3coaGVpZ2h0LCAyKSAtIDAuMDA3MjcgKiBoZWlnaHQgKyAyMi41ODtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodGhpcy50YXJnZXQgIT09IGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgICAgIG91dC5oZWlnaHQgPSBNYXRoLm1heChvdXQuaGVpZ2h0LCAyNCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIHNjcm9sbFBlcmNlbnRhZ2UgPSB0aGlzLnRhcmdldC5zY3JvbGxUb3AgLyAodGFyZ2V0LnNjcm9sbEhlaWdodCAtIGhlaWdodCk7XG4gICAgICAgICAgb3V0LnRvcCA9IHNjcm9sbFBlcmNlbnRhZ2UgKiAoaGVpZ2h0IC0gb3V0LmhlaWdodCAtIGZpdEFkaikgKyBib3VuZHMudG9wICsgcGFyc2VGbG9hdChzdHlsZS5ib3JkZXJUb3BXaWR0aCk7XG5cbiAgICAgICAgICBpZiAodGhpcy50YXJnZXQgPT09IGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgICAgIG91dC5oZWlnaHQgPSBNYXRoLm1heChvdXQuaGVpZ2h0LCAyNCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGdldEJvdW5kcyh0aGlzLnRhcmdldCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY2xlYXJDYWNoZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyQ2FjaGUoKSB7XG4gICAgICB0aGlzLl9jYWNoZSA9IHt9O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NhY2hlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2FjaGUoaywgZ2V0dGVyKSB7XG4gICAgICAvLyBNb3JlIHRoYW4gb25lIG1vZHVsZSB3aWxsIG9mdGVuIG5lZWQgdGhlIHNhbWUgRE9NIGluZm8sIHNvXG4gICAgICAvLyB3ZSBrZWVwIGEgY2FjaGUgd2hpY2ggaXMgY2xlYXJlZCBvbiBlYWNoIHBvc2l0aW9uIGNhbGxcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5fY2FjaGUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMuX2NhY2hlID0ge307XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgdGhpcy5fY2FjaGVba10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMuX2NhY2hlW2tdID0gZ2V0dGVyLmNhbGwodGhpcyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLl9jYWNoZVtrXTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdlbmFibGUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlbmFibGUoKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgdmFyIHBvcyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHRydWUgOiBhcmd1bWVudHNbMF07XG5cbiAgICAgIGlmICghKHRoaXMub3B0aW9ucy5hZGRUYXJnZXRDbGFzc2VzID09PSBmYWxzZSkpIHtcbiAgICAgICAgYWRkQ2xhc3ModGhpcy50YXJnZXQsIHRoaXMuZ2V0Q2xhc3MoJ2VuYWJsZWQnKSk7XG4gICAgICB9XG4gICAgICBhZGRDbGFzcyh0aGlzLmVsZW1lbnQsIHRoaXMuZ2V0Q2xhc3MoJ2VuYWJsZWQnKSk7XG4gICAgICB0aGlzLmVuYWJsZWQgPSB0cnVlO1xuXG4gICAgICB0aGlzLnNjcm9sbFBhcmVudHMuZm9yRWFjaChmdW5jdGlvbiAocGFyZW50KSB7XG4gICAgICAgIGlmIChwYXJlbnQgIT09IF90aGlzMy50YXJnZXQub3duZXJEb2N1bWVudCkge1xuICAgICAgICAgIHBhcmVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBfdGhpczMucG9zaXRpb24pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKHBvcykge1xuICAgICAgICB0aGlzLnBvc2l0aW9uKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZGlzYWJsZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGRpc2FibGUoKSB7XG4gICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgICAgcmVtb3ZlQ2xhc3ModGhpcy50YXJnZXQsIHRoaXMuZ2V0Q2xhc3MoJ2VuYWJsZWQnKSk7XG4gICAgICByZW1vdmVDbGFzcyh0aGlzLmVsZW1lbnQsIHRoaXMuZ2V0Q2xhc3MoJ2VuYWJsZWQnKSk7XG4gICAgICB0aGlzLmVuYWJsZWQgPSBmYWxzZTtcblxuICAgICAgaWYgKHR5cGVvZiB0aGlzLnNjcm9sbFBhcmVudHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsUGFyZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChwYXJlbnQpIHtcbiAgICAgICAgICBwYXJlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgX3RoaXM0LnBvc2l0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZGVzdHJveScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgICAgdGhpcy5kaXNhYmxlKCk7XG5cbiAgICAgIHRldGhlcnMuZm9yRWFjaChmdW5jdGlvbiAodGV0aGVyLCBpKSB7XG4gICAgICAgIGlmICh0ZXRoZXIgPT09IF90aGlzNSkge1xuICAgICAgICAgIHRldGhlcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gUmVtb3ZlIGFueSBlbGVtZW50cyB3ZSB3ZXJlIHVzaW5nIGZvciBjb252ZW5pZW5jZSBmcm9tIHRoZSBET01cbiAgICAgIGlmICh0ZXRoZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZW1vdmVVdGlsRWxlbWVudHMoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICd1cGRhdGVBdHRhY2hDbGFzc2VzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlQXR0YWNoQ2xhc3NlcyhlbGVtZW50QXR0YWNoLCB0YXJnZXRBdHRhY2gpIHtcbiAgICAgIHZhciBfdGhpczYgPSB0aGlzO1xuXG4gICAgICBlbGVtZW50QXR0YWNoID0gZWxlbWVudEF0dGFjaCB8fCB0aGlzLmF0dGFjaG1lbnQ7XG4gICAgICB0YXJnZXRBdHRhY2ggPSB0YXJnZXRBdHRhY2ggfHwgdGhpcy50YXJnZXRBdHRhY2htZW50O1xuICAgICAgdmFyIHNpZGVzID0gWydsZWZ0JywgJ3RvcCcsICdib3R0b20nLCAncmlnaHQnLCAnbWlkZGxlJywgJ2NlbnRlciddO1xuXG4gICAgICBpZiAodHlwZW9mIHRoaXMuX2FkZEF0dGFjaENsYXNzZXMgIT09ICd1bmRlZmluZWQnICYmIHRoaXMuX2FkZEF0dGFjaENsYXNzZXMubGVuZ3RoKSB7XG4gICAgICAgIC8vIHVwZGF0ZUF0dGFjaENsYXNzZXMgY2FuIGJlIGNhbGxlZCBtb3JlIHRoYW4gb25jZSBpbiBhIHBvc2l0aW9uIGNhbGwsIHNvXG4gICAgICAgIC8vIHdlIG5lZWQgdG8gY2xlYW4gdXAgYWZ0ZXIgb3Vyc2VsdmVzIHN1Y2ggdGhhdCB3aGVuIHRoZSBsYXN0IGRlZmVyIGdldHNcbiAgICAgICAgLy8gcmFuIGl0IGRvZXNuJ3QgYWRkIGFueSBleHRyYSBjbGFzc2VzIGZyb20gcHJldmlvdXMgY2FsbHMuXG4gICAgICAgIHRoaXMuX2FkZEF0dGFjaENsYXNzZXMuc3BsaWNlKDAsIHRoaXMuX2FkZEF0dGFjaENsYXNzZXMubGVuZ3RoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiB0aGlzLl9hZGRBdHRhY2hDbGFzc2VzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aGlzLl9hZGRBdHRhY2hDbGFzc2VzID0gW107XG4gICAgICB9XG4gICAgICB2YXIgYWRkID0gdGhpcy5fYWRkQXR0YWNoQ2xhc3NlcztcblxuICAgICAgaWYgKGVsZW1lbnRBdHRhY2gudG9wKSB7XG4gICAgICAgIGFkZC5wdXNoKHRoaXMuZ2V0Q2xhc3MoJ2VsZW1lbnQtYXR0YWNoZWQnKSArICctJyArIGVsZW1lbnRBdHRhY2gudG9wKTtcbiAgICAgIH1cbiAgICAgIGlmIChlbGVtZW50QXR0YWNoLmxlZnQpIHtcbiAgICAgICAgYWRkLnB1c2godGhpcy5nZXRDbGFzcygnZWxlbWVudC1hdHRhY2hlZCcpICsgJy0nICsgZWxlbWVudEF0dGFjaC5sZWZ0KTtcbiAgICAgIH1cbiAgICAgIGlmICh0YXJnZXRBdHRhY2gudG9wKSB7XG4gICAgICAgIGFkZC5wdXNoKHRoaXMuZ2V0Q2xhc3MoJ3RhcmdldC1hdHRhY2hlZCcpICsgJy0nICsgdGFyZ2V0QXR0YWNoLnRvcCk7XG4gICAgICB9XG4gICAgICBpZiAodGFyZ2V0QXR0YWNoLmxlZnQpIHtcbiAgICAgICAgYWRkLnB1c2godGhpcy5nZXRDbGFzcygndGFyZ2V0LWF0dGFjaGVkJykgKyAnLScgKyB0YXJnZXRBdHRhY2gubGVmdCk7XG4gICAgICB9XG5cbiAgICAgIHZhciBhbGwgPSBbXTtcbiAgICAgIHNpZGVzLmZvckVhY2goZnVuY3Rpb24gKHNpZGUpIHtcbiAgICAgICAgYWxsLnB1c2goX3RoaXM2LmdldENsYXNzKCdlbGVtZW50LWF0dGFjaGVkJykgKyAnLScgKyBzaWRlKTtcbiAgICAgICAgYWxsLnB1c2goX3RoaXM2LmdldENsYXNzKCd0YXJnZXQtYXR0YWNoZWQnKSArICctJyArIHNpZGUpO1xuICAgICAgfSk7XG5cbiAgICAgIGRlZmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCEodHlwZW9mIF90aGlzNi5fYWRkQXR0YWNoQ2xhc3NlcyAhPT0gJ3VuZGVmaW5lZCcpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdXBkYXRlQ2xhc3NlcyhfdGhpczYuZWxlbWVudCwgX3RoaXM2Ll9hZGRBdHRhY2hDbGFzc2VzLCBhbGwpO1xuICAgICAgICBpZiAoIShfdGhpczYub3B0aW9ucy5hZGRUYXJnZXRDbGFzc2VzID09PSBmYWxzZSkpIHtcbiAgICAgICAgICB1cGRhdGVDbGFzc2VzKF90aGlzNi50YXJnZXQsIF90aGlzNi5fYWRkQXR0YWNoQ2xhc3NlcywgYWxsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRlbGV0ZSBfdGhpczYuX2FkZEF0dGFjaENsYXNzZXM7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdwb3NpdGlvbicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBvc2l0aW9uKCkge1xuICAgICAgdmFyIF90aGlzNyA9IHRoaXM7XG5cbiAgICAgIHZhciBmbHVzaENoYW5nZXMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyB0cnVlIDogYXJndW1lbnRzWzBdO1xuXG4gICAgICAvLyBmbHVzaENoYW5nZXMgY29tbWl0cyB0aGUgY2hhbmdlcyBpbW1lZGlhdGVseSwgbGVhdmUgdHJ1ZSB1bmxlc3MgeW91IGFyZSBwb3NpdGlvbmluZyBtdWx0aXBsZVxuICAgICAgLy8gdGV0aGVycyAoaW4gd2hpY2ggY2FzZSBjYWxsIFRldGhlci5VdGlscy5mbHVzaCB5b3Vyc2VsZiB3aGVuIHlvdSdyZSBkb25lKVxuXG4gICAgICBpZiAoIXRoaXMuZW5hYmxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY2xlYXJDYWNoZSgpO1xuXG4gICAgICAvLyBUdXJuICdhdXRvJyBhdHRhY2htZW50cyBpbnRvIHRoZSBhcHByb3ByaWF0ZSBjb3JuZXIgb3IgZWRnZVxuICAgICAgdmFyIHRhcmdldEF0dGFjaG1lbnQgPSBhdXRvVG9GaXhlZEF0dGFjaG1lbnQodGhpcy50YXJnZXRBdHRhY2htZW50LCB0aGlzLmF0dGFjaG1lbnQpO1xuXG4gICAgICB0aGlzLnVwZGF0ZUF0dGFjaENsYXNzZXModGhpcy5hdHRhY2htZW50LCB0YXJnZXRBdHRhY2htZW50KTtcblxuICAgICAgdmFyIGVsZW1lbnRQb3MgPSB0aGlzLmNhY2hlKCdlbGVtZW50LWJvdW5kcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGdldEJvdW5kcyhfdGhpczcuZWxlbWVudCk7XG4gICAgICB9KTtcblxuICAgICAgdmFyIHdpZHRoID0gZWxlbWVudFBvcy53aWR0aDtcbiAgICAgIHZhciBoZWlnaHQgPSBlbGVtZW50UG9zLmhlaWdodDtcblxuICAgICAgaWYgKHdpZHRoID09PSAwICYmIGhlaWdodCA9PT0gMCAmJiB0eXBlb2YgdGhpcy5sYXN0U2l6ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdmFyIF9sYXN0U2l6ZSA9IHRoaXMubGFzdFNpemU7XG5cbiAgICAgICAgLy8gV2UgY2FjaGUgdGhlIGhlaWdodCBhbmQgd2lkdGggdG8gbWFrZSBpdCBwb3NzaWJsZSB0byBwb3NpdGlvbiBlbGVtZW50cyB0aGF0IGFyZVxuICAgICAgICAvLyBnZXR0aW5nIGhpZGRlbi5cbiAgICAgICAgd2lkdGggPSBfbGFzdFNpemUud2lkdGg7XG4gICAgICAgIGhlaWdodCA9IF9sYXN0U2l6ZS5oZWlnaHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmxhc3RTaXplID0geyB3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0IH07XG4gICAgICB9XG5cbiAgICAgIHZhciB0YXJnZXRQb3MgPSB0aGlzLmNhY2hlKCd0YXJnZXQtYm91bmRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX3RoaXM3LmdldFRhcmdldEJvdW5kcygpO1xuICAgICAgfSk7XG4gICAgICB2YXIgdGFyZ2V0U2l6ZSA9IHRhcmdldFBvcztcblxuICAgICAgLy8gR2V0IGFuIGFjdHVhbCBweCBvZmZzZXQgZnJvbSB0aGUgYXR0YWNobWVudFxuICAgICAgdmFyIG9mZnNldCA9IG9mZnNldFRvUHgoYXR0YWNobWVudFRvT2Zmc2V0KHRoaXMuYXR0YWNobWVudCksIHsgd2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodCB9KTtcbiAgICAgIHZhciB0YXJnZXRPZmZzZXQgPSBvZmZzZXRUb1B4KGF0dGFjaG1lbnRUb09mZnNldCh0YXJnZXRBdHRhY2htZW50KSwgdGFyZ2V0U2l6ZSk7XG5cbiAgICAgIHZhciBtYW51YWxPZmZzZXQgPSBvZmZzZXRUb1B4KHRoaXMub2Zmc2V0LCB7IHdpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHQgfSk7XG4gICAgICB2YXIgbWFudWFsVGFyZ2V0T2Zmc2V0ID0gb2Zmc2V0VG9QeCh0aGlzLnRhcmdldE9mZnNldCwgdGFyZ2V0U2l6ZSk7XG5cbiAgICAgIC8vIEFkZCB0aGUgbWFudWFsbHkgcHJvdmlkZWQgb2Zmc2V0XG4gICAgICBvZmZzZXQgPSBhZGRPZmZzZXQob2Zmc2V0LCBtYW51YWxPZmZzZXQpO1xuICAgICAgdGFyZ2V0T2Zmc2V0ID0gYWRkT2Zmc2V0KHRhcmdldE9mZnNldCwgbWFudWFsVGFyZ2V0T2Zmc2V0KTtcblxuICAgICAgLy8gSXQncyBub3cgb3VyIGdvYWwgdG8gbWFrZSAoZWxlbWVudCBwb3NpdGlvbiArIG9mZnNldCkgPT0gKHRhcmdldCBwb3NpdGlvbiArIHRhcmdldCBvZmZzZXQpXG4gICAgICB2YXIgbGVmdCA9IHRhcmdldFBvcy5sZWZ0ICsgdGFyZ2V0T2Zmc2V0LmxlZnQgLSBvZmZzZXQubGVmdDtcbiAgICAgIHZhciB0b3AgPSB0YXJnZXRQb3MudG9wICsgdGFyZ2V0T2Zmc2V0LnRvcCAtIG9mZnNldC50b3A7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVGV0aGVyQmFzZS5tb2R1bGVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBfbW9kdWxlMiA9IFRldGhlckJhc2UubW9kdWxlc1tpXTtcbiAgICAgICAgdmFyIHJldCA9IF9tb2R1bGUyLnBvc2l0aW9uLmNhbGwodGhpcywge1xuICAgICAgICAgIGxlZnQ6IGxlZnQsXG4gICAgICAgICAgdG9wOiB0b3AsXG4gICAgICAgICAgdGFyZ2V0QXR0YWNobWVudDogdGFyZ2V0QXR0YWNobWVudCxcbiAgICAgICAgICB0YXJnZXRQb3M6IHRhcmdldFBvcyxcbiAgICAgICAgICBlbGVtZW50UG9zOiBlbGVtZW50UG9zLFxuICAgICAgICAgIG9mZnNldDogb2Zmc2V0LFxuICAgICAgICAgIHRhcmdldE9mZnNldDogdGFyZ2V0T2Zmc2V0LFxuICAgICAgICAgIG1hbnVhbE9mZnNldDogbWFudWFsT2Zmc2V0LFxuICAgICAgICAgIG1hbnVhbFRhcmdldE9mZnNldDogbWFudWFsVGFyZ2V0T2Zmc2V0LFxuICAgICAgICAgIHNjcm9sbGJhclNpemU6IHNjcm9sbGJhclNpemUsXG4gICAgICAgICAgYXR0YWNobWVudDogdGhpcy5hdHRhY2htZW50XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChyZXQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiByZXQgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiByZXQgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdG9wID0gcmV0LnRvcDtcbiAgICAgICAgICBsZWZ0ID0gcmV0LmxlZnQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gV2UgZGVzY3JpYmUgdGhlIHBvc2l0aW9uIHRocmVlIGRpZmZlcmVudCB3YXlzIHRvIGdpdmUgdGhlIG9wdGltaXplclxuICAgICAgLy8gYSBjaGFuY2UgdG8gZGVjaWRlIHRoZSBiZXN0IHBvc3NpYmxlIHdheSB0byBwb3NpdGlvbiB0aGUgZWxlbWVudFxuICAgICAgLy8gd2l0aCB0aGUgZmV3ZXN0IHJlcGFpbnRzLlxuICAgICAgdmFyIG5leHQgPSB7XG4gICAgICAgIC8vIEl0J3MgcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIHBhZ2UgKGFic29sdXRlIHBvc2l0aW9uaW5nIHdoZW5cbiAgICAgICAgLy8gdGhlIGVsZW1lbnQgaXMgYSBjaGlsZCBvZiB0aGUgYm9keSlcbiAgICAgICAgcGFnZToge1xuICAgICAgICAgIHRvcDogdG9wLFxuICAgICAgICAgIGxlZnQ6IGxlZnRcbiAgICAgICAgfSxcblxuICAgICAgICAvLyBJdCdzIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSB2aWV3cG9ydCAoZml4ZWQgcG9zaXRpb25pbmcpXG4gICAgICAgIHZpZXdwb3J0OiB7XG4gICAgICAgICAgdG9wOiB0b3AgLSBwYWdlWU9mZnNldCxcbiAgICAgICAgICBib3R0b206IHBhZ2VZT2Zmc2V0IC0gdG9wIC0gaGVpZ2h0ICsgaW5uZXJIZWlnaHQsXG4gICAgICAgICAgbGVmdDogbGVmdCAtIHBhZ2VYT2Zmc2V0LFxuICAgICAgICAgIHJpZ2h0OiBwYWdlWE9mZnNldCAtIGxlZnQgLSB3aWR0aCArIGlubmVyV2lkdGhcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdmFyIGRvYyA9IHRoaXMudGFyZ2V0Lm93bmVyRG9jdW1lbnQ7XG4gICAgICB2YXIgd2luID0gZG9jLmRlZmF1bHRWaWV3O1xuXG4gICAgICB2YXIgc2Nyb2xsYmFyU2l6ZSA9IHVuZGVmaW5lZDtcbiAgICAgIGlmICh3aW4uaW5uZXJIZWlnaHQgPiBkb2MuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkge1xuICAgICAgICBzY3JvbGxiYXJTaXplID0gdGhpcy5jYWNoZSgnc2Nyb2xsYmFyLXNpemUnLCBnZXRTY3JvbGxCYXJTaXplKTtcbiAgICAgICAgbmV4dC52aWV3cG9ydC5ib3R0b20gLT0gc2Nyb2xsYmFyU2l6ZS5oZWlnaHQ7XG4gICAgICB9XG5cbiAgICAgIGlmICh3aW4uaW5uZXJXaWR0aCA+IGRvYy5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgpIHtcbiAgICAgICAgc2Nyb2xsYmFyU2l6ZSA9IHRoaXMuY2FjaGUoJ3Njcm9sbGJhci1zaXplJywgZ2V0U2Nyb2xsQmFyU2l6ZSk7XG4gICAgICAgIG5leHQudmlld3BvcnQucmlnaHQgLT0gc2Nyb2xsYmFyU2l6ZS53aWR0aDtcbiAgICAgIH1cblxuICAgICAgaWYgKFsnJywgJ3N0YXRpYyddLmluZGV4T2YoZG9jLmJvZHkuc3R5bGUucG9zaXRpb24pID09PSAtMSB8fCBbJycsICdzdGF0aWMnXS5pbmRleE9mKGRvYy5ib2R5LnBhcmVudEVsZW1lbnQuc3R5bGUucG9zaXRpb24pID09PSAtMSkge1xuICAgICAgICAvLyBBYnNvbHV0ZSBwb3NpdGlvbmluZyBpbiB0aGUgYm9keSB3aWxsIGJlIHJlbGF0aXZlIHRvIHRoZSBwYWdlLCBub3QgdGhlICdpbml0aWFsIGNvbnRhaW5pbmcgYmxvY2snXG4gICAgICAgIG5leHQucGFnZS5ib3R0b20gPSBkb2MuYm9keS5zY3JvbGxIZWlnaHQgLSB0b3AgLSBoZWlnaHQ7XG4gICAgICAgIG5leHQucGFnZS5yaWdodCA9IGRvYy5ib2R5LnNjcm9sbFdpZHRoIC0gbGVmdCAtIHdpZHRoO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5vcHRpbWl6YXRpb25zICE9PSAndW5kZWZpbmVkJyAmJiB0aGlzLm9wdGlvbnMub3B0aW1pemF0aW9ucy5tb3ZlRWxlbWVudCAhPT0gZmFsc2UgJiYgISh0eXBlb2YgdGhpcy50YXJnZXRNb2RpZmllciAhPT0gJ3VuZGVmaW5lZCcpKSB7XG4gICAgICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIG9mZnNldFBhcmVudCA9IF90aGlzNy5jYWNoZSgndGFyZ2V0LW9mZnNldHBhcmVudCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRPZmZzZXRQYXJlbnQoX3RoaXM3LnRhcmdldCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFyIG9mZnNldFBvc2l0aW9uID0gX3RoaXM3LmNhY2hlKCd0YXJnZXQtb2Zmc2V0cGFyZW50LWJvdW5kcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRCb3VuZHMob2Zmc2V0UGFyZW50KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB2YXIgb2Zmc2V0UGFyZW50U3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKG9mZnNldFBhcmVudCk7XG4gICAgICAgICAgdmFyIG9mZnNldFBhcmVudFNpemUgPSBvZmZzZXRQb3NpdGlvbjtcblxuICAgICAgICAgIHZhciBvZmZzZXRCb3JkZXIgPSB7fTtcbiAgICAgICAgICBbJ1RvcCcsICdMZWZ0JywgJ0JvdHRvbScsICdSaWdodCddLmZvckVhY2goZnVuY3Rpb24gKHNpZGUpIHtcbiAgICAgICAgICAgIG9mZnNldEJvcmRlcltzaWRlLnRvTG93ZXJDYXNlKCldID0gcGFyc2VGbG9hdChvZmZzZXRQYXJlbnRTdHlsZVsnYm9yZGVyJyArIHNpZGUgKyAnV2lkdGgnXSk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBvZmZzZXRQb3NpdGlvbi5yaWdodCA9IGRvYy5ib2R5LnNjcm9sbFdpZHRoIC0gb2Zmc2V0UG9zaXRpb24ubGVmdCAtIG9mZnNldFBhcmVudFNpemUud2lkdGggKyBvZmZzZXRCb3JkZXIucmlnaHQ7XG4gICAgICAgICAgb2Zmc2V0UG9zaXRpb24uYm90dG9tID0gZG9jLmJvZHkuc2Nyb2xsSGVpZ2h0IC0gb2Zmc2V0UG9zaXRpb24udG9wIC0gb2Zmc2V0UGFyZW50U2l6ZS5oZWlnaHQgKyBvZmZzZXRCb3JkZXIuYm90dG9tO1xuXG4gICAgICAgICAgaWYgKG5leHQucGFnZS50b3AgPj0gb2Zmc2V0UG9zaXRpb24udG9wICsgb2Zmc2V0Qm9yZGVyLnRvcCAmJiBuZXh0LnBhZ2UuYm90dG9tID49IG9mZnNldFBvc2l0aW9uLmJvdHRvbSkge1xuICAgICAgICAgICAgaWYgKG5leHQucGFnZS5sZWZ0ID49IG9mZnNldFBvc2l0aW9uLmxlZnQgKyBvZmZzZXRCb3JkZXIubGVmdCAmJiBuZXh0LnBhZ2UucmlnaHQgPj0gb2Zmc2V0UG9zaXRpb24ucmlnaHQpIHtcbiAgICAgICAgICAgICAgLy8gV2UncmUgd2l0aGluIHRoZSB2aXNpYmxlIHBhcnQgb2YgdGhlIHRhcmdldCdzIHNjcm9sbCBwYXJlbnRcbiAgICAgICAgICAgICAgdmFyIHNjcm9sbFRvcCA9IG9mZnNldFBhcmVudC5zY3JvbGxUb3A7XG4gICAgICAgICAgICAgIHZhciBzY3JvbGxMZWZ0ID0gb2Zmc2V0UGFyZW50LnNjcm9sbExlZnQ7XG5cbiAgICAgICAgICAgICAgLy8gSXQncyBwb3NpdGlvbiByZWxhdGl2ZSB0byB0aGUgdGFyZ2V0J3Mgb2Zmc2V0IHBhcmVudCAoYWJzb2x1dGUgcG9zaXRpb25pbmcgd2hlblxuICAgICAgICAgICAgICAvLyB0aGUgZWxlbWVudCBpcyBtb3ZlZCB0byBiZSBhIGNoaWxkIG9mIHRoZSB0YXJnZXQncyBvZmZzZXQgcGFyZW50KS5cbiAgICAgICAgICAgICAgbmV4dC5vZmZzZXQgPSB7XG4gICAgICAgICAgICAgICAgdG9wOiBuZXh0LnBhZ2UudG9wIC0gb2Zmc2V0UG9zaXRpb24udG9wICsgc2Nyb2xsVG9wIC0gb2Zmc2V0Qm9yZGVyLnRvcCxcbiAgICAgICAgICAgICAgICBsZWZ0OiBuZXh0LnBhZ2UubGVmdCAtIG9mZnNldFBvc2l0aW9uLmxlZnQgKyBzY3JvbGxMZWZ0IC0gb2Zmc2V0Qm9yZGVyLmxlZnRcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFdlIGNvdWxkIGFsc28gdHJhdmVsIHVwIHRoZSBET00gYW5kIHRyeSBlYWNoIGNvbnRhaW5pbmcgY29udGV4dCwgcmF0aGVyIHRoYW4gb25seVxuICAgICAgLy8gbG9va2luZyBhdCB0aGUgYm9keSwgYnV0IHdlJ3JlIGdvbm5hIGdldCBkaW1pbmlzaGluZyByZXR1cm5zLlxuXG4gICAgICB0aGlzLm1vdmUobmV4dCk7XG5cbiAgICAgIHRoaXMuaGlzdG9yeS51bnNoaWZ0KG5leHQpO1xuXG4gICAgICBpZiAodGhpcy5oaXN0b3J5Lmxlbmd0aCA+IDMpIHtcbiAgICAgICAgdGhpcy5oaXN0b3J5LnBvcCgpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZmx1c2hDaGFuZ2VzKSB7XG4gICAgICAgIGZsdXNoKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIFRIRSBJU1NVRVxuICB9LCB7XG4gICAga2V5OiAnbW92ZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG1vdmUocG9zKSB7XG4gICAgICB2YXIgX3RoaXM4ID0gdGhpcztcblxuICAgICAgaWYgKCEodHlwZW9mIHRoaXMuZWxlbWVudC5wYXJlbnROb2RlICE9PSAndW5kZWZpbmVkJykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgc2FtZSA9IHt9O1xuXG4gICAgICBmb3IgKHZhciB0eXBlIGluIHBvcykge1xuICAgICAgICBzYW1lW3R5cGVdID0ge307XG5cbiAgICAgICAgZm9yICh2YXIga2V5IGluIHBvc1t0eXBlXSkge1xuICAgICAgICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmhpc3RvcnkubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBwb2ludCA9IHRoaXMuaGlzdG9yeVtpXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcG9pbnRbdHlwZV0gIT09ICd1bmRlZmluZWQnICYmICF3aXRoaW4ocG9pbnRbdHlwZV1ba2V5XSwgcG9zW3R5cGVdW2tleV0pKSB7XG4gICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICAgICAgc2FtZVt0eXBlXVtrZXldID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIGNzcyA9IHsgdG9wOiAnJywgbGVmdDogJycsIHJpZ2h0OiAnJywgYm90dG9tOiAnJyB9O1xuXG4gICAgICB2YXIgdHJhbnNjcmliZSA9IGZ1bmN0aW9uIHRyYW5zY3JpYmUoX3NhbWUsIF9wb3MpIHtcbiAgICAgICAgdmFyIGhhc09wdGltaXphdGlvbnMgPSB0eXBlb2YgX3RoaXM4Lm9wdGlvbnMub3B0aW1pemF0aW9ucyAhPT0gJ3VuZGVmaW5lZCc7XG4gICAgICAgIHZhciBncHUgPSBoYXNPcHRpbWl6YXRpb25zID8gX3RoaXM4Lm9wdGlvbnMub3B0aW1pemF0aW9ucy5ncHUgOiBudWxsO1xuICAgICAgICBpZiAoZ3B1ICE9PSBmYWxzZSkge1xuICAgICAgICAgIHZhciB5UG9zID0gdW5kZWZpbmVkLFxuICAgICAgICAgICAgICB4UG9zID0gdW5kZWZpbmVkO1xuICAgICAgICAgIGlmIChfc2FtZS50b3ApIHtcbiAgICAgICAgICAgIGNzcy50b3AgPSAwO1xuICAgICAgICAgICAgeVBvcyA9IF9wb3MudG9wO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjc3MuYm90dG9tID0gMDtcbiAgICAgICAgICAgIHlQb3MgPSAtX3Bvcy5ib3R0b207XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKF9zYW1lLmxlZnQpIHtcbiAgICAgICAgICAgIGNzcy5sZWZ0ID0gMDtcbiAgICAgICAgICAgIHhQb3MgPSBfcG9zLmxlZnQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNzcy5yaWdodCA9IDA7XG4gICAgICAgICAgICB4UG9zID0gLV9wb3MucmlnaHQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKSB7XG4gICAgICAgICAgICAvLyBIdWJTcG90L3RldGhlciMyMDdcbiAgICAgICAgICAgIHZhciByZXRpbmEgPSB3aW5kb3cubWF0Y2hNZWRpYSgnb25seSBzY3JlZW4gYW5kIChtaW4tcmVzb2x1dGlvbjogMS4zZHBweCknKS5tYXRjaGVzIHx8IHdpbmRvdy5tYXRjaE1lZGlhKCdvbmx5IHNjcmVlbiBhbmQgKC13ZWJraXQtbWluLWRldmljZS1waXhlbC1yYXRpbzogMS4zKScpLm1hdGNoZXM7XG4gICAgICAgICAgICBpZiAoIXJldGluYSkge1xuICAgICAgICAgICAgICB4UG9zID0gTWF0aC5yb3VuZCh4UG9zKTtcbiAgICAgICAgICAgICAgeVBvcyA9IE1hdGgucm91bmQoeVBvcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY3NzW3RyYW5zZm9ybUtleV0gPSAndHJhbnNsYXRlWCgnICsgeFBvcyArICdweCkgdHJhbnNsYXRlWSgnICsgeVBvcyArICdweCknO1xuXG4gICAgICAgICAgaWYgKHRyYW5zZm9ybUtleSAhPT0gJ21zVHJhbnNmb3JtJykge1xuICAgICAgICAgICAgLy8gVGhlIFogdHJhbnNmb3JtIHdpbGwga2VlcCB0aGlzIGluIHRoZSBHUFUgKGZhc3RlciwgYW5kIHByZXZlbnRzIGFydGlmYWN0cyksXG4gICAgICAgICAgICAvLyBidXQgSUU5IGRvZXNuJ3Qgc3VwcG9ydCAzZCB0cmFuc2Zvcm1zIGFuZCB3aWxsIGNob2tlLlxuICAgICAgICAgICAgY3NzW3RyYW5zZm9ybUtleV0gKz0gXCIgdHJhbnNsYXRlWigwKVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoX3NhbWUudG9wKSB7XG4gICAgICAgICAgICBjc3MudG9wID0gX3Bvcy50b3AgKyAncHgnO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjc3MuYm90dG9tID0gX3Bvcy5ib3R0b20gKyAncHgnO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChfc2FtZS5sZWZ0KSB7XG4gICAgICAgICAgICBjc3MubGVmdCA9IF9wb3MubGVmdCArICdweCc7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNzcy5yaWdodCA9IF9wb3MucmlnaHQgKyAncHgnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdmFyIG1vdmVkID0gZmFsc2U7XG4gICAgICBpZiAoKHNhbWUucGFnZS50b3AgfHwgc2FtZS5wYWdlLmJvdHRvbSkgJiYgKHNhbWUucGFnZS5sZWZ0IHx8IHNhbWUucGFnZS5yaWdodCkpIHtcbiAgICAgICAgY3NzLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgdHJhbnNjcmliZShzYW1lLnBhZ2UsIHBvcy5wYWdlKTtcbiAgICAgIH0gZWxzZSBpZiAoKHNhbWUudmlld3BvcnQudG9wIHx8IHNhbWUudmlld3BvcnQuYm90dG9tKSAmJiAoc2FtZS52aWV3cG9ydC5sZWZ0IHx8IHNhbWUudmlld3BvcnQucmlnaHQpKSB7XG4gICAgICAgIGNzcy5wb3NpdGlvbiA9ICdmaXhlZCc7XG4gICAgICAgIHRyYW5zY3JpYmUoc2FtZS52aWV3cG9ydCwgcG9zLnZpZXdwb3J0KTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHNhbWUub2Zmc2V0ICE9PSAndW5kZWZpbmVkJyAmJiBzYW1lLm9mZnNldC50b3AgJiYgc2FtZS5vZmZzZXQubGVmdCkge1xuICAgICAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNzcy5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgICAgdmFyIG9mZnNldFBhcmVudCA9IF90aGlzOC5jYWNoZSgndGFyZ2V0LW9mZnNldHBhcmVudCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRPZmZzZXRQYXJlbnQoX3RoaXM4LnRhcmdldCk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpZiAoZ2V0T2Zmc2V0UGFyZW50KF90aGlzOC5lbGVtZW50KSAhPT0gb2Zmc2V0UGFyZW50KSB7XG4gICAgICAgICAgICBkZWZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIF90aGlzOC5lbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoX3RoaXM4LmVsZW1lbnQpO1xuICAgICAgICAgICAgICBvZmZzZXRQYXJlbnQuYXBwZW5kQ2hpbGQoX3RoaXM4LmVsZW1lbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdHJhbnNjcmliZShzYW1lLm9mZnNldCwgcG9zLm9mZnNldCk7XG4gICAgICAgICAgbW92ZWQgPSB0cnVlO1xuICAgICAgICB9KSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3NzLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgdHJhbnNjcmliZSh7IHRvcDogdHJ1ZSwgbGVmdDogdHJ1ZSB9LCBwb3MucGFnZSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghbW92ZWQpIHtcbiAgICAgICAgdmFyIG9mZnNldFBhcmVudElzQm9keSA9IHRydWU7XG4gICAgICAgIHZhciBjdXJyZW50Tm9kZSA9IHRoaXMuZWxlbWVudC5wYXJlbnROb2RlO1xuICAgICAgICB3aGlsZSAoY3VycmVudE5vZGUgJiYgY3VycmVudE5vZGUubm9kZVR5cGUgPT09IDEgJiYgY3VycmVudE5vZGUudGFnTmFtZSAhPT0gJ0JPRFknKSB7XG4gICAgICAgICAgaWYgKGdldENvbXB1dGVkU3R5bGUoY3VycmVudE5vZGUpLnBvc2l0aW9uICE9PSAnc3RhdGljJykge1xuICAgICAgICAgICAgb2Zmc2V0UGFyZW50SXNCb2R5ID0gZmFsc2U7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjdXJyZW50Tm9kZSA9IGN1cnJlbnROb2RlLnBhcmVudE5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIW9mZnNldFBhcmVudElzQm9keSkge1xuICAgICAgICAgIHRoaXMuZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgdGhpcy5lbGVtZW50Lm93bmVyRG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEFueSBjc3MgY2hhbmdlIHdpbGwgdHJpZ2dlciBhIHJlcGFpbnQsIHNvIGxldCdzIGF2b2lkIG9uZSBpZiBub3RoaW5nIGNoYW5nZWRcbiAgICAgIHZhciB3cml0ZUNTUyA9IHt9O1xuICAgICAgdmFyIHdyaXRlID0gZmFsc2U7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gY3NzKSB7XG4gICAgICAgIHZhciB2YWwgPSBjc3Nba2V5XTtcbiAgICAgICAgdmFyIGVsVmFsID0gdGhpcy5lbGVtZW50LnN0eWxlW2tleV07XG5cbiAgICAgICAgaWYgKGVsVmFsICE9PSB2YWwpIHtcbiAgICAgICAgICB3cml0ZSA9IHRydWU7XG4gICAgICAgICAgd3JpdGVDU1Nba2V5XSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAod3JpdGUpIHtcbiAgICAgICAgZGVmZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGV4dGVuZChfdGhpczguZWxlbWVudC5zdHlsZSwgd3JpdGVDU1MpO1xuICAgICAgICAgIF90aGlzOC50cmlnZ2VyKCdyZXBvc2l0aW9uZWQnKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFRldGhlckNsYXNzO1xufSkoRXZlbnRlZCk7XG5cblRldGhlckNsYXNzLm1vZHVsZXMgPSBbXTtcblxuVGV0aGVyQmFzZS5wb3NpdGlvbiA9IHBvc2l0aW9uO1xuXG52YXIgVGV0aGVyID0gZXh0ZW5kKFRldGhlckNsYXNzLCBUZXRoZXJCYXNlKTtcbi8qIGdsb2JhbHMgVGV0aGVyQmFzZSAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBfc2xpY2VkVG9BcnJheSA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIHNsaWNlSXRlcmF0b3IoYXJyLCBpKSB7IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pWydyZXR1cm4nXSkgX2lbJ3JldHVybiddKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfSByZXR1cm4gZnVuY3Rpb24gKGFyciwgaSkgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IHJldHVybiBhcnI7IH0gZWxzZSBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSB7IHJldHVybiBzbGljZUl0ZXJhdG9yKGFyciwgaSk7IH0gZWxzZSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UnKTsgfSB9OyB9KSgpO1xuXG52YXIgX1RldGhlckJhc2UkVXRpbHMgPSBUZXRoZXJCYXNlLlV0aWxzO1xudmFyIGdldEJvdW5kcyA9IF9UZXRoZXJCYXNlJFV0aWxzLmdldEJvdW5kcztcbnZhciBleHRlbmQgPSBfVGV0aGVyQmFzZSRVdGlscy5leHRlbmQ7XG52YXIgdXBkYXRlQ2xhc3NlcyA9IF9UZXRoZXJCYXNlJFV0aWxzLnVwZGF0ZUNsYXNzZXM7XG52YXIgZGVmZXIgPSBfVGV0aGVyQmFzZSRVdGlscy5kZWZlcjtcblxudmFyIEJPVU5EU19GT1JNQVQgPSBbJ2xlZnQnLCAndG9wJywgJ3JpZ2h0JywgJ2JvdHRvbSddO1xuXG5mdW5jdGlvbiBnZXRCb3VuZGluZ1JlY3QodGV0aGVyLCB0bykge1xuICBpZiAodG8gPT09ICdzY3JvbGxQYXJlbnQnKSB7XG4gICAgdG8gPSB0ZXRoZXIuc2Nyb2xsUGFyZW50c1swXTtcbiAgfSBlbHNlIGlmICh0byA9PT0gJ3dpbmRvdycpIHtcbiAgICB0byA9IFtwYWdlWE9mZnNldCwgcGFnZVlPZmZzZXQsIGlubmVyV2lkdGggKyBwYWdlWE9mZnNldCwgaW5uZXJIZWlnaHQgKyBwYWdlWU9mZnNldF07XG4gIH1cblxuICBpZiAodG8gPT09IGRvY3VtZW50KSB7XG4gICAgdG8gPSB0by5kb2N1bWVudEVsZW1lbnQ7XG4gIH1cblxuICBpZiAodHlwZW9mIHRvLm5vZGVUeXBlICE9PSAndW5kZWZpbmVkJykge1xuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgbm9kZSA9IHRvO1xuICAgICAgdmFyIHNpemUgPSBnZXRCb3VuZHModG8pO1xuICAgICAgdmFyIHBvcyA9IHNpemU7XG4gICAgICB2YXIgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKHRvKTtcblxuICAgICAgdG8gPSBbcG9zLmxlZnQsIHBvcy50b3AsIHNpemUud2lkdGggKyBwb3MubGVmdCwgc2l6ZS5oZWlnaHQgKyBwb3MudG9wXTtcblxuICAgICAgLy8gQWNjb3VudCBhbnkgcGFyZW50IEZyYW1lcyBzY3JvbGwgb2Zmc2V0XG4gICAgICBpZiAobm9kZS5vd25lckRvY3VtZW50ICE9PSBkb2N1bWVudCkge1xuICAgICAgICB2YXIgd2luID0gbm9kZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O1xuICAgICAgICB0b1swXSArPSB3aW4ucGFnZVhPZmZzZXQ7XG4gICAgICAgIHRvWzFdICs9IHdpbi5wYWdlWU9mZnNldDtcbiAgICAgICAgdG9bMl0gKz0gd2luLnBhZ2VYT2Zmc2V0O1xuICAgICAgICB0b1szXSArPSB3aW4ucGFnZVlPZmZzZXQ7XG4gICAgICB9XG5cbiAgICAgIEJPVU5EU19GT1JNQVQuZm9yRWFjaChmdW5jdGlvbiAoc2lkZSwgaSkge1xuICAgICAgICBzaWRlID0gc2lkZVswXS50b1VwcGVyQ2FzZSgpICsgc2lkZS5zdWJzdHIoMSk7XG4gICAgICAgIGlmIChzaWRlID09PSAnVG9wJyB8fCBzaWRlID09PSAnTGVmdCcpIHtcbiAgICAgICAgICB0b1tpXSArPSBwYXJzZUZsb2F0KHN0eWxlWydib3JkZXInICsgc2lkZSArICdXaWR0aCddKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0b1tpXSAtPSBwYXJzZUZsb2F0KHN0eWxlWydib3JkZXInICsgc2lkZSArICdXaWR0aCddKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSkoKTtcbiAgfVxuXG4gIHJldHVybiB0bztcbn1cblxuVGV0aGVyQmFzZS5tb2R1bGVzLnB1c2goe1xuICBwb3NpdGlvbjogZnVuY3Rpb24gcG9zaXRpb24oX3JlZikge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgdG9wID0gX3JlZi50b3A7XG4gICAgdmFyIGxlZnQgPSBfcmVmLmxlZnQ7XG4gICAgdmFyIHRhcmdldEF0dGFjaG1lbnQgPSBfcmVmLnRhcmdldEF0dGFjaG1lbnQ7XG5cbiAgICBpZiAoIXRoaXMub3B0aW9ucy5jb25zdHJhaW50cykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgdmFyIF9jYWNoZSA9IHRoaXMuY2FjaGUoJ2VsZW1lbnQtYm91bmRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGdldEJvdW5kcyhfdGhpcy5lbGVtZW50KTtcbiAgICB9KTtcblxuICAgIHZhciBoZWlnaHQgPSBfY2FjaGUuaGVpZ2h0O1xuICAgIHZhciB3aWR0aCA9IF9jYWNoZS53aWR0aDtcblxuICAgIGlmICh3aWR0aCA9PT0gMCAmJiBoZWlnaHQgPT09IDAgJiYgdHlwZW9mIHRoaXMubGFzdFNpemUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB2YXIgX2xhc3RTaXplID0gdGhpcy5sYXN0U2l6ZTtcblxuICAgICAgLy8gSGFuZGxlIHRoZSBpdGVtIGdldHRpbmcgaGlkZGVuIGFzIGEgcmVzdWx0IG9mIG91ciBwb3NpdGlvbmluZyB3aXRob3V0IGdsaXRjaGluZ1xuICAgICAgLy8gdGhlIGNsYXNzZXMgaW4gYW5kIG91dFxuICAgICAgd2lkdGggPSBfbGFzdFNpemUud2lkdGg7XG4gICAgICBoZWlnaHQgPSBfbGFzdFNpemUuaGVpZ2h0O1xuICAgIH1cblxuICAgIHZhciB0YXJnZXRTaXplID0gdGhpcy5jYWNoZSgndGFyZ2V0LWJvdW5kcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBfdGhpcy5nZXRUYXJnZXRCb3VuZHMoKTtcbiAgICB9KTtcblxuICAgIHZhciB0YXJnZXRIZWlnaHQgPSB0YXJnZXRTaXplLmhlaWdodDtcbiAgICB2YXIgdGFyZ2V0V2lkdGggPSB0YXJnZXRTaXplLndpZHRoO1xuXG4gICAgdmFyIGFsbENsYXNzZXMgPSBbdGhpcy5nZXRDbGFzcygncGlubmVkJyksIHRoaXMuZ2V0Q2xhc3MoJ291dC1vZi1ib3VuZHMnKV07XG5cbiAgICB0aGlzLm9wdGlvbnMuY29uc3RyYWludHMuZm9yRWFjaChmdW5jdGlvbiAoY29uc3RyYWludCkge1xuICAgICAgdmFyIG91dE9mQm91bmRzQ2xhc3MgPSBjb25zdHJhaW50Lm91dE9mQm91bmRzQ2xhc3M7XG4gICAgICB2YXIgcGlubmVkQ2xhc3MgPSBjb25zdHJhaW50LnBpbm5lZENsYXNzO1xuXG4gICAgICBpZiAob3V0T2ZCb3VuZHNDbGFzcykge1xuICAgICAgICBhbGxDbGFzc2VzLnB1c2gob3V0T2ZCb3VuZHNDbGFzcyk7XG4gICAgICB9XG4gICAgICBpZiAocGlubmVkQ2xhc3MpIHtcbiAgICAgICAgYWxsQ2xhc3Nlcy5wdXNoKHBpbm5lZENsYXNzKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGFsbENsYXNzZXMuZm9yRWFjaChmdW5jdGlvbiAoY2xzKSB7XG4gICAgICBbJ2xlZnQnLCAndG9wJywgJ3JpZ2h0JywgJ2JvdHRvbSddLmZvckVhY2goZnVuY3Rpb24gKHNpZGUpIHtcbiAgICAgICAgYWxsQ2xhc3Nlcy5wdXNoKGNscyArICctJyArIHNpZGUpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB2YXIgYWRkQ2xhc3NlcyA9IFtdO1xuXG4gICAgdmFyIHRBdHRhY2htZW50ID0gZXh0ZW5kKHt9LCB0YXJnZXRBdHRhY2htZW50KTtcbiAgICB2YXIgZUF0dGFjaG1lbnQgPSBleHRlbmQoe30sIHRoaXMuYXR0YWNobWVudCk7XG5cbiAgICB0aGlzLm9wdGlvbnMuY29uc3RyYWludHMuZm9yRWFjaChmdW5jdGlvbiAoY29uc3RyYWludCkge1xuICAgICAgdmFyIHRvID0gY29uc3RyYWludC50bztcbiAgICAgIHZhciBhdHRhY2htZW50ID0gY29uc3RyYWludC5hdHRhY2htZW50O1xuICAgICAgdmFyIHBpbiA9IGNvbnN0cmFpbnQucGluO1xuXG4gICAgICBpZiAodHlwZW9mIGF0dGFjaG1lbnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGF0dGFjaG1lbnQgPSAnJztcbiAgICAgIH1cblxuICAgICAgdmFyIGNoYW5nZUF0dGFjaFggPSB1bmRlZmluZWQsXG4gICAgICAgICAgY2hhbmdlQXR0YWNoWSA9IHVuZGVmaW5lZDtcbiAgICAgIGlmIChhdHRhY2htZW50LmluZGV4T2YoJyAnKSA+PSAwKSB7XG4gICAgICAgIHZhciBfYXR0YWNobWVudCRzcGxpdCA9IGF0dGFjaG1lbnQuc3BsaXQoJyAnKTtcblxuICAgICAgICB2YXIgX2F0dGFjaG1lbnQkc3BsaXQyID0gX3NsaWNlZFRvQXJyYXkoX2F0dGFjaG1lbnQkc3BsaXQsIDIpO1xuXG4gICAgICAgIGNoYW5nZUF0dGFjaFkgPSBfYXR0YWNobWVudCRzcGxpdDJbMF07XG4gICAgICAgIGNoYW5nZUF0dGFjaFggPSBfYXR0YWNobWVudCRzcGxpdDJbMV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaGFuZ2VBdHRhY2hYID0gY2hhbmdlQXR0YWNoWSA9IGF0dGFjaG1lbnQ7XG4gICAgICB9XG5cbiAgICAgIHZhciBib3VuZHMgPSBnZXRCb3VuZGluZ1JlY3QoX3RoaXMsIHRvKTtcblxuICAgICAgaWYgKGNoYW5nZUF0dGFjaFkgPT09ICd0YXJnZXQnIHx8IGNoYW5nZUF0dGFjaFkgPT09ICdib3RoJykge1xuICAgICAgICBpZiAodG9wIDwgYm91bmRzWzFdICYmIHRBdHRhY2htZW50LnRvcCA9PT0gJ3RvcCcpIHtcbiAgICAgICAgICB0b3AgKz0gdGFyZ2V0SGVpZ2h0O1xuICAgICAgICAgIHRBdHRhY2htZW50LnRvcCA9ICdib3R0b20nO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRvcCArIGhlaWdodCA+IGJvdW5kc1szXSAmJiB0QXR0YWNobWVudC50b3AgPT09ICdib3R0b20nKSB7XG4gICAgICAgICAgdG9wIC09IHRhcmdldEhlaWdodDtcbiAgICAgICAgICB0QXR0YWNobWVudC50b3AgPSAndG9wJztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoY2hhbmdlQXR0YWNoWSA9PT0gJ3RvZ2V0aGVyJykge1xuICAgICAgICBpZiAodEF0dGFjaG1lbnQudG9wID09PSAndG9wJykge1xuICAgICAgICAgIGlmIChlQXR0YWNobWVudC50b3AgPT09ICdib3R0b20nICYmIHRvcCA8IGJvdW5kc1sxXSkge1xuICAgICAgICAgICAgdG9wICs9IHRhcmdldEhlaWdodDtcbiAgICAgICAgICAgIHRBdHRhY2htZW50LnRvcCA9ICdib3R0b20nO1xuXG4gICAgICAgICAgICB0b3AgKz0gaGVpZ2h0O1xuICAgICAgICAgICAgZUF0dGFjaG1lbnQudG9wID0gJ3RvcCc7XG4gICAgICAgICAgfSBlbHNlIGlmIChlQXR0YWNobWVudC50b3AgPT09ICd0b3AnICYmIHRvcCArIGhlaWdodCA+IGJvdW5kc1szXSAmJiB0b3AgLSAoaGVpZ2h0IC0gdGFyZ2V0SGVpZ2h0KSA+PSBib3VuZHNbMV0pIHtcbiAgICAgICAgICAgIHRvcCAtPSBoZWlnaHQgLSB0YXJnZXRIZWlnaHQ7XG4gICAgICAgICAgICB0QXR0YWNobWVudC50b3AgPSAnYm90dG9tJztcblxuICAgICAgICAgICAgZUF0dGFjaG1lbnQudG9wID0gJ2JvdHRvbSc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRBdHRhY2htZW50LnRvcCA9PT0gJ2JvdHRvbScpIHtcbiAgICAgICAgICBpZiAoZUF0dGFjaG1lbnQudG9wID09PSAndG9wJyAmJiB0b3AgKyBoZWlnaHQgPiBib3VuZHNbM10pIHtcbiAgICAgICAgICAgIHRvcCAtPSB0YXJnZXRIZWlnaHQ7XG4gICAgICAgICAgICB0QXR0YWNobWVudC50b3AgPSAndG9wJztcblxuICAgICAgICAgICAgdG9wIC09IGhlaWdodDtcbiAgICAgICAgICAgIGVBdHRhY2htZW50LnRvcCA9ICdib3R0b20nO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZUF0dGFjaG1lbnQudG9wID09PSAnYm90dG9tJyAmJiB0b3AgPCBib3VuZHNbMV0gJiYgdG9wICsgKGhlaWdodCAqIDIgLSB0YXJnZXRIZWlnaHQpIDw9IGJvdW5kc1szXSkge1xuICAgICAgICAgICAgdG9wICs9IGhlaWdodCAtIHRhcmdldEhlaWdodDtcbiAgICAgICAgICAgIHRBdHRhY2htZW50LnRvcCA9ICd0b3AnO1xuXG4gICAgICAgICAgICBlQXR0YWNobWVudC50b3AgPSAndG9wJztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodEF0dGFjaG1lbnQudG9wID09PSAnbWlkZGxlJykge1xuICAgICAgICAgIGlmICh0b3AgKyBoZWlnaHQgPiBib3VuZHNbM10gJiYgZUF0dGFjaG1lbnQudG9wID09PSAndG9wJykge1xuICAgICAgICAgICAgdG9wIC09IGhlaWdodDtcbiAgICAgICAgICAgIGVBdHRhY2htZW50LnRvcCA9ICdib3R0b20nO1xuICAgICAgICAgIH0gZWxzZSBpZiAodG9wIDwgYm91bmRzWzFdICYmIGVBdHRhY2htZW50LnRvcCA9PT0gJ2JvdHRvbScpIHtcbiAgICAgICAgICAgIHRvcCArPSBoZWlnaHQ7XG4gICAgICAgICAgICBlQXR0YWNobWVudC50b3AgPSAndG9wJztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGNoYW5nZUF0dGFjaFggPT09ICd0YXJnZXQnIHx8IGNoYW5nZUF0dGFjaFggPT09ICdib3RoJykge1xuICAgICAgICBpZiAobGVmdCA8IGJvdW5kc1swXSAmJiB0QXR0YWNobWVudC5sZWZ0ID09PSAnbGVmdCcpIHtcbiAgICAgICAgICBsZWZ0ICs9IHRhcmdldFdpZHRoO1xuICAgICAgICAgIHRBdHRhY2htZW50LmxlZnQgPSAncmlnaHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGxlZnQgKyB3aWR0aCA+IGJvdW5kc1syXSAmJiB0QXR0YWNobWVudC5sZWZ0ID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgbGVmdCAtPSB0YXJnZXRXaWR0aDtcbiAgICAgICAgICB0QXR0YWNobWVudC5sZWZ0ID0gJ2xlZnQnO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFuZ2VBdHRhY2hYID09PSAndG9nZXRoZXInKSB7XG4gICAgICAgIGlmIChsZWZ0IDwgYm91bmRzWzBdICYmIHRBdHRhY2htZW50LmxlZnQgPT09ICdsZWZ0Jykge1xuICAgICAgICAgIGlmIChlQXR0YWNobWVudC5sZWZ0ID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgICBsZWZ0ICs9IHRhcmdldFdpZHRoO1xuICAgICAgICAgICAgdEF0dGFjaG1lbnQubGVmdCA9ICdyaWdodCc7XG5cbiAgICAgICAgICAgIGxlZnQgKz0gd2lkdGg7XG4gICAgICAgICAgICBlQXR0YWNobWVudC5sZWZ0ID0gJ2xlZnQnO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZUF0dGFjaG1lbnQubGVmdCA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgICBsZWZ0ICs9IHRhcmdldFdpZHRoO1xuICAgICAgICAgICAgdEF0dGFjaG1lbnQubGVmdCA9ICdyaWdodCc7XG5cbiAgICAgICAgICAgIGxlZnQgLT0gd2lkdGg7XG4gICAgICAgICAgICBlQXR0YWNobWVudC5sZWZ0ID0gJ3JpZ2h0JztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAobGVmdCArIHdpZHRoID4gYm91bmRzWzJdICYmIHRBdHRhY2htZW50LmxlZnQgPT09ICdyaWdodCcpIHtcbiAgICAgICAgICBpZiAoZUF0dGFjaG1lbnQubGVmdCA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgICBsZWZ0IC09IHRhcmdldFdpZHRoO1xuICAgICAgICAgICAgdEF0dGFjaG1lbnQubGVmdCA9ICdsZWZ0JztcblxuICAgICAgICAgICAgbGVmdCAtPSB3aWR0aDtcbiAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAncmlnaHQnO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZUF0dGFjaG1lbnQubGVmdCA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgICAgbGVmdCAtPSB0YXJnZXRXaWR0aDtcbiAgICAgICAgICAgIHRBdHRhY2htZW50LmxlZnQgPSAnbGVmdCc7XG5cbiAgICAgICAgICAgIGxlZnQgKz0gd2lkdGg7XG4gICAgICAgICAgICBlQXR0YWNobWVudC5sZWZ0ID0gJ2xlZnQnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0QXR0YWNobWVudC5sZWZ0ID09PSAnY2VudGVyJykge1xuICAgICAgICAgIGlmIChsZWZ0ICsgd2lkdGggPiBib3VuZHNbMl0gJiYgZUF0dGFjaG1lbnQubGVmdCA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgICBsZWZ0IC09IHdpZHRoO1xuICAgICAgICAgICAgZUF0dGFjaG1lbnQubGVmdCA9ICdyaWdodCc7XG4gICAgICAgICAgfSBlbHNlIGlmIChsZWZ0IDwgYm91bmRzWzBdICYmIGVBdHRhY2htZW50LmxlZnQgPT09ICdyaWdodCcpIHtcbiAgICAgICAgICAgIGxlZnQgKz0gd2lkdGg7XG4gICAgICAgICAgICBlQXR0YWNobWVudC5sZWZ0ID0gJ2xlZnQnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoY2hhbmdlQXR0YWNoWSA9PT0gJ2VsZW1lbnQnIHx8IGNoYW5nZUF0dGFjaFkgPT09ICdib3RoJykge1xuICAgICAgICBpZiAodG9wIDwgYm91bmRzWzFdICYmIGVBdHRhY2htZW50LnRvcCA9PT0gJ2JvdHRvbScpIHtcbiAgICAgICAgICB0b3AgKz0gaGVpZ2h0O1xuICAgICAgICAgIGVBdHRhY2htZW50LnRvcCA9ICd0b3AnO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRvcCArIGhlaWdodCA+IGJvdW5kc1szXSAmJiBlQXR0YWNobWVudC50b3AgPT09ICd0b3AnKSB7XG4gICAgICAgICAgdG9wIC09IGhlaWdodDtcbiAgICAgICAgICBlQXR0YWNobWVudC50b3AgPSAnYm90dG9tJztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoY2hhbmdlQXR0YWNoWCA9PT0gJ2VsZW1lbnQnIHx8IGNoYW5nZUF0dGFjaFggPT09ICdib3RoJykge1xuICAgICAgICBpZiAobGVmdCA8IGJvdW5kc1swXSkge1xuICAgICAgICAgIGlmIChlQXR0YWNobWVudC5sZWZ0ID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgICBsZWZ0ICs9IHdpZHRoO1xuICAgICAgICAgICAgZUF0dGFjaG1lbnQubGVmdCA9ICdsZWZ0JztcbiAgICAgICAgICB9IGVsc2UgaWYgKGVBdHRhY2htZW50LmxlZnQgPT09ICdjZW50ZXInKSB7XG4gICAgICAgICAgICBsZWZ0ICs9IHdpZHRoIC8gMjtcbiAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAnbGVmdCc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGxlZnQgKyB3aWR0aCA+IGJvdW5kc1syXSkge1xuICAgICAgICAgIGlmIChlQXR0YWNobWVudC5sZWZ0ID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgIGxlZnQgLT0gd2lkdGg7XG4gICAgICAgICAgICBlQXR0YWNobWVudC5sZWZ0ID0gJ3JpZ2h0JztcbiAgICAgICAgICB9IGVsc2UgaWYgKGVBdHRhY2htZW50LmxlZnQgPT09ICdjZW50ZXInKSB7XG4gICAgICAgICAgICBsZWZ0IC09IHdpZHRoIC8gMjtcbiAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAncmlnaHQnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHBpbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcGluID0gcGluLnNwbGl0KCcsJykubWFwKGZ1bmN0aW9uIChwKSB7XG4gICAgICAgICAgcmV0dXJuIHAudHJpbSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAocGluID09PSB0cnVlKSB7XG4gICAgICAgIHBpbiA9IFsndG9wJywgJ2xlZnQnLCAncmlnaHQnLCAnYm90dG9tJ107XG4gICAgICB9XG5cbiAgICAgIHBpbiA9IHBpbiB8fCBbXTtcblxuICAgICAgdmFyIHBpbm5lZCA9IFtdO1xuICAgICAgdmFyIG9vYiA9IFtdO1xuXG4gICAgICBpZiAodG9wIDwgYm91bmRzWzFdKSB7XG4gICAgICAgIGlmIChwaW4uaW5kZXhPZigndG9wJykgPj0gMCkge1xuICAgICAgICAgIHRvcCA9IGJvdW5kc1sxXTtcbiAgICAgICAgICBwaW5uZWQucHVzaCgndG9wJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb29iLnB1c2goJ3RvcCcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0b3AgKyBoZWlnaHQgPiBib3VuZHNbM10pIHtcbiAgICAgICAgaWYgKHBpbi5pbmRleE9mKCdib3R0b20nKSA+PSAwKSB7XG4gICAgICAgICAgdG9wID0gYm91bmRzWzNdIC0gaGVpZ2h0O1xuICAgICAgICAgIHBpbm5lZC5wdXNoKCdib3R0b20nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvb2IucHVzaCgnYm90dG9tJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGxlZnQgPCBib3VuZHNbMF0pIHtcbiAgICAgICAgaWYgKHBpbi5pbmRleE9mKCdsZWZ0JykgPj0gMCkge1xuICAgICAgICAgIGxlZnQgPSBib3VuZHNbMF07XG4gICAgICAgICAgcGlubmVkLnB1c2goJ2xlZnQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvb2IucHVzaCgnbGVmdCcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChsZWZ0ICsgd2lkdGggPiBib3VuZHNbMl0pIHtcbiAgICAgICAgaWYgKHBpbi5pbmRleE9mKCdyaWdodCcpID49IDApIHtcbiAgICAgICAgICBsZWZ0ID0gYm91bmRzWzJdIC0gd2lkdGg7XG4gICAgICAgICAgcGlubmVkLnB1c2goJ3JpZ2h0Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb29iLnB1c2goJ3JpZ2h0Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHBpbm5lZC5sZW5ndGgpIHtcbiAgICAgICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgcGlubmVkQ2xhc3MgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgaWYgKHR5cGVvZiBfdGhpcy5vcHRpb25zLnBpbm5lZENsYXNzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcGlubmVkQ2xhc3MgPSBfdGhpcy5vcHRpb25zLnBpbm5lZENsYXNzO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwaW5uZWRDbGFzcyA9IF90aGlzLmdldENsYXNzKCdwaW5uZWQnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBhZGRDbGFzc2VzLnB1c2gocGlubmVkQ2xhc3MpO1xuICAgICAgICAgIHBpbm5lZC5mb3JFYWNoKGZ1bmN0aW9uIChzaWRlKSB7XG4gICAgICAgICAgICBhZGRDbGFzc2VzLnB1c2gocGlubmVkQ2xhc3MgKyAnLScgKyBzaWRlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSkoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG9vYi5sZW5ndGgpIHtcbiAgICAgICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgb29iQ2xhc3MgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgaWYgKHR5cGVvZiBfdGhpcy5vcHRpb25zLm91dE9mQm91bmRzQ2xhc3MgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBvb2JDbGFzcyA9IF90aGlzLm9wdGlvbnMub3V0T2ZCb3VuZHNDbGFzcztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb29iQ2xhc3MgPSBfdGhpcy5nZXRDbGFzcygnb3V0LW9mLWJvdW5kcycpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGFkZENsYXNzZXMucHVzaChvb2JDbGFzcyk7XG4gICAgICAgICAgb29iLmZvckVhY2goZnVuY3Rpb24gKHNpZGUpIHtcbiAgICAgICAgICAgIGFkZENsYXNzZXMucHVzaChvb2JDbGFzcyArICctJyArIHNpZGUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KSgpO1xuICAgICAgfVxuXG4gICAgICBpZiAocGlubmVkLmluZGV4T2YoJ2xlZnQnKSA+PSAwIHx8IHBpbm5lZC5pbmRleE9mKCdyaWdodCcpID49IDApIHtcbiAgICAgICAgZUF0dGFjaG1lbnQubGVmdCA9IHRBdHRhY2htZW50LmxlZnQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChwaW5uZWQuaW5kZXhPZigndG9wJykgPj0gMCB8fCBwaW5uZWQuaW5kZXhPZignYm90dG9tJykgPj0gMCkge1xuICAgICAgICBlQXR0YWNobWVudC50b3AgPSB0QXR0YWNobWVudC50b3AgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRBdHRhY2htZW50LnRvcCAhPT0gdGFyZ2V0QXR0YWNobWVudC50b3AgfHwgdEF0dGFjaG1lbnQubGVmdCAhPT0gdGFyZ2V0QXR0YWNobWVudC5sZWZ0IHx8IGVBdHRhY2htZW50LnRvcCAhPT0gX3RoaXMuYXR0YWNobWVudC50b3AgfHwgZUF0dGFjaG1lbnQubGVmdCAhPT0gX3RoaXMuYXR0YWNobWVudC5sZWZ0KSB7XG4gICAgICAgIF90aGlzLnVwZGF0ZUF0dGFjaENsYXNzZXMoZUF0dGFjaG1lbnQsIHRBdHRhY2htZW50KTtcbiAgICAgICAgX3RoaXMudHJpZ2dlcigndXBkYXRlJywge1xuICAgICAgICAgIGF0dGFjaG1lbnQ6IGVBdHRhY2htZW50LFxuICAgICAgICAgIHRhcmdldEF0dGFjaG1lbnQ6IHRBdHRhY2htZW50XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZGVmZXIoZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCEoX3RoaXMub3B0aW9ucy5hZGRUYXJnZXRDbGFzc2VzID09PSBmYWxzZSkpIHtcbiAgICAgICAgdXBkYXRlQ2xhc3NlcyhfdGhpcy50YXJnZXQsIGFkZENsYXNzZXMsIGFsbENsYXNzZXMpO1xuICAgICAgfVxuICAgICAgdXBkYXRlQ2xhc3NlcyhfdGhpcy5lbGVtZW50LCBhZGRDbGFzc2VzLCBhbGxDbGFzc2VzKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB7IHRvcDogdG9wLCBsZWZ0OiBsZWZ0IH07XG4gIH1cbn0pO1xuLyogZ2xvYmFscyBUZXRoZXJCYXNlICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIF9UZXRoZXJCYXNlJFV0aWxzID0gVGV0aGVyQmFzZS5VdGlscztcbnZhciBnZXRCb3VuZHMgPSBfVGV0aGVyQmFzZSRVdGlscy5nZXRCb3VuZHM7XG52YXIgdXBkYXRlQ2xhc3NlcyA9IF9UZXRoZXJCYXNlJFV0aWxzLnVwZGF0ZUNsYXNzZXM7XG52YXIgZGVmZXIgPSBfVGV0aGVyQmFzZSRVdGlscy5kZWZlcjtcblxuVGV0aGVyQmFzZS5tb2R1bGVzLnB1c2goe1xuICBwb3NpdGlvbjogZnVuY3Rpb24gcG9zaXRpb24oX3JlZikge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgdG9wID0gX3JlZi50b3A7XG4gICAgdmFyIGxlZnQgPSBfcmVmLmxlZnQ7XG5cbiAgICB2YXIgX2NhY2hlID0gdGhpcy5jYWNoZSgnZWxlbWVudC1ib3VuZHMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gZ2V0Qm91bmRzKF90aGlzLmVsZW1lbnQpO1xuICAgIH0pO1xuXG4gICAgdmFyIGhlaWdodCA9IF9jYWNoZS5oZWlnaHQ7XG4gICAgdmFyIHdpZHRoID0gX2NhY2hlLndpZHRoO1xuXG4gICAgdmFyIHRhcmdldFBvcyA9IHRoaXMuZ2V0VGFyZ2V0Qm91bmRzKCk7XG5cbiAgICB2YXIgYm90dG9tID0gdG9wICsgaGVpZ2h0O1xuICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDtcblxuICAgIHZhciBhYnV0dGVkID0gW107XG4gICAgaWYgKHRvcCA8PSB0YXJnZXRQb3MuYm90dG9tICYmIGJvdHRvbSA+PSB0YXJnZXRQb3MudG9wKSB7XG4gICAgICBbJ2xlZnQnLCAncmlnaHQnXS5mb3JFYWNoKGZ1bmN0aW9uIChzaWRlKSB7XG4gICAgICAgIHZhciB0YXJnZXRQb3NTaWRlID0gdGFyZ2V0UG9zW3NpZGVdO1xuICAgICAgICBpZiAodGFyZ2V0UG9zU2lkZSA9PT0gbGVmdCB8fCB0YXJnZXRQb3NTaWRlID09PSByaWdodCkge1xuICAgICAgICAgIGFidXR0ZWQucHVzaChzaWRlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGxlZnQgPD0gdGFyZ2V0UG9zLnJpZ2h0ICYmIHJpZ2h0ID49IHRhcmdldFBvcy5sZWZ0KSB7XG4gICAgICBbJ3RvcCcsICdib3R0b20nXS5mb3JFYWNoKGZ1bmN0aW9uIChzaWRlKSB7XG4gICAgICAgIHZhciB0YXJnZXRQb3NTaWRlID0gdGFyZ2V0UG9zW3NpZGVdO1xuICAgICAgICBpZiAodGFyZ2V0UG9zU2lkZSA9PT0gdG9wIHx8IHRhcmdldFBvc1NpZGUgPT09IGJvdHRvbSkge1xuICAgICAgICAgIGFidXR0ZWQucHVzaChzaWRlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdmFyIGFsbENsYXNzZXMgPSBbXTtcbiAgICB2YXIgYWRkQ2xhc3NlcyA9IFtdO1xuXG4gICAgdmFyIHNpZGVzID0gWydsZWZ0JywgJ3RvcCcsICdyaWdodCcsICdib3R0b20nXTtcbiAgICBhbGxDbGFzc2VzLnB1c2godGhpcy5nZXRDbGFzcygnYWJ1dHRlZCcpKTtcbiAgICBzaWRlcy5mb3JFYWNoKGZ1bmN0aW9uIChzaWRlKSB7XG4gICAgICBhbGxDbGFzc2VzLnB1c2goX3RoaXMuZ2V0Q2xhc3MoJ2FidXR0ZWQnKSArICctJyArIHNpZGUpO1xuICAgIH0pO1xuXG4gICAgaWYgKGFidXR0ZWQubGVuZ3RoKSB7XG4gICAgICBhZGRDbGFzc2VzLnB1c2godGhpcy5nZXRDbGFzcygnYWJ1dHRlZCcpKTtcbiAgICB9XG5cbiAgICBhYnV0dGVkLmZvckVhY2goZnVuY3Rpb24gKHNpZGUpIHtcbiAgICAgIGFkZENsYXNzZXMucHVzaChfdGhpcy5nZXRDbGFzcygnYWJ1dHRlZCcpICsgJy0nICsgc2lkZSk7XG4gICAgfSk7XG5cbiAgICBkZWZlcihmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIShfdGhpcy5vcHRpb25zLmFkZFRhcmdldENsYXNzZXMgPT09IGZhbHNlKSkge1xuICAgICAgICB1cGRhdGVDbGFzc2VzKF90aGlzLnRhcmdldCwgYWRkQ2xhc3NlcywgYWxsQ2xhc3Nlcyk7XG4gICAgICB9XG4gICAgICB1cGRhdGVDbGFzc2VzKF90aGlzLmVsZW1lbnQsIGFkZENsYXNzZXMsIGFsbENsYXNzZXMpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn0pO1xuLyogZ2xvYmFscyBUZXRoZXJCYXNlICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIF9zbGljZWRUb0FycmF5ID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gc2xpY2VJdGVyYXRvcihhcnIsIGkpIHsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbJ3JldHVybiddKSBfaVsncmV0dXJuJ10oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9IHJldHVybiBmdW5jdGlvbiAoYXJyLCBpKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgcmV0dXJuIGFycjsgfSBlbHNlIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpIHsgcmV0dXJuIHNsaWNlSXRlcmF0b3IoYXJyLCBpKTsgfSBlbHNlIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZScpOyB9IH07IH0pKCk7XG5cblRldGhlckJhc2UubW9kdWxlcy5wdXNoKHtcbiAgcG9zaXRpb246IGZ1bmN0aW9uIHBvc2l0aW9uKF9yZWYpIHtcbiAgICB2YXIgdG9wID0gX3JlZi50b3A7XG4gICAgdmFyIGxlZnQgPSBfcmVmLmxlZnQ7XG5cbiAgICBpZiAoIXRoaXMub3B0aW9ucy5zaGlmdCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBzaGlmdCA9IHRoaXMub3B0aW9ucy5zaGlmdDtcbiAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5zaGlmdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgc2hpZnQgPSB0aGlzLm9wdGlvbnMuc2hpZnQuY2FsbCh0aGlzLCB7IHRvcDogdG9wLCBsZWZ0OiBsZWZ0IH0pO1xuICAgIH1cblxuICAgIHZhciBzaGlmdFRvcCA9IHVuZGVmaW5lZCxcbiAgICAgICAgc2hpZnRMZWZ0ID0gdW5kZWZpbmVkO1xuICAgIGlmICh0eXBlb2Ygc2hpZnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBzaGlmdCA9IHNoaWZ0LnNwbGl0KCcgJyk7XG4gICAgICBzaGlmdFsxXSA9IHNoaWZ0WzFdIHx8IHNoaWZ0WzBdO1xuXG4gICAgICB2YXIgX3NoaWZ0ID0gc2hpZnQ7XG5cbiAgICAgIHZhciBfc2hpZnQyID0gX3NsaWNlZFRvQXJyYXkoX3NoaWZ0LCAyKTtcblxuICAgICAgc2hpZnRUb3AgPSBfc2hpZnQyWzBdO1xuICAgICAgc2hpZnRMZWZ0ID0gX3NoaWZ0MlsxXTtcblxuICAgICAgc2hpZnRUb3AgPSBwYXJzZUZsb2F0KHNoaWZ0VG9wLCAxMCk7XG4gICAgICBzaGlmdExlZnQgPSBwYXJzZUZsb2F0KHNoaWZ0TGVmdCwgMTApO1xuICAgIH0gZWxzZSB7XG4gICAgICBzaGlmdFRvcCA9IHNoaWZ0LnRvcDtcbiAgICAgIHNoaWZ0TGVmdCA9IHNoaWZ0LmxlZnQ7XG4gICAgfVxuXG4gICAgdG9wICs9IHNoaWZ0VG9wO1xuICAgIGxlZnQgKz0gc2hpZnRMZWZ0O1xuXG4gICAgcmV0dXJuIHsgdG9wOiB0b3AsIGxlZnQ6IGxlZnQgfTtcbiAgfVxufSk7XG5yZXR1cm4gVGV0aGVyO1xuXG59KSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
